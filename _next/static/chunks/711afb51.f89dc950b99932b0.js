(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{70619:function(e,t,n){!function(e,t){"use strict";var i,r,o,a={draw:"crosshair",pointHover:"pointer",pointDrag:"move",lineHover:"pointer",lineDrag:"move",polygonHover:"pointer",polygonDrag:"move"},s={point:[],line:[],polygon:[],midPoint:[],dashLine:[],text:[]},u="bottom",l="right",c="left",h="auto",d=["top",u,l,c],f="start",p="viewport",v="popper",g=d.reduce(function(e,t){return e.concat([t+"-"+f,t+"-end"])},[]),y=[].concat(d,[h]).reduce(function(e,t){return e.concat([t,t+"-"+f,t+"-end"])},[]),m=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function b(e){return e?(e.nodeName||"").toLowerCase():null}function D(e){if(null==e)return window;if(""+e!="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function w(e){return e instanceof D(e).Element||e instanceof Element}function E(e){return e instanceof D(e).HTMLElement||e instanceof HTMLElement}function x(e){return"undefined"!=typeof ShadowRoot&&(e instanceof D(e).ShadowRoot||e instanceof ShadowRoot)}var k={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];E(r)&&b(r)&&(Object.assign(r.style,n),Object.keys(i).forEach(function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var i=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});E(i)&&b(i)&&(Object.assign(i.style,o),Object.keys(r).forEach(function(e){i.removeAttribute(e)}))})}},requires:["computeStyles"]};function P(e){return e.split("-")[0]}var M=Math.max,L=Math.min,A=Math.round;function O(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function C(){return!/^((?!chrome|android).)*safari/i.test(O())}function _(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&E(e)&&(r=e.offsetWidth>0&&A(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&A(i.height)/e.offsetHeight||1);var a=(w(e)?D(e):window).visualViewport,s=!C()&&n,u=(i.left+(s&&a?a.offsetLeft:0))/r,l=(i.top+(s&&a?a.offsetTop:0))/o,c=i.width/r,h=i.height/o;return{width:c,height:h,top:l,right:u+c,bottom:l+h,left:u,x:u,y:l}}function R(e){var t=_(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)>1||(n=t.width),Math.abs(t.height-i)>1||(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function S(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&x(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function j(e){return D(e).getComputedStyle(e)}function T(e){return((w(e)?e.ownerDocument:e.document)||window.document).documentElement}function H(e){return"html"===b(e)?e:e.assignedSlot||e.parentNode||(x(e)?e.host:null)||T(e)}function B(e){return E(e)&&"fixed"!==j(e).position?e.offsetParent:null}function F(e){for(var t=D(e),n=B(e);n&&["table","td","th"].indexOf(b(n))>=0&&"static"===j(n).position;)n=B(n);return n&&("html"===b(n)||"body"===b(n)&&"static"===j(n).position)?t:n||function(e){var t=/firefox/i.test(O());if(/Trident/i.test(O())&&E(e)&&"fixed"===j(e).position)return null;var n=H(e);for(x(n)&&(n=n.host);E(n)&&0>["html","body"].indexOf(b(n));){var i=j(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}function N(e){return 0>["top","bottom"].indexOf(e)?"y":"x"}function U(e,t,n){return M(e,L(t,n))}function I(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Y(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function X(e){return e.split("-")[1]}var z={top:"auto",right:"auto",bottom:"auto",left:"auto"};function q(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,a=e.offsets,s=e.position,h=e.gpuAcceleration,d=e.adaptive,f=e.roundOffsets,p=e.isFixed,v=a.x,g=void 0===v?0:v,y=a.y,m=void 0===y?0:y,b="function"==typeof f?f({x:g,y:m}):{x:g,y:m};g=b.x,m=b.y;var w=a.hasOwnProperty("x"),E=a.hasOwnProperty("y"),x=c,k="top",P=window;if(d){var M=F(n),L="clientHeight",O="clientWidth";M===D(n)&&"static"!==j(M=T(n)).position&&"absolute"===s&&(L="scrollHeight",O="scrollWidth"),("top"===r||(r===c||r===l)&&"end"===o)&&(k=u,m-=(p&&M===P&&P.visualViewport?P.visualViewport.height:M[L])-i.height,m*=h?1:-1),(r===c||("top"===r||r===u)&&"end"===o)&&(x=l,g-=(p&&M===P&&P.visualViewport?P.visualViewport.width:M[O])-i.width,g*=h?1:-1)}var C,_,R,S,H,B=Object.assign({position:s},d&&z),N=!0===f?(C={x:g,y:m},_=D(n),R=C.y,S=_.devicePixelRatio||1,{x:A(C.x*S)/S||0,y:A(R*S)/S||0}):{x:g,y:m};return g=N.x,m=N.y,Object.assign({},B,h?((H={})[k]=E?"0":"",H[x]=w?"0":"",H.transform=(P.devicePixelRatio||1)>1?"translate3d("+g+"px, "+m+"px, 0)":"translate("+g+"px, "+m+"px)",H):((t={})[k]=E?m+"px":"",t[x]=w?g+"px":"",t.transform="",t))}var V={passive:!0},W={left:"right",right:"left",bottom:"top",top:"bottom"};function $(e){return e.replace(/left|right|bottom|top/g,function(e){return W[e]})}var G={start:"end",end:"start"};function K(e){return e.replace(/start|end/g,function(e){return G[e]})}function J(e){var t=D(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Z(e){return _(T(e)).left+J(e).scrollLeft}function Q(e){var t=j(e);return/auto|scroll|overlay|hidden/.test(t.overflow+t.overflowY+t.overflowX)}function ee(e,t){void 0===t&&(t=[]);var n,i=function e(t){return 0>["html","body","#document"].indexOf(b(t))?E(t)&&Q(t)?t:e(H(t)):t.ownerDocument.body}(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),o=D(i),a=r?[o].concat(o.visualViewport||[],Q(i)?i:[]):i,s=t.concat(a);return r?s:s.concat(ee(H(a)))}function et(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function en(e,t,n){var i,r,o,a,s,u,l,c,h,d;return t===p?et(function(e,t){var n=D(e),i=T(e),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,u=0;if(r){o=r.width,a=r.height;var l=C();(l||!l&&"fixed"===t)&&(s=r.offsetLeft,u=r.offsetTop)}return{width:o,height:a,x:s+Z(e),y:u}}(e,n)):w(t)?((i=_(t,!1,"fixed"===n)).top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i):et((r=T(e),a=T(r),s=J(r),u=null==(o=r.ownerDocument)?void 0:o.body,l=M(a.scrollWidth,a.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),c=M(a.scrollHeight,a.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0),h=-s.scrollLeft+Z(r),d=-s.scrollTop,"rtl"===j(u||a).direction&&(h+=M(a.clientWidth,u?u.clientWidth:0)-l),{width:l,height:c,x:h,y:d}))}function ei(e){var t,n=e.reference,i=e.element,r=e.placement,o=r?P(r):null,a=r?X(r):null,s=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2;switch(o){case"top":t={x:s,y:n.y-i.height};break;case u:t={x:s,y:n.y+n.height};break;case l:t={x:n.x+n.width,y:h};break;case c:t={x:n.x-i.width,y:h};break;default:t={x:n.x,y:n.y}}var d=o?N(o):null;if(null!=d){var p="y"===d?"height":"width";switch(a){case f:t[d]=t[d]-(n[p]/2-i[p]/2);break;case"end":t[d]=t[d]+(n[p]/2-i[p]/2)}}return t}function er(e,t){void 0===t&&(t={});var n,i,r,o,a,s,c=t.placement,h=void 0===c?e.placement:c,f=t.strategy,g=void 0===f?e.strategy:f,y=t.boundary,m=t.rootBoundary,D=t.elementContext,x=void 0===D?v:D,k=t.altBoundary,P=t.padding,A=void 0===P?0:P,O=I("number"!=typeof A?A:Y(A,d)),C=e.rects.popper,R=e.elements[void 0!==k&&k?x===v?"reference":v:x],B=(n=w(R)?R:R.contextElement||T(e.elements.popper),(s=(a=[].concat("clippingParents"===(i=void 0===y?"clippingParents":y)?(r=ee(H(n)),w(o=["absolute","fixed"].indexOf(j(n).position)>=0&&E(n)?F(n):n)?r.filter(function(e){return w(e)&&S(e,o)&&"body"!==b(e)}):[]):[].concat(i),[void 0===m?p:m])).reduce(function(e,t){var i=en(n,t,g);return e.top=M(i.top,e.top),e.right=L(i.right,e.right),e.bottom=L(i.bottom,e.bottom),e.left=M(i.left,e.left),e},en(n,a[0],g))).width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s),N=_(e.elements.reference),U=ei({reference:N,element:C,strategy:"absolute",placement:h}),X=et(Object.assign({},C,U)),z=x===v?X:N,q={top:B.top-z.top+O.top,bottom:z.bottom-B.bottom+O.bottom,left:B.left-z.left+O.left,right:z.right-B.right+O.right},V=e.modifiersData.offset;if(x===v&&V){var W=V[h];Object.keys(q).forEach(function(e){var t=0>[l,u].indexOf(e)?-1:1;q[e]+=W[0>["top",u].indexOf(e)?"x":"y"]*t})}return q}function eo(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ea(e){return["top",l,u,c].some(function(t){return e[t]>=0})}var es={placement:"bottom",modifiers:[],strategy:"absolute"};function eu(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var el=(e1=void 0===(e0=(eQ={defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,a=i.resize,s=void 0===a||a,u=D(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach(function(e){e.addEventListener("scroll",n.update,V)}),s&&u.addEventListener("resize",n.update,V),function(){o&&l.forEach(function(e){e.removeEventListener("scroll",n.update,V)}),s&&u.removeEventListener("resize",n.update,V)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state;t.modifiersData[e.name]=ei({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=n.adaptive,o=n.roundOffsets,a=void 0===o||o,s={placement:P(t.placement),variation:X(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:void 0===i||i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,q(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:void 0===r||r,roundOffsets:a})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,q(Object.assign({},s,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},k,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.name,i=e.options.offset,r=void 0===i?[0,0]:i,o=y.reduce(function(e,n){var i,o,a,s,u,h;return e[n]=(i=t.rects,a=0>[c,"top"].indexOf(o=P(n))?1:-1,u=(s="function"==typeof r?r(Object.assign({},i,{placement:n})):r)[0],h=s[1],u=u||0,h=(h||0)*a,0>[c,l].indexOf(o)?{x:u,y:h}:{x:h,y:u}),e},{}),a=o[t.placement],s=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=a.x,t.modifiersData.popperOffsets.y+=s),t.modifiersData[n]=o}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,p=n.fallbackPlacements,v=n.padding,m=n.boundary,b=n.rootBoundary,D=n.altBoundary,w=n.flipVariations,E=void 0===w||w,x=n.allowedAutoPlacements,k=t.options.placement,M=P(k),L=p||(M!==k&&E?function(e){if(P(e)===h)return[];var t=$(e);return[K(e),t,K(t)]}(k):[$(k)]),A=[k].concat(L).reduce(function(e,n){var i,r,o,a,s,u,l,c,f,p,D;return e.concat(P(n)===h?(r=(i={placement:n,boundary:m,rootBoundary:b,padding:v,flipVariations:E,allowedAutoPlacements:x}).boundary,o=i.rootBoundary,a=i.padding,s=i.flipVariations,l=void 0===(u=i.allowedAutoPlacements)?y:u,0===(p=(f=(c=X(i.placement))?s?g:g.filter(function(e){return X(e)===c}):d).filter(function(e){return l.indexOf(e)>=0})).length&&(p=f),Object.keys(D=p.reduce(function(e,n){return e[n]=er(t,{placement:n,boundary:r,rootBoundary:o,padding:a})[P(n)],e},{})).sort(function(e,t){return D[e]-D[t]})):n)},[]),O=t.rects.reference,C=t.rects.popper,_=new Map,R=!0,S=A[0],j=0;A.length>j;j++){var T=A[j],H=P(T),B=X(T)===f,F=["top",u].indexOf(H)>=0,N=F?"width":"height",U=er(t,{placement:T,boundary:m,rootBoundary:b,altBoundary:D,padding:v}),I=F?B?l:c:B?u:"top";O[N]>C[N]&&(I=$(I));var Y=$(I),z=[];if(o&&z.push(0>=U[H]),s&&z.push(0>=U[I],0>=U[Y]),z.every(function(e){return e})){S=T,R=!1;break}_.set(T,z)}if(R)for(var q=function(e){var t=A.find(function(t){var n=_.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return S=t,"break"},V=E?3:1;V>0&&"break"!==q(V);V--);t.placement!==S&&(t.modifiersData[i]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=n.altAxis,a=n.tether,s=void 0===a||a,h=n.tetherOffset,d=void 0===h?0:h,p=er(t,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),v=P(t.placement),g=X(t.placement),y=!g,m=N(v),b="x"===m?"y":"x",D=t.modifiersData.popperOffsets,w=t.rects.reference,E=t.rects.popper,x="function"==typeof d?d(Object.assign({},t.rects,{placement:t.placement})):d,k="number"==typeof x?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(D){if(void 0===r||r){var C,_="y"===m?"top":c,S="y"===m?u:l,j="y"===m?"height":"width",T=D[m],H=T+p[_],B=T-p[S],I=s?-E[j]/2:0,Y=g===f?w[j]:E[j],z=g===f?-E[j]:-w[j],q=t.elements.arrow,V=s&&q?R(q):{width:0,height:0},W=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},$=W[_],G=W[S],K=U(0,w[j],V[j]),J=y?w[j]/2-I-K-$-k.mainAxis:Y-K-$-k.mainAxis,Z=y?-w[j]/2+I+K+G+k.mainAxis:z+K+G+k.mainAxis,Q=t.elements.arrow&&F(t.elements.arrow),ee=null!=(C=null==A?void 0:A[m])?C:0,et=U(s?L(H,T+J-ee-(Q?"y"===m?Q.clientTop||0:Q.clientLeft||0:0)):H,T,s?M(B,T+Z-ee):B);D[m]=et,O[m]=et-T}if(void 0!==o&&o){var en,ei,eo=D[b],ea="y"===b?"height":"width",es=eo+p["x"===m?"top":c],eu=eo-p["x"===m?u:l],el=-1!==["top",c].indexOf(v),ec=null!=(ei=null==A?void 0:A[b])?ei:0,eh=el?es:eo-w[ea]-E[ea]-ec+k.altAxis,ed=el?eo+w[ea]+E[ea]-ec-k.altAxis:eu,ef=s&&el?(en=U(eh,eo,ed))>ed?ed:en:U(s?eh:es,eo,s?ed:eu);D[b]=ef,O[b]=ef-eo}t.modifiersData[i]=O}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=P(n.placement),h=N(s),f=[c,l].indexOf(s)>=0?"height":"width";if(o&&a){var p,v=I("number"!=typeof(p="function"==typeof(p=r.padding)?p(Object.assign({},n.rects,{placement:n.placement})):p)?p:Y(p,d)),g=R(o),y="y"===h?"top":c,m="y"===h?u:l,b=n.rects.reference[f]+n.rects.reference[h]-a[h]-n.rects.popper[f],D=a[h]-n.rects.reference[h],w=F(o),E=w?"y"===h?w.clientHeight||0:w.clientWidth||0:0,x=E/2-g[f]/2+(b/2-D/2),k=U(v[y],x,E-g[f]-v[m]);n.modifiersData[i]=((t={})[h]=k,t.centerOffset=k-x,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&S(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,a=er(t,{elementContext:"reference"}),s=er(t,{altBoundary:!0}),u=eo(a,i),l=eo(s,r,o),c=ea(u),h=ea(l);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}}]}).defaultModifiers)?[]:e0,e3=void 0===(e2=eQ.defaultOptions)?es:e2,function(e,t,n){void 0===n&&(n=e3);var i,r={placement:"bottom",orderedModifiers:[],options:Object.assign({},es,e3),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],a=!1,s={state:r,setOptions:function(n){var i="function"==typeof n?n(r.options):n;u(),r.options=Object.assign({},e3,r.options,i),r.scrollParents={reference:w(e)?ee(e):e.contextElement?ee(e.contextElement):[],popper:ee(t)};var a,l,c,h,d,f=(a=Object.keys(d=[].concat(e1,r.options.modifiers).reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{})).map(function(e){return d[e]}),l=new Map,c=new Set,h=[],a.forEach(function(e){l.set(e.name,e)}),a.forEach(function(e){c.has(e.name)||function e(t){c.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!c.has(t)){var n=l.get(t);n&&e(n)}}),h.push(t)}(e)}),m.reduce(function(e,t){return e.concat(h.filter(function(e){return e.phase===t}))},[]));return r.orderedModifiers=f.filter(function(e){return e.enabled}),r.orderedModifiers.forEach(function(e){var t=e.options,n=e.effect;if("function"==typeof n){var i=n({state:r,name:e.name,instance:s,options:void 0===t?{}:t});o.push(i||function(){})}}),s.update()},forceUpdate:function(){if(!a){var e=r.elements,t=e.reference,n=e.popper;if(eu(t,n)){r.rects={reference:(i=F(n),o="fixed"===r.options.strategy,h=E(i),d=E(i)&&(l=A((u=i.getBoundingClientRect()).width)/i.offsetWidth||1,c=A(u.height)/i.offsetHeight||1,1!==l||1!==c),f=T(i),p=_(t,d,o),v={scrollLeft:0,scrollTop:0},g={x:0,y:0},(h||!h&&!o)&&(("body"!==b(i)||Q(f))&&(v=i!==D(i)&&E(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:J(i)),E(i)?((g=_(i,!0)).x+=i.clientLeft,g.y+=i.clientTop):f&&(g.x=Z(f))),{x:p.left+v.scrollLeft-g.x,y:p.top+v.scrollTop-g.y,width:p.width,height:p.height}),popper:R(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(e){return r.modifiersData[e.name]=Object.assign({},e.data)});for(var i,o,u,l,c,h,d,f,p,v,g,y=0;r.orderedModifiers.length>y;y++)if(!0!==r.reset){var m=r.orderedModifiers[y],w=m.fn,x=m.options;"function"==typeof w&&(r=w({state:r,options:void 0===x?{}:x,name:m.name,instance:s})||r)}else r.reset=!1,y=-1}}},update:function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(new Promise(function(e){s.forceUpdate(),e(r)}))})})),i},destroy:function(){u(),a=!0}};if(!eu(e,t))return s;function u(){o.forEach(function(e){return e()}),o=[]}return s.setOptions(n).then(function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)}),s}),ec="tippy-content",eh="tippy-arrow",ed="tippy-svg-arrow",ef={passive:!0,capture:!0},ep=function(){return document.body};function ev(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?Array.isArray(n)?n[t]:n:i}return e}function eg(e,t){var n=({}).toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function ey(e,t){return"function"==typeof e?e.apply(void 0,t):e}function em(e,t){var n;return 0===t?e:function(i){clearTimeout(n),n=setTimeout(function(){e(i)},t)}}function eb(e){return[].concat(e)}function eD(e,t){-1===e.indexOf(t)&&e.push(t)}function ew(e){return[].slice.call(e)}function eE(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function ex(){return document.createElement("div")}function ek(e){return["Element","Fragment"].some(function(t){return eg(e,t)})}function eP(e){return eg(e,"MouseEvent")}function eM(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function eL(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function eA(e){var t,n=eb(e)[0];return null!=n&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function eO(e,t,n){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[i](t,n)})}function eC(e,t){for(var n,i=t;i;){if(e.contains(i))return!0;i=null==i.getRootNode||null==(n=i.getRootNode())?void 0:n.host}return!1}var e_={isTouch:!1},eR=0;function eS(){e_.isTouch||(e_.isTouch=!0,window.performance&&document.addEventListener("mousemove",ej))}function ej(){var e=performance.now();20>e-eR&&(e_.isTouch=!1,document.removeEventListener("mousemove",ej)),eR=e}function eT(){var e=document.activeElement;e&&e._tippy&&e._tippy.reference===e&&e.blur&&!e._tippy.state.isVisible&&e.blur()}var eH=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto,eB=Object.assign({appendTo:ep,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),eF=Object.keys(eB);function eN(e){var t=(e.plugins||[]).reduce(function(t,n){var i,r=n.name;return r&&(t[r]=void 0!==e[r]?e[r]:null!=(i=eB[r])?i:n.defaultValue),t},{});return Object.assign({},e,t)}function eU(e,t){var n,i=Object.assign({},t,{content:ey(t.content,[e])},t.ignoreAttributes?{}:((n=t.plugins)?Object.keys(eN(Object.assign({},eB,{plugins:n}))):eF).reduce(function(t,n){var i=(e.getAttribute("data-tippy-"+n)||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t},{}));return i.aria=Object.assign({},eB.aria,i.aria),i.aria={expanded:"auto"===i.aria.expanded?t.interactive:i.aria.expanded,content:"auto"===i.aria.content?t.interactive?null:"describedby":i.aria.content},i}function eI(e,t){e.innerHTML=t}function eY(e){var t=ex();return!0===e?t.className=eh:(t.className=ed,ek(e)?t.appendChild(e):eI(t,e)),t}function eX(e,t){ek(t.content)?(eI(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?eI(e,t.content):e.textContent=t.content)}function ez(e){var t=e.firstElementChild,n=ew(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(ec)}),arrow:n.find(function(e){return e.classList.contains(eh)||e.classList.contains(ed)}),backdrop:n.find(function(e){return e.classList.contains("tippy-backdrop")})}}function eq(e){var t=ex(),n=ex();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=ex();function r(n,i){var r=ez(t),o=r.box,a=r.content,s=r.arrow;i.theme?o.setAttribute("data-theme",i.theme):o.removeAttribute("data-theme"),"string"==typeof i.animation?o.setAttribute("data-animation",i.animation):o.removeAttribute("data-animation"),i.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?o.setAttribute("role",i.role):o.removeAttribute("role"),n.content===i.content&&n.allowHTML===i.allowHTML||eX(a,e.props),i.arrow?s?n.arrow!==i.arrow&&(o.removeChild(s),o.appendChild(eY(i.arrow))):o.appendChild(eY(i.arrow)):s&&o.removeChild(s)}return i.className=ec,i.setAttribute("data-state","hidden"),eX(i,e.props),t.appendChild(n),n.appendChild(i),r(e.props,e.props),{popper:t,onUpdate:r}}eq.$$tippy=!0;var eV=1,eW=[],e$=[];function eG(e,t){void 0===t&&(t={});var n=eB.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",eS,ef),window.addEventListener("blur",eT);var i=Object.assign({},t,{plugins:n}),r=(ek(e)?[e]:eg(e,"NodeList")?ew(e):Array.isArray(e)?e:ew(document.querySelectorAll(e))).reduce(function(e,t){var n=t&&function(e,t){var n,i,r,o,a,s,u,l,c=eU(e,Object.assign({},eB,eN(eE(t)))),h=!1,d=!1,f=!1,p=!1,v=[],g=em(q,c.interactiveDebounce),y=eV++,m=(l=c.plugins).filter(function(e,t){return l.indexOf(e)===t}),b={id:y,reference:e,popper:ex(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:m,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(r)},setProps:function(t){if(!b.state.isDestroyed){_("onBeforeUpdate",[b,t]),X();var n=b.props,i=eU(e,Object.assign({},n,eE(t),{ignoreAttributes:!0}));b.props=i,Y(),n.interactiveDebounce!==i.interactiveDebounce&&(j(),g=em(q,i.interactiveDebounce)),n.triggerTarget&&!i.triggerTarget?eb(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):i.triggerTarget&&e.removeAttribute("aria-expanded"),S(),C(),E&&E(n,i),b.popperInstance&&(G(),J().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),_("onAfterUpdate",[b,t])}},setContent:function(e){b.setProps({content:e})},show:function(){var t=b.state.isVisible,n=b.state.isDestroyed,i=!b.state.isEnabled,r=e_.isTouch&&!b.props.touch,o=ev(b.props.duration,0,eB.duration);if(!(t||n||i||r||(u||e).hasAttribute("disabled"))&&(_("onShow",[b],!1),!1!==b.props.onShow(b))){if(b.state.isVisible=!0,L()&&(w.style.visibility="visible"),C(),F(),b.state.isMounted||(w.style.transition="none"),L()){var a,l,c,h=ez(w);eM([h.box,h.content],0)}s=function(){var e;if(b.state.isVisible&&!p){if(p=!0,w.style.transition=b.props.moveTransition,L()&&b.props.animation){var t=ez(w),n=t.box,i=t.content;eM([n,i],o),eL([n,i],"visible")}R(),S(),eD(e$,b),null==(e=b.popperInstance)||e.forceUpdate(),_("onMount",[b]),b.props.animation&&L()&&U(o,function(){b.state.isShown=!0,_("onShown",[b])})}},l=b.props.appendTo,c=u||e,(a=b.props.interactive&&l===ep||"parent"===l?c.parentNode:ey(l,[c])).contains(w)||a.appendChild(w),b.state.isMounted=!0,G()}},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,i=ev(b.props.duration,1,eB.duration);if(!e&&!t&&!n&&(_("onHide",[b],!1),!1!==b.props.onHide(b))){if(b.state.isVisible=!1,b.state.isShown=!1,p=!1,h=!1,L()&&(w.style.visibility="hidden"),j(),N(),C(!0),L()){var r,o=ez(w),a=o.box,s=o.content;b.props.animation&&(eM([a,s],i),eL([a,s],"hidden"))}R(),S(),b.props.animation?L()&&(r=b.unmount,U(i,function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&r()})):b.unmount()}},hideWithInteractivity:function(e){A().addEventListener("mousemove",g),eD(eW,g),g(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide(),b.state.isMounted&&(K(),J().forEach(function(e){e._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),e$=e$.filter(function(e){return e!==b}),b.state.isMounted=!1,_("onHidden",[b]))},destroy:function(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),X(),delete e._tippy,b.state.isDestroyed=!0,_("onDestroy",[b]))}};if(!c.render)return b;var D=c.render(b),w=D.popper,E=D.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,e._tippy=b,w._tippy=b;var x=m.map(function(e){return e.fn(b)}),k=e.hasAttribute("aria-expanded");return Y(),S(),C(),_("onCreate",[b]),c.showOnCreate&&Z(),w.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&A().addEventListener("mousemove",g)}),b;function P(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function M(){return"hold"===P()[0]}function L(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function A(){var t=(u||e).parentNode;return t?eA(t):document}function O(e){return b.state.isMounted&&!b.state.isVisible||e_.isTouch||o&&"focus"===o.type?0:ev(b.props.delay,e?0:1,eB.delay)}function C(e){void 0===e&&(e=!1),w.style.pointerEvents=b.props.interactive&&!e?"":"none",w.style.zIndex=""+b.props.zIndex}function _(e,t,n){var i;void 0===n&&(n=!0),x.forEach(function(n){n[e]&&n[e].apply(n,t)}),n&&(i=b.props)[e].apply(i,t)}function R(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,i=w.id;eb(b.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+i:i);else{var r=t&&t.replace(i,"").trim();r?e.setAttribute(n,r):e.removeAttribute(n)}})}}function S(){!k&&b.props.aria.expanded&&eb(b.props.triggerTarget||e).forEach(function(t){b.props.interactive?t.setAttribute("aria-expanded",b.state.isVisible&&t===(u||e)?"true":"false"):t.removeAttribute("aria-expanded")})}function j(){A().removeEventListener("mousemove",g),eW=eW.filter(function(e){return e!==g})}function T(t){if(!e_.isTouch||!f&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!eC(w,n)){if(eb(b.props.triggerTarget||e).some(function(e){return eC(e,n)})){if(e_.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else _("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),d=!0,setTimeout(function(){d=!1}),b.state.isMounted||N())}}}function H(){f=!0}function B(){f=!1}function F(){var e=A();e.addEventListener("mousedown",T,!0),e.addEventListener("touchend",T,ef),e.addEventListener("touchstart",B,ef),e.addEventListener("touchmove",H,ef)}function N(){var e=A();e.removeEventListener("mousedown",T,!0),e.removeEventListener("touchend",T,ef),e.removeEventListener("touchstart",B,ef),e.removeEventListener("touchmove",H,ef)}function U(e,t){var n=ez(w).box;function i(e){e.target===n&&(eO(n,"remove",i),t())}if(0===e)return t();eO(n,"remove",a),eO(n,"add",i),a=i}function I(t,n,i){void 0===i&&(i=!1),eb(b.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,i),v.push({node:e,eventType:t,handler:n,options:i})})}function Y(){M()&&(I("touchstart",z,{passive:!0}),I("touchend",V,{passive:!0})),b.props.trigger.split(/\s+/).filter(Boolean).forEach(function(e){if("manual"!==e)switch(I(e,z),e){case"mouseenter":I("mouseleave",V);break;case"focus":I(eH?"focusout":"blur",W);break;case"focusin":I("focusout",W)}})}function X(){v.forEach(function(e){e.node.removeEventListener(e.eventType,e.handler,e.options)}),v=[]}function z(e){var t,n=!1;if(b.state.isEnabled&&!$(e)&&!d){var i="focus"===(null==(t=o)?void 0:t.type);o=e,u=e.currentTarget,S(),!b.state.isVisible&&eP(e)&&eW.forEach(function(t){return t(e)}),"click"===e.type&&(0>b.props.trigger.indexOf("mouseenter")||h)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:Z(e),"click"===e.type&&(h=!n),n&&!i&&Q(e)}}function q(t){var n,i,r,o=t.target,a=(u||e).contains(o)||w.contains(o);("mousemove"!==t.type||!a)&&(n=J().concat(w).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:c}:null}).filter(Boolean),i=t.clientX,r=t.clientY,n.every(function(e){var t=e.popperRect,n=e.popperState,o=e.props.interactiveBorder,a=n.placement.split("-")[0],s=n.modifiersData.offset;return!s||t.top-r+("bottom"===a?s.top.y:0)>o||r-t.bottom-("top"===a?s.bottom.y:0)>o||t.left-i+("right"===a?s.left.x:0)>o||i-t.right-("left"===a?s.right.x:0)>o})&&(j(),Q(t)))}function V(e){$(e)||b.props.trigger.indexOf("click")>=0&&h||(b.props.interactive?b.hideWithInteractivity(e):Q(e))}function W(t){0>b.props.trigger.indexOf("focusin")&&t.target!==(u||e)||b.props.interactive&&t.relatedTarget&&w.contains(t.relatedTarget)||Q(t)}function $(e){return!!e_.isTouch&&M()!==e.type.indexOf("touch")>=0}function G(){K();var t=b.props,n=t.popperOptions,i=t.placement,r=t.offset,o=t.getReferenceClientRect,a=t.moveTransition,l=L()?ez(w).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||u||e}:e,h=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(L()){var n=ez(w).box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];L()&&l&&h.push({name:"arrow",options:{element:l,padding:3}}),h.push.apply(h,(null==n?void 0:n.modifiers)||[]),b.popperInstance=el(c,w,Object.assign({},n,{placement:i,onFirstUpdate:s,modifiers:h}))}function K(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function J(){return ew(w.querySelectorAll("[data-tippy-root]"))}function Z(e){b.clearDelayTimeouts(),e&&_("onTrigger",[b,e]),F();var t=O(!0),i=P(),r=i[1];e_.isTouch&&"hold"===i[0]&&r&&(t=r),t?n=setTimeout(function(){b.show()},t):b.show()}function Q(e){if(b.clearDelayTimeouts(),_("onUntrigger",[b,e]),b.state.isVisible){if(0>b.props.trigger.indexOf("mouseenter")||0>b.props.trigger.indexOf("click")||0>["mouseleave","mousemove"].indexOf(e.type)||!h){var t=O(!1);t?i=setTimeout(function(){b.state.isVisible&&b.hide()},t):r=requestAnimationFrame(function(){b.hide()})}}else N()}}(t,i);return n&&e.push(n),e},[]);return ek(e)?r[0]:r}eG.defaultProps=eB,eG.setDefaultProps=function(e){Object.keys(e).forEach(function(t){eB[t]=e[t]})},eG.currentInput=e_,Object.assign({},k,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});var eK={clientX:0,clientY:0},eJ=[];function eZ(e){eK={clientX:e.clientX,clientY:e.clientY}}eG.setDefaultProps({render:eq});var eQ,e0,e1,e2,e3,e6,e4,e9,e8,e5,e7,te={showTotalDistance:!1,showDashDistance:!0,showWhen:["normal","active"],format:function(e){return 1e3>e?+e.toFixed(2)+"m":+(e/1e3).toFixed(2)+"km"}},tt={showWhen:["normal","active"],format:function(e){return e>1e6?"".concat(+(e/1e6).toFixed(2),"km\xb2"):"".concat(+e.toFixed(2),"m\xb2")}},tn={maxSize:100},ti={remove:["del","backspace"],revert:["command+z","ctrl+z"],redo:["command+shift+z","ctrl+shift+z"]},tr={allowHTML:!0,followCursor:!0,placement:"bottom-start",offset:[-10,20],plugins:[{name:"followCursor",defaultValue:!1,fn:function(e){var t=e.reference,n=eA(e.props.triggerTarget||t),i=!1,r=!1,o=!0,a=e.props;function s(){return"initial"===e.props.followCursor&&e.state.isVisible}function u(){n.addEventListener("mousemove",h)}function l(){n.removeEventListener("mousemove",h)}function c(){i=!0,e.setProps({getReferenceClientRect:null}),i=!1}function h(n){var i=!n.target||t.contains(n.target),r=e.props.followCursor,o=n.clientX,a=n.clientY,s=t.getBoundingClientRect(),u=o-s.left,l=a-s.top;!i&&e.props.interactive||e.setProps({getReferenceClientRect:function(){var e=t.getBoundingClientRect(),n=o,i=a;"initial"===r&&(n=e.left+u,i=e.top+l);var s="horizontal"===r?e.top:i,c="vertical"===r?e.right:n,h="horizontal"===r?e.bottom:i,d="vertical"===r?e.left:n;return{width:c-d,height:h-s,top:s,right:c,bottom:h,left:d}}})}function d(){e.props.followCursor&&(eJ.push({instance:e,doc:n}),function(e){e.addEventListener("mousemove",eZ)}(n))}function f(){0===(eJ=eJ.filter(function(t){return t.instance!==e})).filter(function(e){return e.doc===n}).length&&function(e){e.removeEventListener("mousemove",eZ)}(n)}return{onCreate:d,onDestroy:f,onBeforeUpdate:function(){a=e.props},onAfterUpdate:function(t,n){var o=n.followCursor;i||void 0!==o&&a.followCursor!==o&&(f(),o?(d(),!e.state.isMounted||r||s()||u()):(l(),c()))},onMount:function(){e.props.followCursor&&!r&&(o&&(h(eK),o=!1),s()||u())},onTrigger:function(e,t){eP(t)&&(eK={clientX:t.clientX,clientY:t.clientY}),r="focus"===t.type},onHidden:function(){e.props.followCursor&&(c(),l(),o=!0)}}}}],trigger:"manual",hideOnClick:!1,theme:"light"},to={data:"drawData",pointAdsorbPixel:12,lineAdsorbPixel:10};function ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ts(e){for(var t=1;arguments.length>t;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(n),!0).forEach(function(t){td(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ta(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tu(e){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tl(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function tc(e,t){for(var n=0;t.length>n;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,tx(i.key),i)}}function th(e,t,n){return t&&tc(e.prototype,t),n&&tc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function td(e,t,n){return(t=tx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tf(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tv(e,t)}function tp(e){return(tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tv(e,t){return(tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tg(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ty(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=tp(e);if(t){var r=tp(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tg(e)}(this,n)}}function tm(){return(tm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tp(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(3>arguments.length?e:n):r.value}}).apply(this,arguments)}function tb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);u=!0);}catch(e){l=!0,r=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return s}}(e,t)||tw(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tD(e){return function(e){if(Array.isArray(e))return tE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tw(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tw(e,t){if(e){if("string"==typeof e)return tE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tE(e,t):void 0}}function tE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);t>n;n++)i[n]=e[n];return i}function tx(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(e6=e.DrawEvent||(e.DrawEvent={})).Init="init",e6.Destroy="destroy",e6.Enable="enable",e6.Disable="disable",e6.Add="add",e6.Edit="edit",e6.Remove="remove",e6.Clear="clear",e6.Change="change",e6.DragStart="dragStart",e6.Dragging="dragging",e6.DragEnd="dragEnd",e6.Select="select",e6.AddNode="addNode",e6.RemoveNode="removeNode",(e4=e.SourceEvent||(e.SourceEvent={})).Change="change",e4.Update="update",(e9=e.RenderEvent||(e.RenderEvent={})).Click="click",e9.UnClick="unclick",e9.Dragstart="dragstart",e9.Mousemove="mousemove",e9.Mouseout="mouseout",e9.Dragging="dragging",e9.Dragend="dragend",e9.DblClick="dblClick",e9.Contextmenu="contextmenu",(e8=e.LayerEvent||(e.LayerEvent={})).Mousedown="mousedown",e8.Mouseup="mouseup",e8.Click="click",e8.UnClick="unclick",e8.Dblclick="dblclick",e8.Mousemove="mousemove",e8.Mouseover="mouseover",e8.Mouseenter="mouseenter",e8.Mouseleave="mouseleave",e8.Mouseout="mouseout",e8.Contextmenu="contextmenu",(e5=e.SceneEvent||(e.SceneEvent={})).Loaded="loaded",e5.MapMove="mapmove",e5.MoveStart="movestart",e5.MoveEnd="moveend",e5.ZoomChange="zoomchange",e5.ZoomStart="zoomstart",e5.ZoomEnd="zoomend",e5.Click="click",e5.Dblclick="dblclick",e5.Mousemove="mousemove",e5.Mousewheel="mousewheel",e5.Mouseover="mouseover",e5.Mouseout="mouseout",e5.Mouseup="mouseup",e5.Mousedown="mousedown",e5.Contextmenu="contextmenu",e5.Dragstart="dragstart",e5.Dragging="dragging",e5.Dragend="dragend",(e7=e.ControlEvent||(e.ControlEvent={})).DrawChange="drawchange",e7.DataChange="datachange",e7.DrawSelect="drawselect",e7.DrawClear="drawclear";var tk={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:6371008.8,metres:6371008.8,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:6371008.8/1852,radians:1,yards:6967335.223679999},tP={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function tM(e,t,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function tL(e,t,n){if(void 0===n&&(n={}),!e)throw Error("coordinates is required");if(!Array.isArray(e))throw Error("coordinates must be an Array");if(2>e.length)throw Error("coordinates must be at least 2 numbers long");if(!tF(e[0])||!tF(e[1]))throw Error("coordinates must contain numbers");return tM({type:"Point",coordinates:e},t,n)}function tA(e,t,n){void 0===n&&(n={});for(var i=0;e.length>i;i++){var r=e[i];if(4>r.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;r[r.length-1].length>o;o++)if(r[r.length-1][o]!==r[0][o])throw Error("First and last Position are not equivalent.")}return tM({type:"Polygon",coordinates:e},t,n)}function tO(e,t,n){if(void 0===n&&(n={}),2>e.length)throw Error("coordinates must be an array of two or more positions");return tM({type:"LineString",coordinates:e},t,n)}function tC(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function t_(e,t,n){return void 0===n&&(n={}),tM({type:"MultiLineString",coordinates:e},t,n)}function tR(e,t,n){return void 0===n&&(n={}),tM({type:"MultiPoint",coordinates:e},t,n)}function tS(e,t,n){return void 0===n&&(n={}),tM({type:"MultiPolygon",coordinates:e},t,n)}function tj(e,t){void 0===t&&(t="kilometers");var n=tk[t];if(!n)throw Error(t+" units is invalid");return e*n}function tT(e,t){void 0===t&&(t="kilometers");var n=tk[t];if(!n)throw Error(t+" units is invalid");return e/n}function tH(e){return e%(2*Math.PI)*180/Math.PI}function tB(e){return e%360*Math.PI/180}function tF(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function tN(e){return!!e&&e.constructor===Object}var tU=Object.freeze({__proto__:null,earthRadius:6371008.8,factors:tk,unitsFactors:{centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:15696101377226164e-23,yards:1.0936133},areaFactors:tP,feature:tM,geometry:function(e,t,n){switch(e){case"Point":return tL(t).geometry;case"LineString":return tO(t).geometry;case"Polygon":return tA(t).geometry;case"MultiPoint":return tR(t).geometry;case"MultiLineString":return t_(t).geometry;case"MultiPolygon":return tS(t).geometry;default:throw Error(e+" is invalid")}},point:tL,points:function(e,t,n){return void 0===n&&(n={}),tC(e.map(function(e){return tL(e,t)}),n)},polygon:tA,polygons:function(e,t,n){return void 0===n&&(n={}),tC(e.map(function(e){return tA(e,t)}),n)},lineString:tO,lineStrings:function(e,t,n){return void 0===n&&(n={}),tC(e.map(function(e){return tO(e,t)}),n)},featureCollection:tC,multiLineString:t_,multiPoint:tR,multiPolygon:tS,geometryCollection:function(e,t,n){return void 0===n&&(n={}),tM({type:"GeometryCollection",geometries:e},t,n)},round:function(e,t){if(void 0===t&&(t=0),t&&t<0)throw Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},radiansToLength:tj,lengthToRadians:tT,lengthToDegrees:function(e,t){return tH(tT(e,t))},bearingToAzimuth:function(e){var t=e%360;return 0>t&&(t+=360),t},radiansToDegrees:tH,degreesToRadians:tB,convertLength:function(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),e<0)throw Error("length must be a positive number");return tj(tT(e,t),n)},convertArea:function(e,t,n){if(void 0===t&&(t="meters"),void 0===n&&(n="kilometers"),e<0)throw Error("area must be a positive number");var i=tP[t];if(!i)throw Error("invalid original units");var r=tP[n];if(!r)throw Error("invalid final units");return e/i*r},isNumber:tF,isObject:tN,validateBBox:function(e){if(!e)throw Error("bbox is required");if(!Array.isArray(e))throw Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!tF(e))throw Error("bbox must only contain numbers")})},validateId:function(e){if(!e)throw Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw Error("id must be a number or a string")}});function tI(e,t,n){if(null!==e)for(var i,r,o,a,s,u,l,c,h=0,d=0,f=e.type,p="FeatureCollection"===f,v="Feature"===f,g=p?e.features.length:1,y=0;g>y;y++){s=(c=!!(l=p?e.features[y].geometry:v?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;s>m;m++){var b=0,D=0;if(null!==(a=c?l.geometries[m]:l)){u=a.coordinates;var w=a.type;switch(h=n&&("Polygon"===w||"MultiPolygon"===w)?1:0,w){case null:break;case"Point":if(!1===t(u,d,y,b,D))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(i=0;u.length>i;i++){if(!1===t(u[i],d,y,b,D))return!1;d++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;u.length>i;i++){for(r=0;u[i].length-h>r;r++){if(!1===t(u[i][r],d,y,b,D))return!1;d++}"MultiLineString"===w&&b++,"Polygon"===w&&D++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;u.length>i;i++){for(D=0,r=0;u[i].length>r;r++){for(o=0;u[i][r].length-h>o;o++){if(!1===t(u[i][r][o],d,y,b,D))return!1;d++}D++}b++}break;case"GeometryCollection":for(i=0;a.geometries.length>i;i++)if(!1===tI(a.geometries[i],t,n))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function tY(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;e.features.length>n&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function tX(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;e.features.length>n&&!1!==t(e.features[n],n);n++);}function tz(e){var t=[];return tI(e,function(e){t.push(e)}),t}function tq(e,t){var n,i,r,o,a,s,u,l,c,h,d=0,f="FeatureCollection"===e.type,p="Feature"===e.type,v=f?e.features.length:1;for(n=0;v>n;n++){for(l=f?e.features[n].properties:p?e.properties:{},c=f?e.features[n].bbox:p?e.bbox:void 0,h=f?e.features[n].id:p?e.id:void 0,a=(u=!!(s=f?e.features[n].geometry:p?e.geometry:e)&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;a>r;r++)if(null!==(o=u?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,d,l,c,h))return!1;break;case"GeometryCollection":for(i=0;o.geometries.length>i;i++)if(!1===t(o.geometries[i],d,l,c,h))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===t(null,d,l,c,h))return!1;d++}}function tV(e,t,n){var i=n;return tq(e,function(e,r,o,a,s){i=0===r&&void 0===n?e:t(i,e,r,o,a,s)}),i}function tW(e,t){tq(e,function(e,n,i,r,o){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(tM(e,i,{bbox:r,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;e.coordinates.length>u;u++)if(!1===t(tM({type:a,coordinates:e.coordinates[u]},i),n,u))return!1})}function t$(e,t){tW(e,function(e,n,i){var r=0;if(e.geometry){var o=e.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,u=0,l=0;return!1!==tI(e,function(o,c,h,d,f){return void 0===a||n>s||d>u||f>l?(a=o,s=n,u=d,l=f,void(r=0)):!1!==t(tO([a,o],e.properties),n,i,f,r)&&void(r++,a=o)})&&void 0}}})}function tG(e,t,n){var i=n,r=!1;return t$(e,function(e,o,a,s,u){i=!1===r&&void 0===n?e:t(i,e,o,a,s,u),r=!0}),i}function tK(e,t){if(!e)throw Error("geojson is required");tW(e,function(e,n,i){if(null!==e.geometry){var r=e.geometry.coordinates;switch(e.geometry.type){case"LineString":if(!1===t(e,n,i,0,0))return!1;break;case"Polygon":for(var o=0;r.length>o;o++)if(!1===t(tO(r[o],e.properties),n,i,o))return!1}}})}var tJ=Object.freeze({__proto__:null,coordAll:tz,coordEach:tI,coordReduce:function(e,t,n,i){var r=n;return tI(e,function(e,i,o,a,s){r=0===i&&void 0===n?e:t(r,e,i,o,a,s)},i),r},featureEach:tX,featureReduce:function(e,t,n){var i=n;return tX(e,function(e,r){i=0===r&&void 0===n?e:t(i,e,r)}),i},findPoint:function(e,t){if(!tN(t=t||{}))throw Error("options is invalid");var n,i=t.featureIndex||0,r=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":0>i&&(i=e.features.length+i),s=s||e.features[i].properties,n=e.features[i].geometry;break;case"Feature":s=s||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return tL(u,s,t);case"MultiPoint":return 0>r&&(r=u.length+r),tL(u[r],s,t);case"LineString":return 0>a&&(a=u.length+a),tL(u[a],s,t);case"Polygon":return 0>o&&(o=u.length+o),0>a&&(a=u[o].length+a),tL(u[o][a],s,t);case"MultiLineString":return 0>r&&(r=u.length+r),0>a&&(a=u[r].length+a),tL(u[r][a],s,t);case"MultiPolygon":return 0>r&&(r=u.length+r),0>o&&(o=u[r].length+o),0>a&&(a=u[r][o].length-a),tL(u[r][o][a],s,t)}throw Error("geojson is invalid")},findSegment:function(e,t){if(!tN(t=t||{}))throw Error("options is invalid");var n,i=t.featureIndex||0,r=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":0>i&&(i=e.features.length+i),s=s||e.features[i].properties,n=e.features[i].geometry;break;case"Feature":s=s||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return 0>a&&(a=u.length+a-1),tO([u[a],u[a+1]],s,t);case"Polygon":return 0>o&&(o=u.length+o),0>a&&(a=u[o].length+a-1),tO([u[o][a],u[o][a+1]],s,t);case"MultiLineString":return 0>r&&(r=u.length+r),0>a&&(a=u[r].length+a-1),tO([u[r][a],u[r][a+1]],s,t);case"MultiPolygon":return 0>r&&(r=u.length+r),0>o&&(o=u[r].length+o),0>a&&(a=u[r][o].length-a-1),tO([u[r][o][a],u[r][o][a+1]],s,t)}throw Error("geojson is invalid")},flattenEach:tW,flattenReduce:function(e,t,n){var i=n;return tW(e,function(e,r,o){i=0===r&&0===o&&void 0===n?e:t(i,e,r,o)}),i},geomEach:tq,geomReduce:tV,lineEach:tK,lineReduce:function(e,t,n){var i=n;return tK(e,function(e,r,o,a){i=0===r&&void 0===n?e:t(i,e,r,o,a)}),i},propEach:tY,propReduce:function(e,t,n){var i=n;return tY(e,function(e,r){i=0===r&&void 0===n?e:t(i,e,r)}),i},segmentEach:t$,segmentReduce:tG});function tZ(e){var t=[1/0,1/0,-1/0,-1/0];return tI(e,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),e[0]>t[2]&&(t[2]=e[0]),e[1]>t[3]&&(t[3]=e[1])}),t}tZ.default=tZ;var tQ=Object.freeze({__proto__:null,default:tZ});function t0(e){if(!e)throw Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw Error("coord must be GeoJSON Point or an Array of numbers")}function t1(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function t2(e){return"Feature"===e.type?e.geometry:e}function t3(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}function t6(e,t,n,i,r){!function e(t,n,i,r,o){for(;r>i;){if(r-i>600){var a=r-i+1,s=n-i+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(0>s-a/2?-1:1);e(t,n,Math.max(i,Math.floor(n-s*l/a+c)),Math.min(r,Math.floor(n+(a-s)*l/a+c)),o)}var h=t[n],d=i,f=r;for(t4(t,i,n),o(t[r],h)>0&&t4(t,i,r);f>d;){for(t4(t,d,f),d++,f--;0>o(t[d],h);)d++;for(;o(t[f],h)>0;)f--}0===o(t[i],h)?t4(t,i,f):t4(t,++f,r),f>n||(i=f+1),n>f||(r=f-1)}}(e,t,n||0,i||e.length-1,r||t9)}function t4(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function t9(e,t){return t>e?-1:e>t?1:0}function t8(e,t){t5(e,0,e.children.length,t,e)}function t5(e,t,n,i,r){r||(r=na(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=t;n>o;o++){let t=e.children[o];t7(r,e.leaf?i(t):t)}return r}function t7(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function ne(e,t){return e.minX-t.minX}function nt(e,t){return e.minY-t.minY}function nn(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ni(e){return e.maxX-e.minX+(e.maxY-e.minY)}function nr(e,t){return!(e.minX>t.minX||e.minY>t.minY||t.maxX>e.maxX||t.maxY>e.maxY)}function no(e,t){return!(t.minX>e.maxX||t.minY>e.maxY||e.minX>t.maxX||e.minY>t.maxY)}function na(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ns(e,t,n,i,r){let o=[t,n];for(;o.length;){if(i>=(n=o.pop())-(t=o.pop()))continue;let a=t+Math.ceil((n-t)/i/2)*i;t6(e,a,t,n,r),o.push(t,a,a,n)}}var nu=Object.freeze({__proto__:null,default:class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data,n=[];if(!no(e,t))return n;let i=this.toBBox,r=[];for(;t;){for(let o=0;t.children.length>o;o++){let a=t.children[o],s=t.leaf?i(a):a;no(e,s)&&(t.leaf?n.push(a):nr(e,s)?this._all(a,n):r.push(a))}t=r.pop()}return n}collides(e){let t=this.data;if(!no(e,t))return!1;let n=[];for(;t;){for(let i=0;t.children.length>i;i++){let r=t.children[i],o=t.leaf?this.toBBox(r):r;if(no(e,o)){if(t.leaf||nr(e,o))return!0;n.push(r)}}t=n.pop()}return!1}load(e){if(!e||!e.length)return this;if(this._minEntries>e.length){for(let t=0;e.length>t;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length){if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(t.height>this.data.height){let e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=na([]),this}remove(e,t){let n,i,r;if(!e)return this;let o=this.data,a=this.toBBox(e),s=[],u=[];for(;o||s.length;){if(o||(o=s.pop(),i=s[s.length-1],n=u.pop(),r=!0),o.leaf){let n=function(e,t,n){if(!n)return t.indexOf(e);for(let i=0;t.length>i;i++)if(n(e,t[i]))return i;return -1}(e,o.children,t);if(-1!==n)return o.children.splice(n,1),s.push(o),this._condense(s),this}r||o.leaf||!nr(o,a)?i?(n++,o=i.children[n],r=!1):o=null:(s.push(o),u.push(n),n=0,i=o,o=o.children[0])}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,i){let r=n-t+1,o,a=this._maxEntries;if(a>=r)return t8(o=na(e.slice(t,n+1)),this.toBBox),o;i||(a=Math.ceil(r/Math.pow(a,(i=Math.ceil(Math.log(r)/Math.log(a)))-1))),(o=na([])).leaf=!1,o.height=i;let s=Math.ceil(r/a),u=s*Math.ceil(Math.sqrt(a));ns(e,t,n,u,this.compareMinX);for(let r=t;n>=r;r+=u){let t=Math.min(r+u-1,n);ns(e,r,t,s,this.compareMinY);for(let n=r;t>=n;n+=s)o.children.push(this._build(e,n,Math.min(n+s-1,t),i-1))}return t8(o,this.toBBox),o}_chooseSubtree(e,t,n,i){for(;i.push(t),!t.leaf&&i.length-1!==n;){let n,i=1/0,r=1/0;for(let o=0;t.children.length>o;o++){let a=t.children[o],s=nn(a),u=(Math.max(a.maxX,e.maxX)-Math.min(a.minX,e.minX))*(Math.max(a.maxY,e.maxY)-Math.min(a.minY,e.minY))-s;r>u?(r=u,i=i>s?s:i,n=a):u===r&&i>s&&(i=s,n=a)}t=n||t.children[0]}return t}_insert(e,t,n){let i=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(i,this.data,t,r);for(o.children.push(e),t7(o,i);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(i,r,t)}_split(e,t){let n=e[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);let o=this._chooseSplitIndex(n,r,i),a=na(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,t8(n,this.toBBox),t8(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=na([e,t]),this.data.height=e.height+1,this.data.leaf=!1,t8(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let i,r=1/0,o=1/0;for(let a=t;n-t>=a;a++){let t=t5(e,0,a,this.toBBox),s=t5(e,a,n,this.toBBox),u=function(e,t){let n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-n)*Math.max(0,Math.min(e.maxY,t.maxY)-i)}(t,s),l=nn(t)+nn(s);r>u?(r=u,i=a,o=o>l?l:o):u===r&&o>l&&(o=l,i=a)}return i||n-t}_chooseSplitAxis(e,t,n){let i=e.leaf?this.compareMinX:ne,r=e.leaf?this.compareMinY:nt,o=this._allDistMargin(e,t,n,i);this._allDistMargin(e,t,n,r)>o&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);let r=this.toBBox,o=t5(e,0,t,r),a=t5(e,n-t,n,r),s=ni(o)+ni(a);for(let i=t;n-t>i;i++){let t=e.children[i];t7(o,e.leaf?r(t):t),s+=ni(o)}for(let i=n-t-1;i>=t;i--){let t=e.children[i];t7(a,e.leaf?r(t):t),s+=ni(a)}return s}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)t7(t[i],e)}_condense(e){for(let t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():t8(e[n],this.toBBox)}}});function nl(e,t){return t>e?-1:e>t?1:0}var nc=Object.freeze({__proto__:null,default:class{constructor(e=[],t=nl){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;let e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:t,compare:n}=this,i=t[e];for(;e>0;){let r=e-1>>1,o=t[r];if(n(i,o)>=0)break;t[e]=o,e=r}t[e]=i}_down(e){let{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;i>e;){let i=1+(e<<1),o=t[i],a=i+1;if(this.length>a&&0>n(t[a],o)&&(i=a,o=t[a]),n(o,r)>=0)break;t[e]=o,e=i}t[e]=r}}}),nh=function(e,t,n,i){var r=e[0],o=e[1],a=!1;void 0===n&&(n=0),void 0===i&&(i=t.length);for(var s=(i-n)/2,u=0,l=s-1;s>u;l=u++){var c=t[n+2*u+0],h=t[n+2*u+1],d=t[n+2*l+1];h>o!=d>o&&(t[n+2*l+0]-c)*(o-h)/(d-h)+c>r&&(a=!a)}return a},nd=function(e,t,n,i){var r=e[0],o=e[1],a=!1;void 0===n&&(n=0),void 0===i&&(i=t.length);for(var s=i-n,u=0,l=s-1;s>u;l=u++){var c=t[u+n][0],h=t[u+n][1],d=t[l+n][1];h>o!=d>o&&(t[l+n][0]-c)*(o-h)/(d-h)+c>r&&(a=!a)}return a},nf=function(e,t,n,i){return t.length>0&&Array.isArray(t[0])?nd(e,t,n,i):nh(e,t,n,i)};nf.nested=nd,nf.flat=nh;var np="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function nv(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}function ng(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),t}var ny=nv(function(e,t){!function(e){function t(e,t,n,i,r){let o,a,s,u,l=t[0],c=i[0],h=0,d=0;c>l==c>-l?(o=l,l=t[++h]):(o=c,c=i[++d]);let f=0;if(e>h&&n>d)for(c>l==c>-l?(s=o-((a=l+o)-l),l=t[++h]):(s=o-((a=c+o)-c),c=i[++d]),o=a,0!==s&&(r[f++]=s);e>h&&n>d;)c>l==c>-l?(s=o-((a=o+l)-(u=a-o))+(l-u),l=t[++h]):(s=o-((a=o+c)-(u=a-o))+(c-u),c=i[++d]),o=a,0!==s&&(r[f++]=s);for(;e>h;)s=o-((a=o+l)-(u=a-o))+(l-u),l=t[++h],o=a,0!==s&&(r[f++]=s);for(;n>d;)s=o-((a=o+c)-(u=a-o))+(c-u),c=i[++d],o=a,0!==s&&(r[f++]=s);return 0===o&&0!==f||(r[f++]=o),f}function n(e){return new Float64Array(e)}let i=n(4),r=n(8),o=n(12),a=n(16),s=n(4);e.orient2d=function(e,n,u,l,c,h){let d=(n-h)*(u-c),f=(e-c)*(l-h),p=d-f;if(0===d||0===f||d>0!=f>0)return p;let v=Math.abs(d+f);return 33306690738754716e-32*v>Math.abs(p)?-function(e,n,u,l,c,h,d){let f,p,v,g,y,m,b,D,w,E,x,k,P,M,L,A,O,C;let _=e-c,R=u-c,S=n-h,j=l-h;y=(L=(D=_-(b=(m=134217729*_)-(m-_)))*(E=j-(w=(m=134217729*j)-(m-j)))-((M=_*j)-b*w-D*w-b*E))-(x=L-(O=(D=S-(b=(m=134217729*S)-(m-S)))*(E=R-(w=(m=134217729*R)-(m-R)))-((A=S*R)-b*w-D*w-b*E))),i[0]=L-(x+y)+(y-O),y=(P=M-((k=M+x)-(y=k-M))+(x-y))-(x=P-A),i[1]=P-(x+y)+(y-A),y=(C=k+x)-k,i[2]=k-(C-y)+(x-y),i[3]=C;let T=function(e,t){let n=t[0];for(let e=1;4>e;e++)n+=t[e];return n}(0,i),H=22204460492503146e-32*d;if(T>=H||-T>=H||(f=e-(_+(y=e-_))+(y-c),v=u-(R+(y=u-R))+(y-c),p=n-(S+(y=n-S))+(y-h),g=l-(j+(y=l-j))+(y-h),0===f&&0===p&&0===v&&0===g)||(H=11093356479670487e-47*d+33306690738754706e-32*Math.abs(T),(T+=_*g+j*f-(S*v+R*p))>=H||-T>=H))return T;y=(L=(D=f-(b=(m=134217729*f)-(m-f)))*(E=j-(w=(m=134217729*j)-(m-j)))-((M=f*j)-b*w-D*w-b*E))-(x=L-(O=(D=p-(b=(m=134217729*p)-(m-p)))*(E=R-(w=(m=134217729*R)-(m-R)))-((A=p*R)-b*w-D*w-b*E))),s[0]=L-(x+y)+(y-O),y=(P=M-((k=M+x)-(y=k-M))+(x-y))-(x=P-A),s[1]=P-(x+y)+(y-A),y=(C=k+x)-k,s[2]=k-(C-y)+(x-y),s[3]=C;let B=t(4,i,4,s,r);y=(L=(D=_-(b=(m=134217729*_)-(m-_)))*(E=g-(w=(m=134217729*g)-(m-g)))-((M=_*g)-b*w-D*w-b*E))-(x=L-(O=(D=S-(b=(m=134217729*S)-(m-S)))*(E=v-(w=(m=134217729*v)-(m-v)))-((A=S*v)-b*w-D*w-b*E))),s[0]=L-(x+y)+(y-O),y=(P=M-((k=M+x)-(y=k-M))+(x-y))-(x=P-A),s[1]=P-(x+y)+(y-A),y=(C=k+x)-k,s[2]=k-(C-y)+(x-y),s[3]=C;let F=t(B,r,4,s,o);y=(L=(D=f-(b=(m=134217729*f)-(m-f)))*(E=g-(w=(m=134217729*g)-(m-g)))-((M=f*g)-b*w-D*w-b*E))-(x=L-(O=(D=p-(b=(m=134217729*p)-(m-p)))*(E=v-(w=(m=134217729*v)-(m-v)))-((A=p*v)-b*w-D*w-b*E))),s[0]=L-(x+y)+(y-O),y=(P=M-((k=M+x)-(y=k-M))+(x-y))-(x=P-A),s[1]=P-(x+y)+(y-A),y=(C=k+x)-k,s[2]=k-(C-y)+(x-y),s[3]=C;let N=t(F,o,4,s,a);return a[N-1]}(e,n,u,l,c,h,v):p},e.orient2dfast=function(e,t,n,i,r,o){return(t-o)*(n-r)-(e-r)*(i-o)},Object.defineProperty(e,"__esModule",{value:!0})}(t)}),nm=ng(nu),nb=ng(nc),nD=ny.orient2d;nb.default&&(nb=nb.default);var nw=nE;function nE(e,t,n){t=Math.max(0,void 0===t?2:t),n=n||0;var i=function(e){for(var t=e[0],n=e[0],i=e[0],r=e[0],o=0;e.length>o;o++){var a=e[o];t[0]>a[0]&&(t=a),a[0]>i[0]&&(i=a),n[1]>a[1]&&(n=a),a[1]>r[1]&&(r=a)}var s=[t,n,i,r],u=s.slice();for(o=0;e.length>o;o++)nf(e[o],s)||u.push(e[o]);return function(e){e.sort(nR);for(var t=[],n=0;e.length>n;n++){for(;t.length>=2&&0>=nM(t[t.length-2],t[t.length-1],e[n]);)t.pop();t.push(e[n])}for(var i=[],r=e.length-1;r>=0;r--){for(;i.length>=2&&0>=nM(i[i.length-2],i[i.length-1],e[r]);)i.pop();i.push(e[r])}return i.pop(),t.pop(),t.concat(i)}(u)}(e),r=new nm(16);r.toBBox=function(e){return{minX:e[0],minY:e[1],maxX:e[0],maxY:e[1]}},r.compareMinX=function(e,t){return e[0]-t[0]},r.compareMinY=function(e,t){return e[1]-t[1]},r.load(e);for(var o,a=[],s=0;i.length>s;s++){var u=i[s];r.remove(u),o=nA(u,o),a.push(o)}var l=new nm(16);for(s=0;a.length>s;s++)l.insert(nL(a[s]));for(var c=t*t,h=n*n;a.length;){var d=a.shift(),f=d.p,p=d.next.p,v=nO(f,p);if(v>=h){var g=v/c;(u=function(e,t,n,i,r,o,a){for(var s=new nb([],nx),u=e.data;u;){for(var l=0;u.children.length>l;l++){var c=u.children[l],h=u.leaf?nC(c,n,i):function(e,t,n){if(nk(e,n)||nk(t,n))return 0;var i=n_(e[0],e[1],t[0],t[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=n_(e[0],e[1],t[0],t[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=n_(e[0],e[1],t[0],t[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=n_(e[0],e[1],t[0],t[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(i,r,o,a)}(n,i,c);o<h||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var d=s.pop(),f=d.node,p=nC(f,t,n),v=nC(f,i,r);if(p>d.dist&&v>d.dist&&nP(n,f,a)&&nP(i,f,a))return f}(u=s.pop())&&(u=u.node)}return null}(r,d.prev.p,f,p,d.next.next.p,g,l))&&Math.min(nO(u,f),nO(u,p))<=g&&(a.push(d),a.push(nA(u,d)),r.remove(u),l.remove(d),l.insert(nL(d)),l.insert(nL(d.next)))}}d=o;var y=[];do y.push(d.p),d=d.next;while(d!==o);return y.push(d.p),y}function nx(e,t){return e.dist-t.dist}function nk(e,t){return!(t.minX>e[0]||e[0]>t.maxX||t.minY>e[1]||e[1]>t.maxY)}function nP(e,t,n){for(var i,r,o=n.search({minX:Math.min(e[0],t[0]),minY:Math.min(e[1],t[1]),maxX:Math.max(e[0],t[0]),maxY:Math.max(e[1],t[1])}),a=0;o.length>a;a++)if(r=o[a].next.p,(i=o[a].p)!==t&&r!==e&&nM(i,r,e)>0!=nM(i,r,t)>0&&nM(e,t,i)>0!=nM(e,t,r)>0)return!1;return!0}function nM(e,t,n){return nD(e[0],e[1],t[0],t[1],n[0],n[1])}function nL(e){var t=e.p,n=e.next.p;return e.minX=Math.min(t[0],n[0]),e.minY=Math.min(t[1],n[1]),e.maxX=Math.max(t[0],n[0]),e.maxY=Math.max(t[1],n[1]),e}function nA(e,t){var n={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(n.next=t.next,n.prev=t,t.next.prev=n,t.next=n):(n.prev=n,n.next=n),n}function nO(e,t){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function nC(e,t,n){var i=t[0],r=t[1],o=n[0]-i,a=n[1]-r;if(0!==o||0!==a){var s=((e[0]-i)*o+(e[1]-r)*a)/(o*o+a*a);s>1?(i=n[0],r=n[1]):s>0&&(i+=o*s,r+=a*s)}return(o=e[0]-i)*o+(a=e[1]-r)*a}function n_(e,t,n,i,r,o,a,s){var u,l,c,h,d=n-e,f=i-t,p=a-r,v=s-o,g=e-r,y=t-o,m=d*d+f*f,b=d*p+f*v,D=p*p+v*v,w=d*g+f*y,E=p*g+v*y,x=m*D-b*b,k=x,P=x;0===x?(l=0,k=1,h=E,P=D):(h=m*E-b*w,0>(l=b*E-D*w)?(l=0,h=E,P=D):l>k&&(l=k,h=E+b,P=D)),0>h?(h=0,0>-w?l=0:-w>m?l=k:(l=-w,k=m)):h>P&&(h=P,0>-w+b?l=0:-w+b>m?l=k:(l=-w+b,k=m));var M=(1-(c=0===h?0:h/P))*r+c*a-((1-(u=0===l?0:l/k))*e+u*n),L=(1-c)*o+c*s-((1-u)*t+u*i);return M*M+L*L}function nR(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function nS(e,t,n){void 0===n&&(n={});var i=t0(e),r=t0(t),o=Math.pow(Math.sin(tB(r[1]-i[1])/2),2)+Math.pow(Math.sin(tB(r[0]-i[0])/2),2)*Math.cos(tB(i[1]))*Math.cos(tB(r[1]));return tj(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),n.units)}function nj(e){return function(e,t){void 0===t&&(t={});var n=Number(e[0]),i=Number(e[1]),r=Number(e[2]),o=Number(e[3]);if(6===e.length)throw Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,i];return tA([[a,[r,i],[r,o],[n,o],a]],t.properties,{bbox:e,id:t.id})}(tZ(e))}function nT(e,t,n,i){void 0===i&&(i={});var r=t0(e),o=tB(r[0]),a=tB(r[1]),s=tB(n),u=tT(t,i.units),l=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s));return tL([tH(o+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(l))),tH(l)],i.properties)}function nH(e,t,n){if(void 0===n&&(n={}),!0===n.final)return(nH(t,e)+180)%360;var i=t0(e),r=t0(t),o=tB(i[0]),a=tB(r[0]),s=tB(i[1]),u=tB(r[1]);return tH(Math.atan2(Math.sin(a-o)*Math.cos(u),Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o)))}function nB(e,t){void 0===t&&(t={});var n=tZ(e);return tL([(n[0]+n[2])/2,(n[1]+n[3])/2],t.properties,t)}function nF(e,t){void 0===t&&(t={});var n=0,i=0,r=0;return tI(e,function(e){n+=e[0],i+=e[1],r++},!0),tL([n/r,i/r],t.properties)}function nN(e){if(!e)throw Error("geojson is required");var t=[];return tW(e,function(e){!function(e,t){var n=[],i=e.geometry;if(null!==i){switch(i.type){case"Polygon":n=t1(i);break;case"LineString":n=[t1(i)]}n.forEach(function(n){var i,r;(i=e.properties,r=[],n.reduce(function(e,t){var n,o,a,s,u=tO([e,t],i);return u.bbox=[(a=t[0])>(n=e[0])?n:a,(s=t[1])>(o=e[1])?o:s,n>a?n:a,o>s?o:s],r.push(u),t}),r).forEach(function(e){e.id=t.length,t.push(e)})})}}(e,t)}),tC(t)}function nU(e,t){nI(e,0,e.children.length,t,e)}function nI(e,t,n,i,r){r||(r=nG(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=t;n>o;o++){let t=e.children[o];nY(r,e.leaf?i(t):t)}return r}function nY(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function nX(e,t){return e.minX-t.minX}function nz(e,t){return e.minY-t.minY}function nq(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function nV(e){return e.maxX-e.minX+(e.maxY-e.minY)}function nW(e,t){return!(e.minX>t.minX||e.minY>t.minY||t.maxX>e.maxX||t.maxY>e.maxY)}function n$(e,t){return!(t.minX>e.maxX||t.minY>e.maxY||e.minX>t.maxX||e.minY>t.maxY)}function nG(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function nK(e,t,n,i,r){let o=[t,n];for(;o.length;){if(i>=(n=o.pop())-(t=o.pop()))continue;let a=t+Math.ceil((n-t)/i/2)*i;t6(e,a,t,n,r),o.push(t,a,a,n)}}nw.default=nE;var nJ=ng(Object.freeze({__proto__:null,default:class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data,n=[];if(!n$(e,t))return n;let i=this.toBBox,r=[];for(;t;){for(let o=0;t.children.length>o;o++){let a=t.children[o],s=t.leaf?i(a):a;n$(e,s)&&(t.leaf?n.push(a):nW(e,s)?this._all(a,n):r.push(a))}t=r.pop()}return n}collides(e){let t=this.data;if(!n$(e,t))return!1;let n=[];for(;t;){for(let i=0;t.children.length>i;i++){let r=t.children[i],o=t.leaf?this.toBBox(r):r;if(n$(e,o)){if(t.leaf||nW(e,o))return!0;n.push(r)}}t=n.pop()}return!1}load(e){if(!e||!e.length)return this;if(this._minEntries>e.length){for(let t=0;e.length>t;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length){if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(t.height>this.data.height){let e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=nG([]),this}remove(e,t){let n,i,r;if(!e)return this;let o=this.data,a=this.toBBox(e),s=[],u=[];for(;o||s.length;){if(o||(o=s.pop(),i=s[s.length-1],n=u.pop(),r=!0),o.leaf){let n=function(e,t,n){if(!n)return t.indexOf(e);for(let i=0;t.length>i;i++)if(n(e,t[i]))return i;return -1}(e,o.children,t);if(-1!==n)return o.children.splice(n,1),s.push(o),this._condense(s),this}r||o.leaf||!nW(o,a)?i?(n++,o=i.children[n],r=!1):o=null:(s.push(o),u.push(n),n=0,i=o,o=o.children[0])}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,i){let r=n-t+1,o,a=this._maxEntries;if(a>=r)return nU(o=nG(e.slice(t,n+1)),this.toBBox),o;i||(a=Math.ceil(r/Math.pow(a,(i=Math.ceil(Math.log(r)/Math.log(a)))-1))),(o=nG([])).leaf=!1,o.height=i;let s=Math.ceil(r/a),u=s*Math.ceil(Math.sqrt(a));nK(e,t,n,u,this.compareMinX);for(let r=t;n>=r;r+=u){let t=Math.min(r+u-1,n);nK(e,r,t,s,this.compareMinY);for(let n=r;t>=n;n+=s)o.children.push(this._build(e,n,Math.min(n+s-1,t),i-1))}return nU(o,this.toBBox),o}_chooseSubtree(e,t,n,i){for(;i.push(t),!t.leaf&&i.length-1!==n;){let n,i=1/0,r=1/0;for(let o=0;t.children.length>o;o++){let a=t.children[o],s=nq(a),u=(Math.max(a.maxX,e.maxX)-Math.min(a.minX,e.minX))*(Math.max(a.maxY,e.maxY)-Math.min(a.minY,e.minY))-s;r>u?(r=u,i=i>s?s:i,n=a):u===r&&i>s&&(i=s,n=a)}t=n||t.children[0]}return t}_insert(e,t,n){let i=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(i,this.data,t,r);for(o.children.push(e),nY(o,i);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(i,r,t)}_split(e,t){let n=e[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);let o=this._chooseSplitIndex(n,r,i),a=nG(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,nU(n,this.toBBox),nU(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=nG([e,t]),this.data.height=e.height+1,this.data.leaf=!1,nU(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let i,r=1/0,o=1/0;for(let a=t;n-t>=a;a++){let t=nI(e,0,a,this.toBBox),s=nI(e,a,n,this.toBBox),u=function(e,t){let n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-n)*Math.max(0,Math.min(e.maxY,t.maxY)-i)}(t,s),l=nq(t)+nq(s);r>u?(r=u,i=a,o=o>l?l:o):u===r&&o>l&&(o=l,i=a)}return i||n-t}_chooseSplitAxis(e,t,n){let i=e.leaf?this.compareMinX:nX,r=e.leaf?this.compareMinY:nz,o=this._allDistMargin(e,t,n,i);this._allDistMargin(e,t,n,r)>o&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);let r=this.toBBox,o=nI(e,0,t,r),a=nI(e,n-t,n,r),s=nV(o)+nV(a);for(let i=t;n-t>i;i++){let t=e.children[i];nY(o,e.leaf?r(t):t),s+=nV(o)}for(let i=n-t-1;i>=t;i--){let t=e.children[i];nY(a,e.leaf?r(t):t),s+=nV(a)}return s}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)nY(t[i],e)}_condense(e){for(let t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():nU(e[n],this.toBBox)}}})),nZ=ng(tU),nQ=ng(tJ),n0=ng(tQ).default,n1=nQ.featureEach,n2=nZ.featureCollection;function n3(e){var t=new nJ(e);return t.insert=function(e){if("Feature"!==e.type)throw Error("invalid feature");return e.bbox=e.bbox?e.bbox:n0(e),nJ.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach(function(e){if("Feature"!==e.type)throw Error("invalid features");e.bbox=e.bbox?e.bbox:n0(e),t.push(e)}):n1(e,function(e){if("Feature"!==e.type)throw Error("invalid features");e.bbox=e.bbox?e.bbox:n0(e),t.push(e)}),nJ.prototype.load.call(this,t)},t.remove=function(e,t){if("Feature"!==e.type)throw Error("invalid feature");return e.bbox=e.bbox?e.bbox:n0(e),nJ.prototype.remove.call(this,e,t)},t.clear=function(){return nJ.prototype.clear.call(this)},t.search=function(e){return n2(nJ.prototype.search.call(this,this.toBBox(e)))},t.collides=function(e){return nJ.prototype.collides.call(this,this.toBBox(e))},t.all=function(){return n2(nJ.prototype.all.call(this))},t.toJSON=function(){return nJ.prototype.toJSON.call(this)},t.fromJSON=function(e){return nJ.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=n0(e);else{if("FeatureCollection"!==e.type)throw Error("invalid geojson");t=n0(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}function n6(e,t){var n=t1(e),i=t1(t);if(2!==n.length)throw Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],u=i[0][0],l=i[0][1],c=i[1][0],h=i[1][1],d=(h-l)*(a-r)-(c-u)*(s-o);if(0===d)return null;var f=((c-u)*(o-l)-(h-l)*(r-u))/d,p=((a-r)*(o-l)-(s-o)*(r-u))/d;return 0>f||f>1||0>p||p>1?null:tL([r+f*(a-r),o+f*(s-o)])}function n4(e){var t=0;if(e&&e.length>0){t+=Math.abs(n9(e[0]));for(var n=1;e.length>n;n++)t-=Math.abs(n9(e[n]))}return t}function n9(e){var t,n,i,r,o,a,s=0,u=e.length;if(u>2){for(a=0;u>a;a++)a===u-2?(i=u-2,r=u-1,o=0):a===u-1?(i=u-1,r=0,o=1):(i=a,r=a+1,o=a+2),t=e[i],n=e[r],s+=(n8(e[o][0])-n8(t[0]))*Math.sin(n8(n[1]));s=40680631590769*s/2}return s}function n8(e){return e*Math.PI/180}function n5(e,t){return void 0===t&&(t={}),tG(e,function(e,n){var i=n.geometry.coordinates;return e+nS(i[0],i[1],t)},0)}function n7(e,t){return e.length>1?t_(e,t):tO(e[0],t)}n3.default=n3;var ie=nv(function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,a){if("function"!=typeof i)throw TypeError("The listener must be a function");var s=new r(i,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=this._events[n?n+e:e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,r=t.length,o=Array(r);r>i;i++)o[i]=t[i].fn;return o},s.prototype.listenerCount=function(e){var t=this._events[n?n+e:e];return t?t.fn?1:t.length:0},s.prototype.emit=function(e,t,i,r,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,o),!0;case 6:return c.fn.call(c.context,t,i,r,o,a),!0}for(l=1,u=Array(h-1);h>l;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,f=c.length;for(l=0;f>l;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,i);break;case 4:c[l].fn.call(c[l].context,t,i,r);break;default:if(!u)for(d=1,u=Array(h-1);h>d;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||i&&s.context!==i||a(this,o);else{for(var u=0,l=[],c=s.length;c>u;u++)(s[u].fn!==t||r&&!s[u].once||i&&s[u].context!==i)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?this._events[t=n?n+e:e]&&a(this,t):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}),it=function(e){tf(n,e);var t=ty(n);function n(e,i){var r,o=i.style;return tl(this,n),(r=t.call(this)).scene=void 0,r.style=void 0,r.layers=void 0,r.data=[],r.scene=e,r.style=o,r.layers=r.initLayers(),r.layers.forEach(function(t){e.addLayer(t)}),o.callback instanceof Function&&o.callback(r.layers),r}return th(n,[{key:"getLayers",value:function(){return this.layers}},{key:"show",value:function(){this.layers.forEach(function(e){e.show()})}},{key:"hide",value:function(){this.layers.forEach(function(e){e.hide()})}},{key:"setData",value:function(e){var t=tD(e).sort(function(e,t){return+e.properties.isActive-+t.properties.isActive});this.data=t,this.layers.forEach(function(e){e.setData(tC(t))})}},{key:"destroy",value:function(){var e=this;this.layers.forEach(function(t){e.scene.removeLayer(t)})}}]),n}(ie.EventEmitter),ii=function(e){tf(i,e);var n=ty(i);function i(){return tl(this,i),n.apply(this,arguments)}return th(i,[{key:"initLayers",value:function(){var e=this.style,n=e.normal,i=e.style,r=e.options;return[new t.LineLayer(null!=r?r:{}).source(tC([])).size(n.size).color(n.color).shape("line").style(i)]}}]),i}(it),ir=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},io="object"==typeof np&&np&&np.Object===Object&&np,ia="object"==typeof self&&self&&self.Object===Object&&self,is=io||ia||Function("return this")(),iu=function(){return is.Date.now()},il=/\s/,ic=function(e){for(var t=e.length;t--&&il.test(e.charAt(t)););return t},ih=/^\s+/,id=is.Symbol,ip=Object.prototype,iv=ip.hasOwnProperty,ig=ip.toString,iy=id?id.toStringTag:void 0,im=function(e){var t=iv.call(e,iy),n=e[iy];try{e[iy]=void 0;var i=!0}catch(e){}var r=ig.call(e);return i&&(t?e[iy]=n:delete e[iy]),r},ib=Object.prototype.toString,iD=id?id.toStringTag:void 0,iw=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":iD&&iD in Object(e)?im(e):ib.call(e)},iE=function(e){return null!=e&&"object"==typeof e},ix=function(e){return"symbol"==typeof e||iE(e)&&"[object Symbol]"==iw(e)},ik=/^[-+]0x[0-9a-f]+$/i,iP=/^0b[01]+$/i,iM=/^0o[0-7]+$/i,iL=parseInt,iA=function(e){if("number"==typeof e)return e;if(ix(e))return NaN;if(ir(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=ir(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=(t=e)?t.slice(0,ic(t)+1).replace(ih,""):t;var i=iP.test(e);return i||iM.test(e)?iL(e.slice(2),i?2:8):ik.test(e)?NaN:+e},iO=Math.max,iC=Math.min,i_=function(e,t,n){var i,r,o,a,s,u,l=0,c=!1,h=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function f(t){var n=i,o=r;return i=r=void 0,l=t,a=e.apply(o,n)}function p(e){var n=e-u;return void 0===u||n>=t||0>n||h&&e-l>=o}function v(){var e,n=iu();if(p(n))return g(n);s=setTimeout(v,(e=t-(n-u),h?iC(e,o-(n-l)):e))}function g(e){return s=void 0,d&&i?f(e):(i=r=void 0,a)}function y(){var e,n=iu(),o=p(n);if(i=arguments,r=this,u=n,o){if(void 0===s)return l=e=u,s=setTimeout(v,t),c?f(e):a;if(h)return clearTimeout(s),s=setTimeout(v,t),f(u)}return void 0===s&&(s=setTimeout(v,t)),a}return t=iA(t)||0,ir(n)&&(c=!!n.leading,o=(h="maxWait"in n)?iO(iA(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,i=u=r=s=void 0},y.flush=function(){return void 0===s?a:g(iu())},y},iR=function(n){tf(r,n);var i=ty(r);function r(){var t;tl(this,r);for(var n=arguments.length,o=Array(n),a=0;n>a;a++)o[a]=arguments[a];return(t=i.call.apply(i,[this].concat(o))).onMouseMove=function(n){t.emit(e.RenderEvent.Mousemove,n)},t.onMouseOut=function(n){t.emit(e.RenderEvent.Mouseout,n)},t.onMouseDown=function(n){t.emit(e.RenderEvent.Dragstart,n)},t.onDragging=function(n){t.emit(e.RenderEvent.Dragging,n)},t.onDragEnd=i_(function(n){t.emit(e.RenderEvent.Dragend,n)},0),t.onUnClick=function(n){t.emit(e.RenderEvent.UnClick,n)},t.enableHover=function(){var n,i;t.disableHover(),null===(n=t.layers[0])||void 0===n||n.on(e.LayerEvent.Mousemove,t.onMouseMove),null===(i=t.layers[0])||void 0===i||i.on(e.LayerEvent.Mouseout,t.onMouseOut)},t.disableHover=function(){var n,i;null===(n=t.layers[0])||void 0===n||n.off(e.LayerEvent.Mousemove,t.onMouseMove),null===(i=t.layers[0])||void 0===i||i.off(e.LayerEvent.Mouseout,t.onMouseOut)},t}return th(r,[{key:"initLayers",value:function(){var e=this.style,n=e.normal,i=e.hover,r=e.active,o=e.style,a=e.options;return[new t.LineLayer(null!=a?a:{}).source(tC([])).size("isHover*isActive",function(e,t){return t?r.size:e?i.size:n.size}).color("isHover*isActive",function(e,t){return t?r.color:e?i.color:n.color}).shape("line").style(o)]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(e.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(e.SceneEvent.Dragging,this.onDragging),this.scene.on(e.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(e.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(e.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(e.SceneEvent.Dragging,this.onDragging),this.scene.off(e.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(e.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(e.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(e.LayerEvent.UnClick,this.onUnClick)}}]),r}(it),iS=function(n){tf(r,n);var i=ty(r);function r(){var t;tl(this,r);for(var n=arguments.length,o=Array(n),a=0;n>a;a++)o[a]=arguments[a];return(t=i.call.apply(i,[this].concat(o))).onMouseMove=function(n){t.emit(e.RenderEvent.Mousemove,n)},t.onMouseOut=function(n){t.emit(e.RenderEvent.Mouseout,n)},t.onMouseDown=function(n){t.emit(e.RenderEvent.Click,n)},t}return th(r,[{key:"initLayers",value:function(){var e=this.style,n=e.normal,i=e.style,r=e.options,o=n.shape,a=n.size,s=n.color;return[new t.PointLayer(null!=r?r:{}).source(tC([])).size(a).color(s).shape(o).style(void 0===i?{}:i)]}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(e.LayerEvent.Mousedown,this.onMouseDown)}},{key:"disableClick",value:function(){this.layers[0].off(e.LayerEvent.Mousedown,this.onMouseDown)}},{key:"enableHover",value:function(){var t,n;this.disableHover(),null===(t=this.layers[0])||void 0===t||t.on(e.LayerEvent.Mousemove,this.onMouseMove),null===(n=this.layers[0])||void 0===n||n.on(e.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var t,n;null===(t=this.layers[0])||void 0===t||t.off(e.LayerEvent.Mousemove,this.onMouseMove),null===(n=this.layers[0])||void 0===n||n.off(e.LayerEvent.Mouseout,this.onMouseOut)}}]),r}(it),ij=function(n){tf(r,n);var i=ty(r);function r(){var t;tl(this,r);for(var n=arguments.length,o=Array(n),a=0;n>a;a++)o[a]=arguments[a];return(t=i.call.apply(i,[this].concat(o))).onCreate=function(n){t.emit(e.RenderEvent.UnClick,n)},t.onMouseMove=function(n){t.emit(e.RenderEvent.Mousemove,n)},t.onMouseOut=function(n){t.emit(e.RenderEvent.Mouseout,n)},t.onMouseDown=function(n){t.emit(e.RenderEvent.Dragstart,n)},t.onDragging=function(n){t.emit(e.RenderEvent.Dragging,n)},t.onDragEnd=i_(function(n){t.emit(e.RenderEvent.Dragend,n)},0),t.onClick=function(n){t.emit(e.RenderEvent.Click,n)},t.onContextmenu=function(n){t.emit(e.RenderEvent.Contextmenu,n)},t}return th(r,[{key:"initLayers",value:function(){var e=this.style,n=e.normal,i=e.hover,r=e.active,o=e.style,a=e.options;return[new t.PointLayer(null!=a?a:{}).source(tC([])).size("isHover*isActive",function(e,t){return t?r.size:e?i.size:n.size}).color("isHover*isActive",function(e,t){return t?r.color:e?i.color:n.color}).shape("isHover*isActive",function(e,t){return t?r.shape:e?i.shape:n.shape}).style(void 0===o?{}:o)]}},{key:"enableCreate",value:function(){this.disableCreate(),this.layers[0].on(e.LayerEvent.UnClick,this.onCreate)}},{key:"disableCreate",value:function(){this.layers[0].off(e.LayerEvent.UnClick,this.onCreate)}},{key:"enableHover",value:function(){var t,n;this.disableHover(),null===(t=this.layers[0])||void 0===t||t.on(e.LayerEvent.Mousemove,this.onMouseMove),null===(n=this.layers[0])||void 0===n||n.on(e.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var t,n;null===(t=this.layers[0])||void 0===t||t.off(e.LayerEvent.Mousemove,this.onMouseMove),null===(n=this.layers[0])||void 0===n||n.off(e.LayerEvent.Mouseout,this.onMouseOut)}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(e.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(e.SceneEvent.Dragging,this.onDragging),this.scene.on(e.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(e.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(e.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(e.SceneEvent.Dragging,this.onDragging),this.scene.off(e.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(e.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(e.LayerEvent.Click,this.onClick)}},{key:"disableClick",value:function(){this.layers[0].off(e.LayerEvent.Click,this.onClick)}},{key:"enableContextMenu",value:function(){this.disableContextMenu(),this.layers[0].on(e.LayerEvent.Contextmenu,this.onContextmenu)}},{key:"disableContextMenu",value:function(){this.layers[0].off(e.LayerEvent.Contextmenu,this.onContextmenu)}}]),r}(it),iT=function(n){tf(r,n);var i=ty(r);function r(){var t;tl(this,r);for(var n=arguments.length,o=Array(n),a=0;n>a;a++)o[a]=arguments[a];return(t=i.call.apply(i,[this].concat(o))).onMouseMove=function(n){t.emit(e.RenderEvent.Mousemove,n)},t.onMouseOut=function(n){t.emit(e.RenderEvent.Mouseout,n)},t.onMouseDown=function(n){t.emit(e.RenderEvent.Dragstart,n)},t.onDragging=function(n){t.emit(e.RenderEvent.Dragging,n)},t.onDragEnd=i_(function(n){t.emit(e.RenderEvent.Dragend,n)},0),t.onUnClick=function(n){t.emit(e.RenderEvent.UnClick,n)},t.enableHover=function(){var n,i;t.disableHover(),null===(n=t.layers[0])||void 0===n||n.on(e.LayerEvent.Mousemove,t.onMouseMove),null===(i=t.layers[0])||void 0===i||i.on(e.LayerEvent.Mouseout,t.onMouseOut)},t.disableHover=function(){var n,i;null===(n=t.layers[0])||void 0===n||n.off(e.LayerEvent.Mousemove,t.onMouseMove),null===(i=t.layers[0])||void 0===i||i.off(e.LayerEvent.Mouseout,t.onMouseOut)},t}return th(r,[{key:"initLayers",value:function(){var e=this.style,n=e.normal,i=e.hover,r=e.active,o=e.style,a=e.options,s=new t.PolygonLayer(null!=a?a:{});return s.source(tC([])).color("isHover*isActive",function(e,t){return t?r.color:e?i.color:n.color}).style(o),[s]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(e.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(e.SceneEvent.Dragging,this.onDragging),this.scene.on(e.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(e.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(e.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(e.SceneEvent.Dragging,this.onDragging),this.scene.off(e.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(e.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(e.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(e.LayerEvent.UnClick,this.onUnClick)}}]),r}(it),iH=function(t){tf(i,t);var n=ty(i);function i(t){var r;return tl(this,i),(r=n.call(this)).scene=void 0,r.previousClick=void 0,r.onDblClick=function(t){var n,i,o=null!==(n=null!==(i=t.pixel)&&void 0!==i?i:t.point)&&void 0!==n?n:{},a=o.x,s=void 0===a?0:a,u=o.y,l=void 0===u?0:u,c=Date.now();if(r.previousClick){var h=r.previousClick,d=h.y;300>c-h.time&&5>Math.abs(s-h.x)&&5>Math.abs(l-d)&&r.emit(e.RenderEvent.DblClick,t)}r.previousClick={x:s,y:l,time:c}},r.onMouseMove=function(t){r.emit(e.RenderEvent.Mousemove,t)},r.onMouseDown=function(t){r.emit(e.RenderEvent.Dragstart,t)},r.onDragging=function(t){r.emit(e.RenderEvent.Dragging,t)},r.onDragEnd=i_(function(t){r.emit(e.RenderEvent.Dragend,t)},0),r.scene=t,r}return th(i,[{key:"enableDrag",value:function(){this.disableDrag(),this.scene.on(e.SceneEvent.Mousedown,this.onMouseDown),this.scene.on(e.SceneEvent.Dragging,this.onDragging),this.scene.on(e.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(e.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.scene.off(e.SceneEvent.Mousedown,this.onMouseDown),this.scene.off(e.SceneEvent.Dragging,this.onDragging),this.scene.off(e.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(e.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableMouseMove",value:function(){this.disableMouseMove(),this.scene.on(e.SceneEvent.Mousemove,this.onMouseMove)}},{key:"disableMouseMove",value:function(){this.scene.off(e.SceneEvent.Mousemove,this.onMouseMove)}},{key:"enableDblClick",value:function(){this.disableDblClick(),this.scene.on(e.SceneEvent.Mousedown,this.onDblClick)}},{key:"disableDblClick",value:function(){this.scene.off(e.SceneEvent.Mousedown,this.onDblClick)}}]),i}(ie),iB=function(e){tf(i,e);var n=ty(i);function i(){return tl(this,i),n.apply(this,arguments)}return th(i,[{key:"initLayers",value:function(){var e=this.style,n=e.normal,i=e.active,r=e.style,o=e.options;return[new t.PointLayer(null!=o?o:{}).source(tC([])).size("isActive",function(e){return e?i.size:n.size}).color("isActive",function(e){return e?i.color:n.color}).shape("text","text").style(void 0===r?{}:r)]}}]),i}(it),iF={point:ij,line:iR,dashLine:ii,midPoint:iS,text:iB,polygon:iT},iN="#1990FF",iU="#ED9D48",iI={blend:"normal",pickingBuffer:5},iY={color:iN,shape:"circle",size:6},iX={color:iU,shape:"circle",size:6},iz={shape:"circle",size:6,color:iU},iq={options:iI,normal:iY,hover:ts(ts({},iY),{},{size:8}),active:ts(ts({},iY),{},{size:8,color:iU}),style:{stroke:"#ffffff",strokeWidth:2}},iV={options:iI,normal:iX,hover:ts(ts({},iX),{},{size:8}),active:ts(ts({},iX),{},{size:8}),style:{stroke:"#ffffff",strokeWidth:2}},iW={color:iN,size:12},i$={point:iV,line:{options:iI,normal:{color:iN,size:2},hover:{color:iN,size:2},active:{color:iU,size:2},style:{}},polygon:{options:iI,normal:{color:iN},hover:{color:iN},active:{color:iU},style:{opacity:.15}},midPoint:{options:iI,normal:iz},dashLine:{options:iI,normal:{color:iU,size:2},style:{lineType:"dash",dashArray:[6,6]}},text:{options:iI,normal:iW,active:ts(ts({},iW),{},{color:iU}),style:{fontWeight:"800",textOffset:[0,iW.size+6],textAllowOverlap:!0,stroke:"#ffffff",strokeWidth:2}}},iG=function(e,t){return e===t||e!=e&&t!=t},iK=function(e,t){for(var n=e.length;n--;)if(iG(e[n][0],t))return n;return -1},iJ=Array.prototype.splice;function iZ(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}iZ.prototype.clear=function(){this.__data__=[],this.size=0},iZ.prototype.delete=function(e){var t=this.__data__,n=iK(t,e);return n>=0&&(n==t.length-1?t.pop():iJ.call(t,n,1),--this.size,!0)},iZ.prototype.get=function(e){var t=this.__data__,n=iK(t,e);return 0>n?void 0:t[n][1]},iZ.prototype.has=function(e){return iK(this.__data__,e)>-1},iZ.prototype.set=function(e,t){var n=this.__data__,i=iK(n,e);return 0>i?(++this.size,n.push([e,t])):n[i][1]=t,this};var iQ,i0=function(e){if(!ir(e))return!1;var t=iw(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},i1=is["__core-js_shared__"],i2=(iQ=/[^.]+$/.exec(i1&&i1.keys&&i1.keys.IE_PROTO||""))?"Symbol(src)_1."+iQ:"",i3=Function.prototype.toString,i6=function(e){if(null!=e){try{return i3.call(e)}catch(e){}try{return e+""}catch(e){}}return""},i4=/^\[object .+?Constructor\]$/,i9=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),i8=function(e,t){var n,i=null==e?void 0:e[t];return!(!ir(n=i)||i2&&i2 in n)&&(i0(n)?i9:i4).test(i6(n))?i:void 0},i5=i8(is,"Map"),i7=i8(Object,"create"),re=Object.prototype.hasOwnProperty,rt=Object.prototype.hasOwnProperty;function rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}rn.prototype.clear=function(){this.__data__=i7?i7(null):{},this.size=0},rn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rn.prototype.get=function(e){var t=this.__data__;if(i7){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return re.call(t,e)?t[e]:void 0},rn.prototype.has=function(e){var t=this.__data__;return i7?void 0!==t[e]:rt.call(t,e)},rn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i7&&void 0===t?"__lodash_hash_undefined__":t,this};var ri=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},rr=function(e,t){var n=e.__data__;return ri(t)?n["string"==typeof t?"string":"hash"]:n.map};function ro(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ra(e){var t=this.__data__=new iZ(e);this.size=t.size}ro.prototype.clear=function(){this.size=0,this.__data__={hash:new rn,map:new(i5||iZ),string:new rn}},ro.prototype.delete=function(e){var t=rr(this,e).delete(e);return this.size-=t?1:0,t},ro.prototype.get=function(e){return rr(this,e).get(e)},ro.prototype.has=function(e){return rr(this,e).has(e)},ro.prototype.set=function(e,t){var n=rr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},ra.prototype.clear=function(){this.__data__=new iZ,this.size=0},ra.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ra.prototype.get=function(e){return this.__data__.get(e)},ra.prototype.has=function(e){return this.__data__.has(e)},ra.prototype.set=function(e,t){var n=this.__data__;if(n instanceof iZ){var i=n.__data__;if(!i5||199>i.length)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new ro(i)}return n.set(e,t),this.size=n.size,this};var rs=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e},ru=function(){try{var e=i8(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),rl=function(e,t,n){"__proto__"==t&&ru?ru(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},rc=Object.prototype.hasOwnProperty,rh=function(e,t,n){var i=e[t];rc.call(e,t)&&iG(i,n)&&(void 0!==n||t in e)||rl(e,t,n)},rd=function(e,t,n,i){var r=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=i?i(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),r?rl(n,s,u):rh(n,s,u)}return n},rf=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i},rp=function(e){return iE(e)&&"[object Arguments]"==iw(e)},rv=Object.prototype,rg=rv.hasOwnProperty,ry=rv.propertyIsEnumerable,rm=rp(function(){return arguments}())?rp:function(e){return iE(e)&&rg.call(e,"callee")&&!ry.call(e,"callee")},rb=Array.isArray,rD=function(){return!1},rw=nv(function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,r=i&&i.exports===n?is.Buffer:void 0;e.exports=(r?r.isBuffer:void 0)||rD}),rE=/^(?:0|[1-9]\d*)$/,rx=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&rE.test(e))&&e>-1&&e%1==0&&t>e},rk=function(e){return"number"==typeof e&&e>-1&&e%1==0&&9007199254740991>=e},rP={};rP["[object Float32Array]"]=rP["[object Float64Array]"]=rP["[object Int8Array]"]=rP["[object Int16Array]"]=rP["[object Int32Array]"]=rP["[object Uint8Array]"]=rP["[object Uint8ClampedArray]"]=rP["[object Uint16Array]"]=rP["[object Uint32Array]"]=!0,rP["[object Arguments]"]=rP["[object Array]"]=rP["[object ArrayBuffer]"]=rP["[object Boolean]"]=rP["[object DataView]"]=rP["[object Date]"]=rP["[object Error]"]=rP["[object Function]"]=rP["[object Map]"]=rP["[object Number]"]=rP["[object Object]"]=rP["[object RegExp]"]=rP["[object Set]"]=rP["[object String]"]=rP["[object WeakMap]"]=!1;var rM=function(e){return function(t){return e(t)}},rL=nv(function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,r=i&&i.exports===n&&io.process,o=function(){try{return i&&i.require&&i.require("util").types||r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=o}),rA=rL&&rL.isTypedArray,rO=rA?rM(rA):function(e){return iE(e)&&rk(e.length)&&!!rP[iw(e)]},rC=Object.prototype.hasOwnProperty,r_=function(e,t){var n=rb(e),i=!n&&rm(e),r=!n&&!i&&rw(e),o=!n&&!i&&!r&&rO(e),a=n||i||r||o,s=a?rf(e.length,String):[],u=s.length;for(var l in e)!t&&!rC.call(e,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||rx(l,u))||s.push(l);return s},rR=Object.prototype,rS=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||rR)},rj=function(e,t){return function(n){return e(t(n))}},rT=rj(Object.keys,Object),rH=Object.prototype.hasOwnProperty,rB=function(e){if(!rS(e))return rT(e);var t=[];for(var n in Object(e))rH.call(e,n)&&"constructor"!=n&&t.push(n);return t},rF=function(e){return null!=e&&rk(e.length)&&!i0(e)},rN=function(e){return rF(e)?r_(e):rB(e)},rU=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},rI=Object.prototype.hasOwnProperty,rY=function(e){if(!ir(e))return rU(e);var t=rS(e),n=[];for(var i in e)("constructor"!=i||!t&&rI.call(e,i))&&n.push(i);return n},rX=function(e){return rF(e)?r_(e,!0):rY(e)},rz=nv(function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,r=i&&i.exports===n?is.Buffer:void 0,o=r?r.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,i=o?o(n):new e.constructor(n);return e.copy(i),i}}),rq=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t},rV=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o},rW=function(){return[]},r$=Object.prototype.propertyIsEnumerable,rG=Object.getOwnPropertySymbols,rK=rG?function(e){return null==e?[]:rV(rG(e=Object(e)),function(t){return r$.call(e,t)})}:rW,rJ=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e},rZ=rj(Object.getPrototypeOf,Object),rQ=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)rJ(t,rK(e)),e=rZ(e);return t}:rW,r0=function(e,t,n){var i=t(e);return rb(e)?i:rJ(i,n(e))},r1=function(e){return r0(e,rN,rK)},r2=function(e){return r0(e,rX,rQ)},r3=i8(is,"DataView"),r6=i8(is,"Promise"),r4=i8(is,"Set"),r9=i8(is,"WeakMap"),r8="[object Map]",r5="[object Promise]",r7="[object Set]",oe="[object WeakMap]",ot="[object DataView]",on=i6(r3),oi=i6(i5),or=i6(r6),oo=i6(r4),oa=i6(r9),os=iw;(r3&&os(new r3(new ArrayBuffer(1)))!=ot||i5&&os(new i5)!=r8||r6&&os(r6.resolve())!=r5||r4&&os(new r4)!=r7||r9&&os(new r9)!=oe)&&(os=function(e){var t=iw(e),n="[object Object]"==t?e.constructor:void 0,i=n?i6(n):"";if(i)switch(i){case on:return ot;case oi:return r8;case or:return r5;case oo:return r7;case oa:return oe}return t});var ou=os,ol=Object.prototype.hasOwnProperty,oc=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ol.call(e,"index")&&(n.index=e.index,n.input=e.input),n},oh=is.Uint8Array,od=function(e){var t=new e.constructor(e.byteLength);return new oh(t).set(new oh(e)),t},of=function(e,t){var n=t?od(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},op=/\w*$/,ov=function(e){var t=new e.constructor(e.source,op.exec(e));return t.lastIndex=e.lastIndex,t},og=id?id.prototype:void 0,oy=og?og.valueOf:void 0,om=function(e,t){var n=t?od(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},ob=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return od(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return of(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return om(e,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return ov(e);case"[object Symbol]":return oy?Object(oy.call(e)):{}}},oD=Object.create,ow=function(){function e(){}return function(t){if(!ir(t))return{};if(oD)return oD(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),oE=function(e){return"function"!=typeof e.constructor||rS(e)?{}:ow(rZ(e))},ox=rL&&rL.isMap,ok=ox?rM(ox):function(e){return iE(e)&&"[object Map]"==ou(e)},oP=rL&&rL.isSet,oM=oP?rM(oP):function(e){return iE(e)&&"[object Set]"==ou(e)},oL="[object Arguments]",oA="[object Function]",oO="[object Object]",oC={};oC[oL]=oC["[object Array]"]=oC["[object ArrayBuffer]"]=oC["[object DataView]"]=oC["[object Boolean]"]=oC["[object Date]"]=oC["[object Float32Array]"]=oC["[object Float64Array]"]=oC["[object Int8Array]"]=oC["[object Int16Array]"]=oC["[object Int32Array]"]=oC["[object Map]"]=oC["[object Number]"]=oC[oO]=oC["[object RegExp]"]=oC["[object Set]"]=oC["[object String]"]=oC["[object Symbol]"]=oC["[object Uint8Array]"]=oC["[object Uint8ClampedArray]"]=oC["[object Uint16Array]"]=oC["[object Uint32Array]"]=!0,oC["[object Error]"]=oC[oA]=oC["[object WeakMap]"]=!1;var o_=function e(t,n,i,r,o,a){var s,u=1&n,l=2&n,c=4&n;if(i&&(s=o?i(t,r,o,a):i(t)),void 0!==s)return s;if(!ir(t))return t;var h=rb(t);if(h){if(s=oc(t),!u)return rq(t,s)}else{var d,f,p,v,g=ou(t),y=g==oA||"[object GeneratorFunction]"==g;if(rw(t))return rz(t,u);if(g==oO||g==oL||y&&!o){if(s=l||y?{}:oE(t),!u)return l?(f=(d=s)&&rd(t,rX(t),d),rd(t,rQ(t),f)):(v=(p=s)&&rd(t,rN(t),p),rd(t,rK(t),v))}else{if(!oC[g])return o?t:{};s=ob(t,g,u)}}a||(a=new ra);var m=a.get(t);if(m)return m;a.set(t,s),oM(t)?t.forEach(function(r){s.add(e(r,n,i,r,t,a))}):ok(t)&&t.forEach(function(r,o){s.set(o,e(r,n,i,o,t,a))});var b=h?void 0:(c?l?r2:r1:l?rX:rN)(t);return rs(b||t,function(r,o){b&&(r=t[o=r]),rh(s,o,e(r,n,i,o,t,a))}),s},oR=function(e){return o_(e,5)},oS=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i};function oj(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ro;++t<n;)this.add(e[t])}oj.prototype.add=oj.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oj.prototype.has=function(e){return this.__data__.has(e)};var oT,oH,oB,oF,oN,oU,oI=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1},oY=function(e,t,n,i,r,o){var a=1&n,s=e.length,u=t.length;if(!(s==u||a&&u>s))return!1;var l=o.get(e),c=o.get(t);if(l&&c)return l==t&&c==e;var h=-1,d=!0,f=2&n?new oj:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],v=t[h];if(i)var g=a?i(v,p,h,t,e,o):i(p,v,h,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!oI(t,function(e,t){if(!f.has(t)&&(p===e||r(p,e,n,i,o)))return f.push(t)})){d=!1;break}}else if(p!==v&&!r(p,v,n,i,o)){d=!1;break}}return o.delete(e),o.delete(t),d},oX=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n},oz=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},oq=id?id.prototype:void 0,oV=oq?oq.valueOf:void 0,oW=function(e,t,n,i,r,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new oh(e),new oh(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return iG(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=oX;case"[object Set]":if(s||(s=oz),e.size!=t.size&&!(1&i))break;var u=a.get(e);if(u)return u==t;i|=2,a.set(e,t);var l=oY(s(e),s(t),i,r,o,a);return a.delete(e),l;case"[object Symbol]":if(oV)return oV.call(e)==oV.call(t)}return!1},o$=Object.prototype.hasOwnProperty,oG=function(e,t,n,i,r,o){var a=1&n,s=r1(e),u=s.length;if(u!=r1(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:o$.call(t,c)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++l<u;){var v=e[c=s[l]],g=t[c];if(i)var y=a?i(g,v,c,t,e,o):i(v,g,c,e,t,o);if(!(void 0===y?v===g||r(v,g,n,i,o):y)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var m=e.constructor,b=t.constructor;m==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f},oK="[object Arguments]",oJ="[object Array]",oZ="[object Object]",oQ=Object.prototype.hasOwnProperty,o0=function(e,t,n,i,r,o){var a=rb(e),s=rb(t),u=a?oJ:ou(e),l=s?oJ:ou(t),c=(u=u==oK?oZ:u)==oZ,h=(l=l==oK?oZ:l)==oZ,d=u==l;if(d&&rw(e)){if(!rw(t))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new ra),a||rO(e)?oY(e,t,n,i,r,o):oW(e,t,u,n,i,r,o);if(!(1&n)){var f=c&&oQ.call(e,"__wrapped__"),p=h&&oQ.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,g=p?t.value():t;return o||(o=new ra),r(v,g,n,i,o)}}return!!d&&(o||(o=new ra),oG(e,t,n,i,r,o))},o1=function(e,t){return function e(t,n,i,r,o){return t===n||(null!=t&&null!=n&&(iE(t)||iE(n))?o0(t,n,i,r,e,o):t!=t&&n!=n)}(e,t)},o2=function(e,t,n){(void 0===n||iG(e[t],n))&&(void 0!==n||t in e)||rl(e,t,n)},o3=function(e,t,n){for(var i=-1,r=Object(e),o=n(e),a=o.length;a--;){var s=o[++i];if(!1===t(r[s],s,r))break}return e},o6=Function.prototype.toString,o4=Object.prototype.hasOwnProperty,o9=o6.call(Object),o8=function(e){if(!iE(e)||"[object Object]"!=iw(e))return!1;var t=rZ(e);if(null===t)return!0;var n=o4.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&o6.call(n)==o9},o5=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},o7=function(e,t,n,i,r,o,a){var s=o5(e,n),u=o5(t,n),l=a.get(u);if(l)o2(e,n,l);else{var c=o?o(s,u,n+"",e,t,a):void 0,h=void 0===c;if(h){var d=rb(u),f=!d&&rw(u),p=!d&&!f&&rO(u);c=u,d||f||p?rb(s)?c=s:iE(s)&&rF(s)?c=rq(s):f?(h=!1,c=rz(u,!0)):p?(h=!1,c=om(u,!0)):c=[]:o8(u)||rm(u)?(c=s,rm(s)?c=rd(s,rX(s)):ir(s)&&!i0(s)||(c=oE(u))):h=!1}h&&(a.set(u,c),r(c,u,i,o,a),a.delete(u)),o2(e,n,c)}},ae=function e(t,n,i,r,o){t!==n&&o3(n,function(a,s){if(o||(o=new ra),ir(a))o7(t,n,s,i,e,r,o);else{var u=r?r(o5(t,s),a,s+"",t,n,o):void 0;void 0===u&&(u=a),o2(t,s,u)}},rX)},at=function(e){return e},an=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},ai=Math.max,ar=function(e,t,n){return t=ai(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,o=ai(i.length-t,0),a=Array(o);++r<o;)a[r]=i[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=i[r];return s[t]=n(a),an(e,this,s)}},ao=Date.now,aa=(oT=ru?function(e,t){return ru(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:at,oH=0,oB=0,function(){var e=ao(),t=16-(e-oB);if(oB=e,t>0){if(++oH>=800)return arguments[0]}else oH=0;return oT.apply(void 0,arguments)}),as=function(e,t,n){if(!ir(n))return!1;var i=typeof t;return!!("number"==i?rF(n)&&rx(t,n.length):"string"==i&&t in n)&&iG(n[t],e)},au=(oF=function(e,t,n){ae(e,t,n)},aa(ar(oN=function(e,t){var n=-1,i=t.length,r=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(r=oF.length>3&&"function"==typeof r?(i--,r):void 0,o&&as(t[0],t[1],o)&&(r=3>i?void 0:r,i=1),e=Object(e);++n<i;){var a=t[n];a&&oF(e,a,n,r)}return e},void 0,at),oN+"")),al=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r},ac=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n},ah=function(e){var t=ou(e);return"[object Map]"==t?oX(e):"[object Set]"==t?ac(e):al(rN(e),function(t){return[t,e[t]]})},ad=nv(function(e){!function(t,n,i){if(t){for(var r,o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l=1;20>l;++l)o[111+l]="f"+l;for(l=0;9>=l;++l)o[l+96]=""+l;p.prototype.bind=function(e,t,n){return this._bindMultiple.call(this,e=e instanceof Array?e:[e],t,n),this},p.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},p.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},p.prototype.reset=function(){return this._callbacks={},this._directMap={},this},p.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1||function e(t,i){return null!==t&&t!==n&&(t===i||e(t.parentNode,i))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var i=e.composedPath()[0];i!==e.target&&(t=i)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},p.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},p.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);r=null},p.init=function(){var e=p(n);for(var t in e)"_"!==t.charAt(0)&&(p[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},p.init(),t.Mousetrap=p,e.exports&&(e.exports=p)}function c(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function h(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return o[e.which]?o[e.which]:a[e.which]?a[e.which]:String.fromCharCode(e.which).toLowerCase()}function d(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function f(e,t){var n,i,a,l,c,h,f=[];for(l="+"===(n=e)?["+"]:(n=n.replace(/\+{2}/g,"+plus")).split("+"),h=0;l.length>h;++h)u[c=l[h]]&&(c=u[c]),t&&"keypress"!=t&&s[c]&&(c=s[c],f.push("shift")),d(c)&&f.push(c);return{key:c,modifiers:f,action:(i=c,(a=t)||(a=function(){if(!r)for(var e in r={},o)e>95&&112>e||o.hasOwnProperty(e)&&(r[o[e]]=e);return r}()[i]?"keydown":"keypress"),"keypress"==a&&f.length&&(a="keydown"),t=a)}}function p(e){var t=this;if(e=e||n,!(t instanceof p))return new p(e);t.target=e,t._callbacks={},t._directMap={};var i,r={},o=!1,a=!1,s=!1;function u(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(s=!1)}function l(e,n,i,o,a,s){var u,l,c,h=[],f=i.type;if(!t._callbacks[e])return[];for("keyup"==f&&d(e)&&(n=[e]),u=0;t._callbacks[e].length>u;++u)l=t._callbacks[e][u],!o&&l.seq&&r[l.seq]!=l.level||f!=l.action||("keypress"!=f||i.metaKey||i.ctrlKey)&&(c=l.modifiers,n.sort().join(",")!==c.sort().join(","))||((!o&&l.combo==a||o&&l.seq==o&&l.level==s)&&t._callbacks[e].splice(u,1),h.push(l));return h}function v(e,n,i,r){t.stopCallback(n,n.target||n.srcElement,i,r)||!1===e(n,i)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)}function g(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n,i=h(e);i&&("keyup"!=e.type||o!==i?t.handleKey(i,(n=[],e.shiftKey&&n.push("shift"),e.altKey&&n.push("alt"),e.ctrlKey&&n.push("ctrl"),e.metaKey&&n.push("meta"),n),e):o=!1)}t._handleKey=function(e,t,n){var i,r=l(e,t,n),o={},c=0,h=!1;for(i=0;r.length>i;++i)r[i].seq&&(c=Math.max(c,r[i].level));for(i=0;r.length>i;++i)if(r[i].seq){if(r[i].level!=c)continue;h=!0,o[r[i].seq]=1,v(r[i].callback,n,r[i].combo,r[i].seq)}else h||v(r[i].callback,n,r[i].combo);var f="keypress"==n.type&&a;n.type!=s||d(e)||f||u(o),a=h&&"keydown"==n.type},t._bindMultiple=function(e,n,a){for(var c=0;e.length>c;++c)(function e(n,a,c,d,p){t._directMap[n+":"+c]=a;var g,y=(n=n.replace(/\s+/g," ")).split(" ");y.length>1?function(t,n,a,l){function c(e){v(a,e,t),"keyup"!==l&&(o=h(e)),setTimeout(u,10)}r[t]=0;for(var d=0;n.length>d;++d){var p=d+1===n.length?c:function(e){return function(){s=e,++r[t],clearTimeout(i),i=setTimeout(u,1e3)}}(l||f(n[d+1]).action);e(n[d],p,l,t,d)}}(n,y,a,c):(g=f(n,c),t._callbacks[g.key]=t._callbacks[g.key]||[],l(g.key,g.modifiers,{type:g.action},d,n,p),t._callbacks[g.key][d?"unshift":"push"]({callback:a,modifiers:g.modifiers,action:g.action,seq:d,level:p,combo:n}))})(e[c],n,a)},c(e,"keypress",g),c(e,"keydown",g),c(e,"keyup",g)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)}),af=function(e){return e&&e.length?e[0]:void 0},ap=(oU=1,function(e){return"".concat(e,"-").concat(oU++)}),av=function(e,t){var n,i;return!(!e||!t||(null===(n=e.properties)||void 0===n?void 0:n.id)!==(null===(i=t.properties)||void 0===i?void 0:i.id))},ag=function(e){var t=e.target,n=e.targetHandler,i=e.otherHandler;return e.data.map(function(e,r){var o,a=av(e,t)?n:i;return null!==(o=null==a?void 0:a(e,r))&&void 0!==o?o:e})},ay=function(){return{id:ap("point"),isHover:!1,isActive:!1,isDrag:!1,createTime:Date.now()}},am=function(){return{id:ap("line"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},ab=function(){return{id:ap("polygon"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},aD=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tL(e,ts(ts({},ay()),t))},aw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"Feature",properties:ts(ts({},am()),{},{nodes:e},t),geometry:{type:"LineString",coordinates:tz(tC(e))}}},aE=function(e){return tO(e,{id:ap("dashLine")})},ax=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"Feature",properties:ts(ts({},ab()),{},{nodes:e},t),geometry:{type:"Polygon",coordinates:[tz(tC([].concat(tD(e),[af(e)])))]}}},ak=function(e){return function(e,t,n){void 0===n&&(n={});for(var i=t2(e).coordinates,r=0,o=0;i.length>o&&(r>t||o!==i.length-1);o++){if(r>=t){var a=t-r;if(a){var s=nH(i[o],i[o-1])-180;return nT(i[o],a,s,n)}return tL(i[o])}r+=nS(i[o],i[o+1],n)}return tL(i[i.length-1])}(e,n5(e,{units:"meters"})/2,{units:"meters"})},aP=function(e,t){var n=t.format,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];if(t.showTotalDistance){var o=ak(e),a=n5(e,{units:"meters"}),s=tz(e).map(function(e){return tL(e)});o.properties=ts({id:ap("text"),isActive:!1,meters:a,text:n(a,s),type:"totalDistance"},i),r.push(o)}else for(var u=e.geometry.coordinates,l=0;u.length-1>l;l++){var c=tL(u[l]),h=tL(u[l+1]),d=nS(c,h,{units:"meters"}),f=nB(tC([c,h]));f.properties=ts({id:ap("text"),isActive:!1,meters:d,text:n(d,[c,h]),type:"distance"},i),r.push(f)}return r},aM=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.format,r=tV(e,function(e,t){return e+function(e){var t,n=0;switch(e.type){case"Polygon":return n4(e.coordinates);case"MultiPolygon":for(t=0;e.coordinates.length>t;t++)n+=n4(e.coordinates[t]);return n}return 0}(t)},0);return function e(t,n){switch(void 0===n&&(n={}),t3(t)){case"Point":return tL(t0(t),n.properties);case"Polygon":var i=[];tI(t,function(e){i.push(e)});var r,o,a,s,u,l,c,h,d=nF(t,{properties:n.properties}),f=d.geometry.coordinates,p=0,v=0,g=0,y=i.map(function(e){return[e[0]-f[0],e[1]-f[1]]});for(r=0;i.length-1>r;r++)g+=h=(s=(o=y[r])[0])*(c=(a=y[r+1])[1])-(u=a[0])*(l=o[1]),p+=(s+u)*h,v+=(l+c)*h;if(0===g)return d;var m=1/(.5*g*6);return tL([f[0]+m*p,f[1]+m*v],n.properties);default:var b=function(e,t){void 0===t&&(t={}),t.concavity=t.concavity||1/0;var n=[];if(tI(e,function(e){n.push([e[0],e[1]])}),!n.length)return null;var i=nw(n,t.concavity);return i.length>3?tA([i]):null}(t);return b?e(b,{properties:n.properties}):nF(t,{properties:n.properties})}}(e,{properties:ts({meters:r,text:i(r,e),type:"area",isActive:!1},n)})},aL=function(e){var t,n,i,r,o,a,s=e.getContainer();return null!==(t=null!==(n=null!==(i=null!==(r=null!==(o=null!==(a=null==s?void 0:s.querySelector(".l7-marker-container"))&&void 0!==a?a:null==s?void 0:s.querySelector(".BMap_mask"))&&void 0!==o?o:e.getMapCanvasContainer())&&void 0!==r?r:null==s?void 0:s.querySelector(".l7-scene"))&&void 0!==i?i:null==s?void 0:s.querySelector(".l7-control-container"))&&void 0!==n?n:null==s?void 0:s.querySelector(".l7-marker-container2"))&&void 0!==t?t:null},aA=function(e){return e.lngLat||e.lnglat},aO=function(e){var t=aA(e);return[t.lng,t.lat]},aC=function(e){return[e.lng,e.lat]},a_=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,i=e.length,r=0;i>r;r++)t>e[r]&&(t=e[r],n=r);return n},aR=function(e,t){var n=[],i=[];return e.forEach(function(e){o1(e,t)?i.length&&(n.push(i),i=[]):i.push(e)}),i.length&&n.push(i),n},aS=function(e,t,n){var i=[],r=[],o=[];return(i="allDrawData"===e?aY.instances.map(function(e){return e.getData()}).flat():"drawData"===e?t.getData():e instanceof Function?e(n):e).length&&((r=i.map(function(e){var t,i=null!==(t=e.properties)&&void 0!==t?t:{},r=i.nodes,o=void 0===r?[]:r,a=i.isActive;return void 0!==a&&a?o.filter(function(e){return!o1(e.geometry.coordinates,n)}):o}).flat().filter(function(e){return e})).length||(r=tz(tC(i)).map(function(e){return tL(e)})),(o=i.map(function(e){var t,i,r=null===(t=e.properties)||void 0===t?void 0:t.line;return(null===(i=e.properties)||void 0===i?void 0:i.isActive)&&r?aR(r.properties.nodes.map(function(e){return e.geometry.coordinates}),n).filter(function(e){return e.length>1}).map(function(e){return tO(e)}):[r]}).flat().filter(function(e){return e})).length||i.forEach(function(e){var t=t3(e);if(/linestring/i.test(t)&&o.push(e),/polygon/i.test(t)){var n,i,r=function(e,t){void 0===t&&(t={});var n,i,r,o,a,s=t2(e);switch(t.properties||"Feature"!==e.type||(t.properties=e.properties),s.type){case"Polygon":return void 0===(n=t)&&(n={}),n7(t2(s).coordinates,n.properties?n.properties:"Feature"===s.type?s.properties:{});case"MultiPolygon":return void 0===(i=t)&&(i={}),r=t2(s).coordinates,o=i.properties?i.properties:"Feature"===s.type?s.properties:{},a=[],r.forEach(function(e){a.push(n7(e,o))}),tC(a);default:throw Error("invalid poly")}}(e);return(n=o).push.apply(n,tD(null!==(i=null==r?void 0:r.features)&&void 0!==i?i:[r]))}})),{points:r,lines:o}},aj=function(e,t,n,i){var r=n.pointAdsorbPixel,o=tb(e,2),a=i.lngLatToPixel([o[0],o[1]]),s=a.x,u=a.y,l=t.map(function(e){var t=tb(e.geometry.coordinates,2),n=i.lngLatToPixel([t[0],t[1]]),r=n.y;return Math.pow(s-n.x,2)+Math.pow(u-r,2)}),c=a_(l);return Math.pow(l[c],.5)>r?null:t[c].geometry.coordinates},aT=function(e,t,n,i){var r=n.lineAdsorbPixel,o=tb(e,2),a=i.lngLatToPixel([o[0],o[1]]),s=a.x,u=a.y,l=t.filter(function(e){return tz(e).length>1}).map(function(t){var n,i,r;return void 0===n&&(n={}),i=tL([1/0,1/0],{dist:1/0}),r=0,tW(t,function(t){for(var o=t1(t),a=0;o.length-1>a;a++){var s=tL(o[a]);s.properties.dist=nS(e,s,n);var u=tL(o[a+1]);u.properties.dist=nS(e,u,n);var l=nS(s,u,n),c=Math.max(s.properties.dist,u.properties.dist),h=nH(s,u),d=nT(e,c,h+90,n),f=nT(e,c,h-90,n),p=function(e,t){var n={},i=[];if("LineString"===e.type&&(e=tM(e)),"LineString"===t.type&&(t=tM(t)),"Feature"===e.type&&"Feature"===t.type&&null!==e.geometry&&null!==t.geometry&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var r=n6(e,t);return r&&i.push(r),tC(i)}var o=n3();return o.load(nN(t)),tX(nN(e),function(e){tX(o.search(e),function(t){var r=n6(e,t);if(r){var o=t1(r).join(",");n[o]||(n[o]=!0,i.push(r))}})}),tC(i)}(tO([d.geometry.coordinates,f.geometry.coordinates]),tO([s.geometry.coordinates,u.geometry.coordinates])),v=null;p.features.length>0&&((v=p.features[0]).properties.dist=nS(e,v,n),v.properties.location=r+nS(s,v,n)),i.properties.dist>s.properties.dist&&((i=s).properties.index=a,i.properties.location=r),i.properties.dist>u.properties.dist&&((i=u).properties.index=a+1,i.properties.location=r+l),v&&i.properties.dist>v.properties.dist&&((i=v).properties.index=a),r+=l}}),i});if(!l.length)return null;var c=l.map(function(e){var t=tb(e.geometry.coordinates,2),n=i.lngLatToPixel([t[0],t[1]]),r=n.y;return Math.pow(s-n.x,2)+Math.pow(u-r,2)}),h=a_(c);return Math.pow(c[h],.5)>r?null:l[h].geometry.coordinates},aH=function(e,t){var n=tb(t,2),i=n[0],r=n[1];e.lngLat&&(e.lngLat={lng:i,lat:r}),e.lnglat&&(e.lnglat={lng:i,lat:r})},aB=function(){function e(t,n){tl(this,e),this.container=void 0,this.cursor=null,this.options=void 0,this.container=aL(t),this.options=n}return th(e,[{key:"setCursor",value:function(e){e!==this.cursor&&this.container&&(this.container.style.cursor=e?this.options[e]:"",this.cursor=e)}},{key:"destroy",value:function(){this.setCursor(null)}}]),e}();function aF(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}aF('.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}'),aF(".tippy-box[data-theme~=light]{color:#26323d;box-shadow:0 0 20px 4px rgba(154,161,177,.15),0 4px 80px -8px rgba(36,40,47,.25),0 4px 4px -2px rgba(91,94,105,.15);background-color:#fff}.tippy-box[data-theme~=light][data-placement^=top]>.tippy-arrow:before{border-top-color:#fff}.tippy-box[data-theme~=light][data-placement^=bottom]>.tippy-arrow:before{border-bottom-color:#fff}.tippy-box[data-theme~=light][data-placement^=left]>.tippy-arrow:before{border-left-color:#fff}.tippy-box[data-theme~=light][data-placement^=right]>.tippy-arrow:before{border-right-color:#fff}.tippy-box[data-theme~=light]>.tippy-backdrop{background-color:#fff}.tippy-box[data-theme~=light]>.tippy-svg-arrow{fill:#fff}");var aN=function(){function t(n,i){var r=this;tl(this,t),this.content="",this.tippy=void 0,this.scene=void 0,this.isMouseInner=!1,this.onMouseMove=function(){r.isMouseInner=!0,r.checkTippyShow()},this.onMouseOut=function(){r.isMouseInner=!1,r.checkTippyShow()},this.setContent=i_(function(e){var t;r.content=null!=e?e:"",null===(t=r.tippy)||void 0===t||t.setContent(null!=e?e:""),r.checkTippyShow()},16,{maxWait:16});var o=aL(n);this.scene=n,o&&(this.tippy=eG(aL(n),ts(ts({},tr),i)),this.tippy.hide(),n.on(e.SceneEvent.Mousemove,this.onMouseMove),n.on(e.SceneEvent.Mouseout,this.onMouseOut))}return th(t,[{key:"getContent",value:function(){return this.content}},{key:"checkTippyShow",value:function(){var e,t;this.content&&this.isMouseInner?null===(e=this.tippy)||void 0===e||e.show():null===(t=this.tippy)||void 0===t||t.hide()}},{key:"destroy",value:function(){var t;this.scene.off(e.SceneEvent.Mousemove,this.onMouseMove),this.scene.off(e.SceneEvent.Mouseout,this.onMouseOut),null===(t=this.tippy)||void 0===t||t.destroy()}}]),t}(),aU=function(){function e(t){var n=t.config;tl(this,e),this.historyList=[],this.historyIndex=0,this.config=void 0,this.config=n}return th(e,[{key:"save",value:function(e){if(this.config){var t=this.config.maxSize;this.historyIndex&&(this.historyList=this.historyList.slice(this.historyIndex),this.historyIndex=0),t>this.historyList.length||this.historyList.pop();var n=oR(e);return this.historyList.unshift(n),n}}},{key:"revert",value:function(){if(this.historyList.length&&this.historyList.length-1>this.historyIndex){var e=this.historyList[++this.historyIndex];return e?oR(e):void 0}}},{key:"redo",value:function(){if(this.historyList.length&&this.historyIndex>0){var e=this.historyList[--this.historyIndex];return e?oR(e):void 0}}}]),e}(),aI=function(t){tf(i,t);var n=ty(i);function i(e){var t,r=e.data,o=e.render,a=e.history,u=e.scene;return tl(this,i),(t=n.call(this)).scene=void 0,t.render=void 0,t.data=oR(s),t.timeout=null,t.diffData={},t.history=void 0,t.scene=u,t.render=o,a&&(t.history=new aU({config:a})),r&&t.setData(r),t}return th(i,[{key:"saveHistory",value:function(){var e;return null===(e=this.history)||void 0===e?void 0:e.save(this.data)}},{key:"revertHistory",value:function(){var e,t=null===(e=this.history)||void 0===e?void 0:e.revert();if(t)return this.setData(t),t}},{key:"redoHistory",value:function(){var e,t=null===(e=this.history)||void 0===e?void 0:e.redo();if(t)return this.setData(t),t}},{key:"setData",value:function(t){var n=this;return Object.keys(t).length&&(this.data=ts(ts({},this.data),t),this.diffData=ts(ts({},this.diffData),t),this.timeout||(this.timeout=requestAnimationFrame(function(){return n.updateDiffData()})),this.emit(e.SourceEvent.Change,{data:this.data})),this.data}},{key:"getData",value:function(){return this.data}},{key:"getRenderData",value:function(e){return this.data[e]}},{key:"setRenderData",value:function(t,n){var i="function"==typeof n?n(this.getRenderData(t)):n;return this.setData(td({},t,i)),this.emit(e.SourceEvent.Change,this.data),i}},{key:"updateDiffData",value:function(){var t=this,n=Object.entries(this.diffData);n.length&&(n.forEach(function(e){var n,i=tb(e,2),r=i[0],o=i[1];Array.isArray(o)&&(null===(n=t.getRender(r))||void 0===n||n.setData(o))}),this.emit(e.SourceEvent.Update,this.data,this.diffData),this.diffData={},this.timeout=null,requestAnimationFrame(function(){t.scene.render()}))}},{key:"getRender",value:function(e){return this.render[e]}},{key:"clear",value:function(){this.setData(oS(Object.keys(this.render).map(function(e){return[e,[]]})))}}]),i}(ie),aY=function(t){tf(i,t);var n=ty(i);function i(t,r){tl(this,i),(o=n.call(this)).scene=void 0,o.source=void 0,o.render=void 0,o.cursor=void 0,o.options=void 0,o.enabled=!1,o.allowCreate=!1,o.sceneRender=void 0,o.mouseLngLat={lng:0,lat:0},o.popup=void 0,o.addCount=0,o.saveMouseLngLat=i_(function(e){o.mouseLngLat=aA(e)},100,{maxWait:100}),o.saveHistory=i_(function(){o.options.history&&o.source.saveHistory()},100),o.bindThis(),o.scene=t,o.sceneRender=new iH(t),o.options=au({},o.getDefaultOptions(r),r),o.render=o.initRender(),o.source=new aI({render:o.render,history:o.options.history||void 0,scene:t}),o.cursor=new aB(t,o.options.cursor);var o,a=o.options,s=a.initialData,u=a.popup;return s&&o.setData(s),u&&(o.popup=new aN(t,u instanceof Object?u:{})),o.saveHistory(),o.bindCommonEvent(),o.emit(e.DrawEvent.Init,tg(o)),o.bindEnableEvent(),i.instances.push(tg(o)),o}return th(i,[{key:"addable",get:function(){var e=this.getData(),t=this.options,n=t.multiple,i=t.maxCount,r=e.find(function(e){return e.properties.isDraw});return!(!this.enabled||!this.allowCreate)&&(!!(n&&0>=i||r)||!(!n&&this.addCount>=1)&&(0>=i||i>e.length))}},{key:"getOptions",value:function(){return this.options}},{key:"getEditItem",value:function(){return this.editItem}},{key:"getDragItem",value:function(){return this.dragItem}},{key:"setHelper",value:function(e){var t,n,i=this.options.helper;if(i){var r=null!==(t=e in i?i[e]:e)&&void 0!==t?t:null;null===(n=this.popup)||void 0===n||n.setContent(r)}}},{key:"isEnable",value:function(){return this.enabled}},{key:"bindThis",value:function(){this.initRender=this.initRender.bind(this),this.getData=this.getData.bind(this),this.setData=this.setData.bind(this),this.emitChangeEvent=this.emitChangeEvent.bind(this),this.saveHistory=this.saveHistory.bind(this),this.onSceneMouseMove=this.onSceneMouseMove.bind(this),this.revertHistory=this.revertHistory.bind(this),this.redoHistory=this.redoHistory.bind(this),this.removeActiveFeature=this.removeActiveFeature.bind(this),this.bindCommonEvent=this.bindCommonEvent.bind(this),this.bindEnableEvent=this.bindEnableEvent.bind(this),this.unbindEnableEvent=this.unbindEnableEvent.bind(this),this.setActiveFeature=this.setActiveFeature.bind(this)}},{key:"bindCommonEvent",value:function(){var t=this;this.on(e.DrawEvent.Add,this.emitChangeEvent),this.on(e.DrawEvent.Add,function(){t.addCount++}),this.on(e.DrawEvent.Edit,this.emitChangeEvent),this.on(e.DrawEvent.Remove,this.emitChangeEvent),this.on(e.DrawEvent.Clear,this.emitChangeEvent),this.on(e.DrawEvent.AddNode,this.saveHistory),this.on(e.DrawEvent.RemoveNode,this.emitChangeEvent),this.bindEmitSelectEvent(!0)}},{key:"bindEmitSelectEvent",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=null,r=function(){var n,r,o,a=t.getData().find(function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.isActive})||null;(null===(n=i)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.id)!==(null==a||null===(o=a.properties)||void 0===o?void 0:o.id)&&(i=a,t.emit(e.DrawEvent.Select,a))};this.source.on(e.SourceEvent.Change,r),n&&r()}},{key:"bindEnableEvent",value:function(){this.unbindKeyboardEvent(),this.scene.setMapStatus({doubleClickZoom:!1}),this.scene.on(e.SceneEvent.Mousemove,this.saveMouseLngLat),this.bindKeyboardEvent()}},{key:"unbindEnableEvent",value:function(){this.scene.setMapStatus({doubleClickZoom:!0}),this.scene.off(e.SceneEvent.Mousemove,this.saveMouseLngLat),this.unbindKeyboardEvent()}},{key:"bindKeyboardEvent",value:function(){var e=this,t=this.options.keyboard||{},n=t.revert,i=t.redo,r=t.remove;r&&ad.bind(r,function(){e.removeActiveFeature()}),this.options.history&&(n&&ad.bind(n,this.revertHistory),i&&ad.bind(i,this.redoHistory))}},{key:"unbindKeyboardEvent",value:function(){var e=this.options.keyboard||{},t=e.revert,n=e.redo,i=e.remove;i&&ad.unbind(i),this.options.history&&(t&&ad.unbind(t),n&&ad.unbind(n))}},{key:"emitChangeEvent",value:function(){this.emit(e.DrawEvent.Change,this.getData()),this.saveHistory()}},{key:"revertHistory",value:function(){this.enabled&&this.options.history&&this.source.revertHistory()&&(this.correctDrawItem(),this.emit(e.DrawEvent.Change,this.getData()))}},{key:"redoHistory",value:function(){this.enabled&&this.options.history&&this.source.redoHistory()&&(this.correctDrawItem(),this.emit(e.DrawEvent.Change,this.getData()))}},{key:"getRenderLayers",value:function(){return oS(ah(this.render).map(function(e){var t=tb(e,2);return[t[0],t[1].getLayers()]}))}},{key:"getTargetFeature",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getData(),r=null;return e&&!(r=null!==(t=i.find(function(t){var n;return t.properties.id===("string"==typeof e?e:null===(n=e.properties)||void 0===n?void 0:n.id)}))&&void 0!==t?t:null)&&e instanceof Object&&(r=null!==(n=i.find(function(t){return o1(e.geometry,t.geometry)}))&&void 0!==n?n:null),r}},{key:"removeActiveFeature",value:function(){var e=this.getData().find(function(e){var t=e.properties;return t.isActive||t.isDraw});return e&&this.removeFeature(e),e}},{key:"removeFeature",value:function(t){var n=this.getData(),i=this.getTargetFeature(t);i&&(this.setData(n.filter(function(e){return!av(i,e)})),this.emit(e.DrawEvent.Remove,t,this.getData()))}},{key:"correctDrawItem",value:function(){this.getData().find(function(e){return e.properties.isDraw})&&this.onSceneMouseMove({type:"mousemove",lnglat:this.mouseLngLat,lngLat:this.mouseLngLat})}},{key:"initRender",value:function(){var e,t={},n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tw(e))){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return e.length>i?{done:!1,value:e[i++]}:{done:!0}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.getRenderTypes());try{for(n.s();!(e=n.n()).done;){var i=e.value;t[i]=new iF[i](this.scene,{style:this.options.style[i]})}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"getCommonOptions",value:function(e){return{initialData:[],autoActive:!0,cursor:oR(a),editable:!0,style:oR(i$),multiple:!0,history:oR(tn),keyboard:oR(ti),popup:!0,helper:{},maxCount:-1}}},{key:"setCursor",value:function(e){this.cursor.setCursor(e)}},{key:"resetCursor",value:function(){this.setCursor(this.addable?"draw":null)}},{key:"enable",value:function(){var t=this;this.allowCreate=0>=arguments.length||void 0===arguments[0]||arguments[0],this.addCount=0,this.enabled=!0,this.bindEnableEvent(),this.resetCursor(),this.setHelper(this.addable?"draw":null),setTimeout(function(){t.emit(e.DrawEvent.Enable,t)},0)}},{key:"disable",value:function(){var t=this;this.resetFeatures(),this.enabled=!1,this.setCursor(null),this.unbindEnableEvent(),this.addCount=0,this.setHelper(null),setTimeout(function(){t.emit(e.DrawEvent.Disable,t)},0)}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.source.clear(),this.emit(e.DrawEvent.Clear,this),t&&this.disable()}},{key:"show",value:function(){return Object.values(this.render).forEach(function(e){e.show()})}},{key:"hide",value:function(){return Object.values(this.render).forEach(function(e){e.hide()})}},{key:"destroy",value:function(){var t,n=this;Object.values(this.render).forEach(function(e){e.destroy()}),Object.values(e.RenderEvent).forEach(function(e){Object.values(n.render).forEach(function(t){t.removeAllListeners(e)}),n.sceneRender.removeAllListeners(e)}),setTimeout(function(){Object.values(e.DrawEvent).forEach(function(e){n.removeAllListeners(e)})},0),null===(t=this.popup)||void 0===t||t.destroy(),this.cursor.destroy(),this.emit(e.DrawEvent.Destroy,this);var r=i.instances.indexOf(this);r>-1&&i.instances.splice(r,1)}}]),i}(ie);aY.instances=[];var aX=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},az=function(t){tf(i,t);var n=ty(i);function i(){return tl(this,i),n.apply(this,arguments)}return th(i,[{key:"pointRender",get:function(){return this.render.point}},{key:"dragPoint",get:function(){return this.getPointData().find(function(e){return e.properties.isDrag})}},{key:"editPoint",get:function(){return this.getPointData().find(function(e){return e.properties.isActive})}},{key:"hoverPoint",get:function(){return this.getPointData().find(function(e){return e.properties.isHover})}},{key:"getDragPoint",value:function(){return this.dragPoint}},{key:"getEditPoint",value:function(){return this.editPoint}},{key:"getPointData",value:function(){return this.source.getRenderData("point")}},{key:"setPointData",value:function(e){return this.source.setRenderData("point",e)}},{key:"bindPointRenderEvent",value:function(){var t,n,i,r,o,a;null===(t=this.pointRender)||void 0===t||t.on(e.RenderEvent.UnClick,this.onPointCreate.bind(this)),null===(n=this.pointRender)||void 0===n||n.on(e.RenderEvent.Mousemove,this.onPointMouseMove.bind(this)),null===(i=this.pointRender)||void 0===i||i.on(e.RenderEvent.Mouseout,this.onPointMouseOut.bind(this)),null===(r=this.pointRender)||void 0===r||r.on(e.RenderEvent.Dragstart,this.onPointDragStart.bind(this)),null===(o=this.pointRender)||void 0===o||o.on(e.RenderEvent.Dragging,this.onPointDragging.bind(this)),null===(a=this.pointRender)||void 0===a||a.on(e.RenderEvent.Dragend,this.onPointDragEnd.bind(this))}},{key:"handleCreatePoint",value:function(e){var t=this.options,n=t.autoActive,i=t.editable,r=aD(e);return this.setPointData(function(e){return ag({target:r,data:[].concat(tD(e),[r]),targetHandler:function(e){e.properties=ts(ts({},e.properties),{},{isHover:i,isActive:n&&i})},otherHandler:function(e){e.properties=ts(ts({},e.properties),{},{isHover:!1,isActive:!1,isDrag:!1})}})}),r}},{key:"handlePointHover",value:function(e){return this.setCursor("pointHover"),av(e,this.hoverPoint)||this.setPointData(function(t){return ag({target:e,data:t,targetHandler:function(e){e.properties.isHover=!0},otherHandler:function(e){e.properties.isHover=!1}})}),e}},{key:"handlePointUnHover",value:function(e){return this.resetCursor(),this.setPointData(function(e){return e.map(function(e){return e.properties.isHover=!1,e})}),e}},{key:"handlePointDragStart",value:function(e){return this.setPointData(function(t){return ag({target:e,data:t,targetHandler:function(e){e.properties=ts(ts({},e.properties),{},{isDrag:!0,isActive:!0})},otherHandler:function(e){e.properties=ts(ts({},e.properties),{},{isDrag:!1,isActive:!1})}})}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),e}},{key:"handlePointDragging",value:function(e,t){return this.setPointData(function(n){return ag({target:e,data:n,targetHandler:function(e){e.geometry.coordinates=aC(t)}})}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),e}},{key:"handlePointDragEnd",value:function(e){return this.setPointData(function(t){return ag({target:e,data:t,targetHandler:function(e){e.properties.isDrag=!1}})}),this.scene.setMapStatus({dragEnable:!0}),this.setCursor("pointHover"),e}},{key:"onPointCreate",value:function(e){return this.handleCreatePoint(aC(aA(e)))}},{key:"onPointMouseMove",value:function(e){return this.handlePointHover(e.feature)}},{key:"onPointMouseOut",value:function(e){return this.handlePointUnHover(e.feature)}},{key:"onPointDragStart",value:function(e){if(this.options.editable)return this.handlePointDragStart(e.feature)}},{key:"onPointDragging",value:function(e){var t=this.dragPoint;if(this.options.editable&&t)return this.handlePointDragging(t,aA(e))}},{key:"onPointDragEnd",value:function(e){var t=this.dragPoint;if(this.options.editable&&t)return this.handlePointDragEnd(t)}},{key:"enablePointRenderAction",value:function(){var e,t,n,i,r=this.options.editable;this.enabled&&(null===(t=this.pointRender)||void 0===t||t.enableCreate()),null===(e=this.pointRender)||void 0===e||e.enableClick(),r&&(null===(n=this.pointRender)||void 0===n||n.enableHover(),null===(i=this.pointRender)||void 0===i||i.enableDrag())}},{key:"disablePointRenderAction",value:function(){var e,t,n,i;null===(e=this.pointRender)||void 0===e||e.disableCreate(),null===(t=this.pointRender)||void 0===t||t.disableHover(),null===(n=this.pointRender)||void 0===n||n.disableDrag(),null===(i=this.pointRender)||void 0===i||i.disableClick()}}]),i}(aY),aq=function(t){tf(i,t);var n=ty(i);function i(){return tl(this,i),n.apply(this,arguments)}return th(i,[{key:"midPointRender",get:function(){return this.render.midPoint}},{key:"getCommonOptions",value:function(e){return ts(ts({},tm(tp(i.prototype),"getCommonOptions",this).call(this,e)),{},{showMidPoint:!0})}},{key:"bindMidPointRenderEvent",value:function(){var t,n,i;null===(t=this.midPointRender)||void 0===t||t.on(e.RenderEvent.Click,this.onMidPointClick.bind(this)),null===(n=this.midPointRender)||void 0===n||n.on(e.RenderEvent.Mousemove,this.onMidPointHover.bind(this)),null===(i=this.midPointRender)||void 0===i||i.on(e.RenderEvent.Mouseout,this.onMidPointUnHover.bind(this))}},{key:"getMidPointData",value:function(){return this.source.getRenderData("midPoint")}},{key:"setMidPointData",value:function(e){return this.source.setRenderData("midPoint",e)}},{key:"getMidPointsByLine",value:function(e){var t=e.properties.nodes;if(!this.options.showMidPoint||2>t.length)return[];for(var n=[],i=0;t.length-1>i;i++){var r,o,a,s,u=nB(tC([t[i],t[i+1]]),{properties:{id:ap("midPoint"),startId:null!==(r=null===(o=t[i].properties)||void 0===o?void 0:o.id)&&void 0!==r?r:"",endId:null!==(a=null===(s=t[i+1].properties)||void 0===s?void 0:s.id)&&void 0!==a?a:""}});n.push(u)}return n}},{key:"onMidPointHover",value:function(e){this.setCursor("pointHover")}},{key:"onMidPointUnHover",value:function(e){this.resetCursor()}},{key:"enableMidPointRenderAction",value:function(){var e,t;null===(e=this.midPointRender)||void 0===e||e.enableClick(),null===(t=this.midPointRender)||void 0===t||t.enableHover()}},{key:"disableMidPointRenderAction",value:function(){var e,t;null===(e=this.midPointRender)||void 0===e||e.disableClick(),null===(t=this.midPointRender)||void 0===t||t.disableHover()}}]),i}(az),aV={draw:"单击绘制点",pointHover:"可拖拽调整点位置",pointDrag:null},aW={draw:"单击绘制首个节点",pointHover:"可拖拽调整节点位置",pointDrag:null,lineHover:"可拖拽调整线位置",lineDrag:null,midPointHover:"单击在该位置新增节点",drawFinish:"单击继续绘制，双击结束绘制"},a$={draw:"单击绘制首个节点",drawContinue:"单击继续绘制",drawFinish:"单击继续绘制，双击结束绘制",midPointHover:"单击在该位置新增节点",pointHover:"可拖拽调整节点位置",pointDrag:null,lineHover:"可拖拽调整面位置",lineDrag:null,polygonHover:"可拖拽调整面位置",polygonDrag:null},aG=ts(ts({},a$),{},{draw:"单击绘制首个节点",drawFinish:"单击结束绘制"}),aK={draw:"拖拽开始绘制",drawFinish:"松开鼠标结束绘制"},aJ={lineHover:"可拖拽调整矩形位置",polygonHover:"可拖拽调整矩形位置"},aZ={lineHover:"可拖拽调整圆位置",polygonHover:"可拖拽调整圆位置"},aQ=function(t){tf(i,t);var n=ty(i);function i(){var e;tl(this,i);for(var t=arguments.length,r=Array(t),o=0;t>o;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).previousPosition=[0,0],e}return th(i,[{key:"lineRender",get:function(){return this.render.line}},{key:"dragLine",get:function(){return this.getLineData().find(function(e){return e.properties.isDrag})}},{key:"drawLine",get:function(){return this.getLineData().find(function(e){return e.properties.isDraw})}},{key:"editLine",get:function(){return this.getLineData().find(function(e){var t=e.properties;return!t.isDraw&&t.isActive})}},{key:"hoverLine",get:function(){return this.getLineData().find(function(e){return e.properties.isHover})}},{key:"getDragLine",value:function(){return this.dragLine}},{key:"getDrawLine",value:function(){return this.drawLine}},{key:"getEditLine",value:function(){return this.editLine}},{key:"getDefaultOptions",value:function(e){var t=ts(ts({},this.getCommonOptions(e)),{},{showMidPoint:!0,distanceOptions:!1,helper:oR(aW)});return e.distanceOptions&&(t.distanceOptions=ts(ts({},te),t.distanceOptions)),e.adsorbOptions&&(t.adsorbOptions=ts(ts({},to),t.adsorbOptions)),t}},{key:"getAdsorbPosition",value:function(e){var t=this.options.adsorbOptions;if("boolean"==typeof t)return e;var n=this.scene,i=t.pointAdsorbPixel,r=t.lineAdsorbPixel,o=null,a=aS(t.data,this,e),s=a.points,u=a.lines;return s.length&&i>0&&(o=aj(e,s,t,n)),!o&&u.length&&r>0&&(o=aT(e,u,t,n)),o}},{key:"bindSceneEvent",value:function(){this.sceneRender.on(e.RenderEvent.Mousemove,this.onSceneMouseMove.bind(this))}},{key:"bindPointRenderEvent",value:function(){var t;tm(tp(i.prototype),"bindPointRenderEvent",this).call(this),null===(t=this.pointRender)||void 0===t||t.on(e.RenderEvent.Click,this.onPointClick.bind(this))}},{key:"bindLineRenderEvent",value:function(){var t,n,i,r,o,a;null===(t=this.lineRender)||void 0===t||t.on(e.RenderEvent.UnClick,this.onLineUnClick.bind(this)),null===(n=this.lineRender)||void 0===n||n.on(e.RenderEvent.Mousemove,this.onLineMouseMove.bind(this)),null===(i=this.lineRender)||void 0===i||i.on(e.RenderEvent.Mouseout,this.onLineMouseOut.bind(this)),null===(r=this.lineRender)||void 0===r||r.on(e.RenderEvent.Dragstart,this.onLineDragStart.bind(this)),null===(o=this.lineRender)||void 0===o||o.on(e.RenderEvent.Dragging,this.onLineDragging.bind(this)),null===(a=this.lineRender)||void 0===a||a.on(e.RenderEvent.Dragend,this.onLineDragEnd.bind(this))}},{key:"getDashLineDistanceTexts",value:function(e,t){var n=t.showTotalDistance,i=t.format;return t.showDashDistance?e.map(function(e){return aP(e,{showTotalDistance:n,format:i},{isActive:!0,type:"dash"})}).flat():[]}},{key:"getLineDistanceTexts",value:function(e,t){var n=t.showTotalDistance,i=t.format,r=t.showWhen,o=[];if(r.includes("active")){var a=e.filter(function(e){return e.properties.isActive&&e.properties.nodes.length>1});o.push.apply(o,tD(a.map(function(e){return aP(e,{showTotalDistance:n,format:i},{isActive:!0})}).flat()))}if(r.includes("normal")){var s=e.filter(function(e){return!e.properties.isActive&&e.properties.nodes.length>1});o.push.apply(o,tD(s.map(function(e){return aP(e,{showTotalDistance:n,format:i})}).flat()))}return o}},{key:"getDistanceTexts",value:function(){var e=this.options.distanceOptions;if(!e)return[];var t=[],n=e.showWhen,i=e.showDashDistance,r=e.format,o=e.showTotalDistance;return t.push.apply(t,tD(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!1,format:r,showDashDistance:i})).concat(tD(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:o,format:r,showWhen:n})))),t}},{key:"getAllTexts",value:function(){return this.getDistanceTexts()}},{key:"handleCreateLine",value:function(e){var t=aw([e],{isActive:!0,isDraw:!0});return this.setLineData(function(e){return ag({target:t,data:[].concat(tD(e),[t]),otherHandler:function(e){e.properties.isActive=!1}})}),this.setPointData([e]),this.setTextData(this.getAllTexts()),t}},{key:"syncLineNodes",value:function(e,t){return e.properties.nodes=t,e.geometry.coordinates=tz(tC(t)),this.setLineData(function(t){return t.map(function(t){return av(t,e)?e:t})}),av(this.editLine,e)&&this.setMidPointData(this.getMidPointsByLine(e)),this.setPointData(e.properties.nodes),this.setTextData(this.getAllTexts()),e}},{key:"setActiveLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setLineData(function(n){return ag({target:e,data:n,targetHandler:function(e){e.properties=ts(ts({},e.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},t)},otherHandler:function(e){e.properties=ts(ts({},e.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setPointData(e.properties.nodes.map(function(e){return e.properties=ts(ts({},e.properties),{},{isHover:!1,isActive:!1}),e})),this.setMidPointData(this.getMidPointsByLine(e)),this.setDashLineData([]),this.setTextData(this.getAllTexts()),e}},{key:"clearActiveLine",value:function(){this.source.setData({point:[],line:this.getLineData().map(function(e){return e.properties=ts(ts({},e.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),e}),midPoint:[],text:this.getAllTexts()})}},{key:"handleLineUnClick",value:function(e){return this.clearActiveLine(),e}},{key:"handleLineHover",value:function(e){if(!this.drawLine)return this.setCursor("lineHover"),av(e,this.hoverLine)||this.setLineData(function(t){return ag({target:e,data:t,targetHandler:function(e){e.properties.isHover=!0},otherHandler:function(e){e.properties.isHover=!1}})}),e}},{key:"handleLineUnHover",value:function(e){if(!this.drawLine)return this.resetCursor(),this.setLineData(function(e){return e.map(function(e){return e.properties.isHover=!1,e})}),e}},{key:"handleLineDragStart",value:function(e){return this.setActiveLine(e,{isDrag:!0,isActive:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("lineDrag"),e}},{key:"handleLineDragging",value:function(e,t){var n=t.lng,i=t.lat,r=e.properties.nodes,o=tb(this.previousPosition,2),a=o[0],s=o[1];return r.forEach(function(e){var t=e.geometry.coordinates;e.geometry.coordinates=[t[0]+n-a,t[1]+i-s]}),this.syncLineNodes(e,r),this.setActiveLine(e,{isDrag:!0}),this.setCursor("lineDrag"),this.previousPosition=[n,i],e}},{key:"handleLineDragEnd",value:function(e){return e.properties.isDrag=!1,this.setLineData(function(e){return e}),this.scene.setMapStatus({dragEnable:!0}),e}},{key:"resetAdsorbLngLat",value:function(e){if(this.options.adsorbOptions){var t=this.getAdsorbPosition(aC(aA(e)));return t&&aH(e,t),t}}},{key:"onPointCreate",value:function(e){if(!this.editLine){this.resetAdsorbLngLat(e);var t=tm(tp(i.prototype),"onPointCreate",this).call(this,e),n=this.drawLine;if(t)return n?(this.syncLineNodes(n,[].concat(tD(n.properties.nodes),[t])),this.setDashLineData([])):this.handleCreateLine(t),t}}},{key:"onPointDragStart",value:function(e){if(this.editLine)return this.setHelper("pointDrag"),tm(tp(i.prototype),"onPointDragStart",this).call(this,e)}},{key:"onPointDragging",value:function(e){var t=tm(tp(i.prototype),"onPointDragging",this).call(this,e);if(t){var n=this.resetAdsorbLngLat(e);n&&(t.geometry.coordinates=oR(n))}var r=this.editLine;return r&&t&&(this.syncLineNodes(r,r.properties.nodes.map(function(e){return av(t,e)?t:e})),this.setActiveLine(r)),t}},{key:"onPointDragEnd",value:function(e){if(this.editLine){var t=tm(tp(i.prototype),"onPointDragEnd",this).call(this,e);return this.setPointData(function(e){return e.map(function(e){return e.properties.isActive=!1,e})}),this.setHelper("pointHover"),t}}},{key:"onLineUnClick",value:function(e){var t=this.editLine;if(t)return this.handleLineUnClick(t)}},{key:"onLineMouseMove",value:function(e){if(!this.drawLine)return this.dragLine||this.drawLine||!this.options.editable||this.setHelper("lineHover"),this.handleLineHover(e.feature)}},{key:"onLineMouseOut",value:function(e){if(!this.drawLine)return this.dragLine||this.drawLine||this.setHelper(this.addable?"draw":null),this.handleLineUnHover(e.feature)}},{key:"onLineDragStart",value:function(e){if(this.options.editable&&!this.drawLine)return this.previousPosition=aO(e),this.setHelper("lineDrag"),this.handleLineDragStart(e.feature)}},{key:"onLineDragging",value:function(e){var t=this.dragLine;if(t)return this.handleLineDragging(t,aA(e))}},{key:"onLineDragEnd",value:function(e){var t=this.dragLine;if(t)return this.setHelper("lineHover"),this.handleLineDragEnd(t)}},{key:"onPointMouseMove",value:function(e){var t=tm(tp(i.prototype),"onPointMouseMove",this).call(this,e);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper("pointHover"),t}},{key:"onPointMouseOut",value:function(e){var t=tm(tp(i.prototype),"onPointMouseOut",this).call(this,e);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper(this.addable?"draw":null),t}},{key:"onMidPointHover",value:function(e){tm(tp(i.prototype),"onMidPointHover",this).call(this,e),this.setHelper("midPointHover")}},{key:"onMidPointUnHover",value:function(e){tm(tp(i.prototype),"onMidPointUnHover",this).call(this,e),this.setHelper(null)}},{key:"onPointClick",value:function(e){}},{key:"getLineData",value:function(){return this.source.getRenderData("line")}},{key:"setLineData",value:function(e){return this.source.setRenderData("line",e)}},{key:"getTextData",value:function(){return this.source.getRenderData("text")}},{key:"setTextData",value:function(e){return this.source.setRenderData("text",e)}},{key:"getDashLineData",value:function(){return this.source.getRenderData("dashLine")}},{key:"setDashLineData",value:function(e){return this.source.setRenderData("dashLine",e)}},{key:"onMidPointClick",value:function(e){var t=this.editLine,n=e.feature;if(t&&n&&!this.dragPoint){var i=t.properties.nodes,r=n.properties,o=r.startId,a=r.endId,s=i.findIndex(function(e){return e.properties.id===o}),u=i.findIndex(function(e){return e.properties.id===a});if(s>-1&&u>-1){var l=aD(n.geometry.coordinates,{isDrag:!0,isHover:!0});return this.setHelper("pointDrag"),i.splice(u,0,l),t.geometry.coordinates=tz(tC(i)),this.syncLineNodes(t,i),this.setActiveLine(t),l}}}},{key:"enableSceneRenderAction",value:function(){this.sceneRender.enableDrag(),this.sceneRender.enableMouseMove(),this.sceneRender.enableDblClick()}},{key:"disableSceneRenderAction",value:function(){this.sceneRender.disableDrag(),this.sceneRender.disableMouseMove(),this.sceneRender.disableDblClick()}},{key:"enableLineRenderAction",value:function(){var e,t,n,i=this.options.editable;null===(e=this.lineRender)||void 0===e||e.enableUnClick(),i&&(null===(t=this.lineRender)||void 0===t||t.enableHover(),null===(n=this.lineRender)||void 0===n||n.enableDrag())}},{key:"disableLineRenderAction",value:function(){var e,t,n;null===(e=this.lineRender)||void 0===e||e.disableUnClick(),null===(t=this.lineRender)||void 0===t||t.disableHover(),null===(n=this.lineRender)||void 0===n||n.disableDrag()}}]),i}(aq),a0=function(t){tf(i,t);var n=ty(i);function i(){return tl(this,i),n.apply(this,arguments)}return th(i,[{key:"dragItem",get:function(){return this.dragPolygon}},{key:"editItem",get:function(){return this.editPolygon}},{key:"polygonRender",get:function(){return this.render.polygon}},{key:"dragPolygon",get:function(){return this.getPolygonData().find(function(e){return e.properties.isDrag})}},{key:"drawPolygon",get:function(){return this.getPolygonData().find(function(e){return e.properties.isDraw})}},{key:"editPolygon",get:function(){return this.getPolygonData().find(function(e){var t=e.properties;return!t.isDraw&&t.isActive})}},{key:"hoverPolygon",get:function(){return this.getPolygonData().find(function(e){return e.properties.isHover})}},{key:"getDragPolygon",value:function(){return this.dragPolygon}},{key:"getDrawPolygon",value:function(){return this.drawPolygon}},{key:"getEditPolygon",value:function(){return this.editPolygon}},{key:"getRenderTypes",value:function(){return["polygon","line","dashLine","midPoint","point","text"]}},{key:"getData",value:function(){return this.getPolygonData()}},{key:"getMainLayer",value:function(){var e,t;return null!==(e=null===(t=this.render.polygon)||void 0===t?void 0:t.getLayers())&&void 0!==e?e:[]}},{key:"getDefaultOptions",value:function(e){var t=ts(ts({},tm(tp(i.prototype),"getDefaultOptions",this).call(this,e)),{},{areaOptions:!1,helper:oR(a$)});return e.areaOptions&&(t.areaOptions=ts(ts({},tt),e.areaOptions)),t}},{key:"getAreaTexts",value:function(e){var t=this.options.areaOptions;if(!t)return[];var n=t.format,i=t.showWhen,r=[],o=e.filter(function(e){return e.geometry.coordinates[0].length>=4});return i.includes("active")&&o.filter(function(e){return e.properties.isActive}).forEach(function(e){r.push(aM(e,{format:n},{isActive:!0}))}),i.includes("normal")&&o.filter(function(e){return!e.properties.isActive}).forEach(function(e){r.push(aM(e,{format:n},{isActive:!1}))}),r}},{key:"getAllTexts",value:function(){return[].concat(tD(tm(tp(i.prototype),"getAllTexts",this).call(this)),tD(this.getAreaTexts(this.getPolygonData())))}},{key:"getPolygonData",value:function(){return this.source.getRenderData("polygon")}},{key:"setPolygonData",value:function(e){return this.source.setRenderData("polygon",e)}},{key:"handleCreatePolygon",value:function(e,t){var n=ax(e,{nodes:e,line:t,isActive:!0,isDraw:!0});return this.setPolygonData(function(e){return ag({target:n,data:[].concat(tD(e),[n]),otherHandler:function(e){e.properties.isActive=!1}})}),n}},{key:"handlePolygonUnClick",value:function(e){return this.clearActivePolygon(),e}},{key:"handlePolygonHover",value:function(e){return this.setCursor("polygonHover"),av(e,this.hoverPolygon)||this.setPolygonData(function(t){return ag({target:e,data:t,targetHandler:function(e){e.properties.isHover=!0},otherHandler:function(e){e.properties.isHover=!1}})}),e}},{key:"handlePolygonUnHover",value:function(){this.resetCursor(),this.setPolygonData(function(e){return e.map(function(e){return e.properties.isHover=!1,e})})}},{key:"handlePolygonDragStart",value:function(e){return this.setActivePolygon(e,{isDrag:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("polygonDrag"),e}},{key:"bindPolygonRenderEvent",value:function(){var t,n,i,r;null===(t=this.polygonRender)||void 0===t||t.on(e.RenderEvent.UnClick,this.onPolygonUnClick.bind(this)),null===(n=this.polygonRender)||void 0===n||n.on(e.RenderEvent.Mousemove,this.onPolygonHover.bind(this)),null===(i=this.polygonRender)||void 0===i||i.on(e.RenderEvent.Mouseout,this.onPolygonUnHover.bind(this)),null===(r=this.polygonRender)||void 0===r||r.on(e.RenderEvent.Dragstart,this.onPolygonDragStart.bind(this))}},{key:"syncPolygonNodes",value:function(e,t){var n=tz(tC([].concat(tD(t),[af(t)]))),i=e.properties.line;if(e.properties.nodes=t,e.geometry.coordinates=[!function(e){for(var t,n,i=t1(e),r=0,o=1;i.length>o;)t=n||i[0],r+=((n=i[o])[0]-t[0])*(n[1]+t[1]),o++;return r>0}(tO(n))?n.reverse():n],this.setPolygonData(function(t){return t.map(function(t){return av(t,e)?e:t})}),!av(this.drawPolygon,e)){var r=i.properties.nodes,o=tD(t),a=af(o);o.push(r.length===t.length?aD(a.geometry.coordinates):aX(r));var s=aX(o);o1(a.geometry.coordinates,s.geometry.coordinates)||(s.geometry.coordinates=oR(a.geometry.coordinates)),this.syncLineNodes(i,o)}return e}},{key:"setActivePolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setActiveLine(e.properties.line,t),this.setPolygonData(function(n){return ag({target:e,data:n,targetHandler:function(e){e.properties=ts(ts({},e.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},t)},otherHandler:function(e){e.properties=ts(ts({},e.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setTextData(this.getAllTexts()),e}},{key:"clearActivePolygon",value:function(){this.setPolygonData(function(e){return e.map(function(e){return e.properties=ts(ts({},e.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),e})}),this.clearActiveLine()}},{key:"onLineDragStart",value:function(t){var n=tm(tp(i.prototype),"onLineDragStart",this).call(this,t),r=this.getPolygonData().find(function(e){return av(e.properties.line,n)});return r&&(this.setActivePolygon(r,{isDrag:!0}),this.emit(e.DrawEvent.DragStart,r,this.getPolygonData())),n}},{key:"onLineUnClick",value:function(e){return this.editLine}},{key:"onLineDragEnd",value:function(t){var n=tm(tp(i.prototype),"onLineDragEnd",this).call(this,t),r=this.dragPolygon;return n&&r&&(r.properties.isDrag=!1,this.emit(e.DrawEvent.DragEnd,r,this.getPolygonData()),this.emit(e.DrawEvent.Edit,r,this.getPolygonData())),n}},{key:"onPolygonUnClick",value:function(e){var t=this.editPolygon;if(t)return this.handlePolygonUnClick(t)}},{key:"onPolygonHover",value:function(e){if(!this.drawPolygon)return this.dragPolygon||this.setHelper("polygonHover"),this.handlePolygonHover(e.feature)}},{key:"onPolygonUnHover",value:function(e){if(!this.drawPolygon)return this.setHelper(this.addable?"draw":null),this.handlePolygonUnHover()}},{key:"onPolygonDragStart",value:function(t){if(this.options.editable&&!this.drawPolygon){var n=t.feature;return this.previousPosition=aO(t),this.setHelper("polygonDrag"),this.emit(e.DrawEvent.DragStart,n,this.getPolygonData()),this.handlePolygonDragStart(n)}}},{key:"onMidPointClick",value:function(e){var t=this.editPolygon,n=tm(tp(i.prototype),"onMidPointClick",this).call(this,e);if(n&&t){var r=t.properties.line.properties.nodes;this.syncPolygonNodes(t,r.slice(0,r.length-1)),this.setActivePolygon(t)}return n}},{key:"onPointDragEnd",value:function(t){var n=this.editPolygon,r=tm(tp(i.prototype),"onPointDragEnd",this).call(this,t);return r&&n&&this.emit(e.DrawEvent.Edit,n,this.getPolygonData()),r}},{key:"enablePolygonRenderAction",value:function(){var e,t,n,i=this.options.editable;null===(e=this.polygonRender)||void 0===e||e.enableUnClick(),i&&(null===(t=this.polygonRender)||void 0===t||t.enableHover(),null===(n=this.polygonRender)||void 0===n||n.enableDrag())}},{key:"disablePolygonRenderAction",value:function(){var e,t,n;null===(e=this.polygonRender)||void 0===e||e.disableUnClick(),null===(t=this.polygonRender)||void 0===t||t.disableHover(),null===(n=this.polygonRender)||void 0===n||n.disableDrag()}},{key:"bindEnableEvent",value:function(){tm(tp(i.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.enablePolygonRenderAction()}},{key:"unbindEnableEvent",value:function(){tm(tp(i.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.disablePolygonRenderAction()}},{key:"bindThis",value:function(){tm(tp(i.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this),this.bindPolygonRenderEvent=this.bindPolygonRenderEvent.bind(this)}},{key:"setActiveFeature",value:function(e){var t=this.getTargetFeature(e);t?this.setActivePolygon(t):this.clearActivePolygon()}},{key:"resetFeatures",value:function(){var e=this.getPolygonData();this.drawPolygon&&(e=e.filter(function(e){return!e.properties.isDraw}),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setLineData(function(e){return e.filter(function(e){return!e.properties.isDraw})}),this.setTextData(function(e){return e.filter(function(e){return!e.properties.isActive})})),this.editPolygon&&this.handlePolygonUnClick(this.editPolygon),this.setPolygonData(e.map(function(e){return e.properties=ts(ts({},e.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),e}))}}]),i}(aQ),a1=function(t){tf(i,t);var n=ty(i);function i(e,t){var r;return tl(this,i),(r=n.call(this,e,t)).onSceneDragStart=r.onSceneDragStart.bind(tg(r)),r.onSceneDragEnd=r.onSceneDragEnd.bind(tg(r)),r}return th(i,[{key:"drawLine",get:function(){var e;return null===(e=this.drawPolygon)||void 0===e?void 0:e.properties.line}},{key:"isDragTrigger",get:function(){return"drag"===this.options.trigger}},{key:"isClickTrigger",get:function(){return"click"===this.options.trigger}},{key:"getDefaultOptions",value:function(e){var t=ts(ts({},tm(tp(i.prototype),"getDefaultOptions",this).call(this,e)),{},{showMidPoint:!1,trigger:"click",autoActive:!1,helper:oR(aG)});return"drag"===e.trigger&&(t.helper=ts(ts({},t.helper),aK)),t}},{key:"getMidPointsByLine",value:function(e){return[]}},{key:"handleCreatePolygon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.properties.nodes;return ax(i.slice(0,i.length-1),ts({nodes:e,line:t},n))}},{key:"handleFirstNodeCreate",value:function(t){var n=aD(t.geometry.coordinates),i=this.handleCreatePolygonLine(t,n,{isDraw:!0,isActive:!0}),r=this.handleCreatePolygon([t,n],i,{isDraw:!0,isActive:!0});return this.setPolygonData(function(e){return ag({target:r,data:[].concat(tD(e),[r]),targetHandler:function(e){e.properties=ts(ts({},e.properties),{},{isDraw:!0,isActive:!0})}})}),this.emit(e.DrawEvent.AddNode,t,this.drawPolygon,this.getPolygonData()),this.setHelper("drawFinish"),t}},{key:"handleLastNodeCreate",value:function(t){var n=this.options,i=n.autoActive,r=n.editable,o=this.drawPolygon;return o&&(this.setLineData(function(e){return[].concat(tD(e),[o.properties.line])}),this.setActivePolygon(o),i&&r||this.handlePolygonUnClick(o),this.emit(e.DrawEvent.Add,o,this.getPolygonData()),this.emit(e.DrawEvent.AddNode,o.properties.nodes[1],this.drawPolygon,this.getPolygonData()),this.setHelper(r?i?"pointHover":"polygonHover":this.addable?"draw":null)),t}},{key:"onPointCreate",value:function(e){var t=this;if(this.addable&&!this.dragPoint&&!this.editLine&&this.isClickTrigger){var n=this.drawPolygon,i=aO(e),r=this.handleCreatePoint(i);return n?requestAnimationFrame(function(){t.handleLastNodeCreate(r)}):this.handleFirstNodeCreate(r),r}}},{key:"setActivePolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setActiveLine(e.properties.line,t),this.setPolygonData(function(n){return ag({target:e,data:n,targetHandler:function(e){e.properties=ts(ts({},e.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},t)},otherHandler:function(e){e.properties=ts(ts({},e.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setPointData(e.properties.nodes),this.setDashLineData([]);var n=this.getAllTexts();return this.setTextData(n),e}},{key:"onPointDragging",value:function(e){var t=this.dragPoint;if(t){var n=this.handlePointDragging(t,aA(e)),i=this.editPolygon;return n&&i&&(this.syncPolygonNodes(i,i.properties.nodes.map(function(e){return av(e,n)?n:e})),this.setActivePolygon(i)),n}}},{key:"onSceneDragStart",value:function(e){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&(this.scene.setMapStatus({dragEnable:!1}),this.handleFirstNodeCreate(this.handleCreatePoint(aO(e))))}},{key:"onSceneDragEnd",value:function(e){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&this.drawPolygon&&(this.scene.setMapStatus({dragEnable:!1}),this.handleLastNodeCreate(this.handleCreatePoint(aO(e))))}},{key:"onSceneMouseMove",value:function(e){var t=this.drawPolygon;if(t){var n=t.properties.nodes,i=af(n),r=aX(n);r.geometry.coordinates=aO(e),this.syncPolygonNodes(t,[i,r]),this.setDashLineData([t.properties.line]),this.setTextData(this.getAllTexts()),this.resetCursor()}}},{key:"bindSceneDragEvent",value:function(){this.unbindSceneDragEvent(),this.sceneRender.on(e.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.on(e.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!1})}},{key:"unbindSceneDragEvent",value:function(){this.sceneRender.off(e.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.off(e.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!0})}},{key:"bindEnableEvent",value:function(){tm(tp(i.prototype),"bindEnableEvent",this).call(this),this.isDragTrigger&&this.bindSceneDragEvent()}},{key:"unbindEnableEvent",value:function(){tm(tp(i.prototype),"unbindEnableEvent",this).call(this),this.isDragTrigger&&this.unbindSceneDragEvent()}},{key:"bindThis",value:function(){tm(tp(i.prototype),"bindThis",this).call(this),this.onSceneDragStart=this.onSceneDragStart.bind(this),this.onSceneDragEnd=this.onSceneDragEnd.bind(this)}}]),i}(a0),a2=function(t){tf(i,t);var n=ty(i);function i(e,t){var r;return tl(this,i),(r=n.call(this,e,t)).bindPointRenderEvent(),r.bindSceneEvent(),r.bindMidPointRenderEvent(),r.bindLineRenderEvent(),r.bindPolygonRenderEvent(),r}return th(i,[{key:"getDefaultOptions",value:function(e){var t=ts(ts({},tm(tp(i.prototype),"getDefaultOptions",this).call(this,e)),{},{showMidPoint:!1,circleSteps:60});return t.distanceOptions&&(t.distanceOptions.showTotalDistance=!0,void 0===t.distanceOptions.showOnRadius&&(t.distanceOptions.showOnRadius=!0)),t.helper&&(t.helper=ts(ts({},t.helper),aZ)),t}},{key:"getDistanceTexts",value:function(){var e=this.options.distanceOptions;if(!e)return[];var t=[],n=e.showWhen,i=e.showDashDistance,r=e.format,o=e.showTotalDistance;return t.push.apply(t,tD(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!0,format:r,showDashDistance:i})).concat(tD(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:o,format:r,showWhen:n})))),t}},{key:"setData",value:function(e){var t=this,n=e.map(function(e){e.properties=ts(ts({},ab()),e.properties);var n,i,r,o=null===(n=e.properties)||void 0===n?void 0:n.nodes;if(2!==(null===(i=o)||void 0===i?void 0:i.length)){var a=tb(nB(e).geometry.coordinates,2),s=a[0],u=a[1],l=tZ(e),c=l[2],h=(l[1]+l[3])/2;o=[aD([s,u]),aD([c,h])],e.properties.nodes=o}var d=o[0],f=o[1],p=!!(null===(r=e.properties)||void 0===r?void 0:r.isActive),v=e.properties.line;return v||(v=t.handleCreatePolygonLine(d,f,{isActive:p}),e.properties.line=v),t.handleCreatePolygon([d,f],v,ts(ts({},e.properties),{},{isActive:p}))});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:n,line:n.map(function(e){return e.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return aw(this.getBoundaryPositions(e,t).map(function(e){return aD(e)}),n)}},{key:"syncPolygonNodes",value:function(e,t){var n=e.properties.line,i=this.getBoundaryPositions(t[0],t[1]);return e.properties.nodes=t,e.geometry.coordinates=[i],this.setPolygonData(function(t){return t.map(function(t){return av(t,e)?e:t})}),this.setPointData(e.properties.isDraw?[t[0]]:t),n.properties.nodes.forEach(function(e,t){e.geometry.coordinates=i[t]}),n.geometry.coordinates=i,e}},{key:"onLineDragging",value:function(t){var n=this.dragPolygon,r=tb(this.previousPosition,2),o=r[0],a=r[1],s=tm(tp(i.prototype),"onLineDragging",this).call(this,t);if(n){var u=tb(aO(t),2),l=u[0],c=u[1];n.properties.nodes.forEach(function(e){var t=tb(e.geometry.coordinates,2);e.geometry.coordinates=[t[0]+l-o,t[1]+c-a]}),this.syncPolygonNodes(n,n.properties.nodes),this.setActivePolygon(n,{isDrag:!0}),this.emit(e.DrawEvent.Dragging,n,this.getPolygonData())}return s}},{key:"getBoundaryPositions",value:function(e,t){for(var n=this.options.circleSteps,i=nS(e,t,{units:"meters"}),r=[],o=0;n>o;o++)r.push(nT(e,i,-360*o/n,{units:"meters"}).geometry.coordinates);return r.push(r[0]),r}}]),i}(a1),a3=function(t){tf(i,t);var n=ty(i);function i(t,r){var o;return tl(this,i),(o=n.call(this,t,r)).drawLineFinish=function(){var t,n=o.drawLine,i=null!==(t=null==n?void 0:n.properties.nodes)&&void 0!==t?t:[];if(n&&(null==i?void 0:i.length)>1){o.setActiveLine(n);var r=o.options,a=r.autoActive,s=r.editable;a&&s||o.handleLineUnClick(n),o.setHelper(s&&a?"pointHover":o.addable?"draw":null),o.emit(e.DrawEvent.Add,n,o.getLineData())}},o.sceneRender.on(e.RenderEvent.DblClick,o.drawLineFinish),o.bindPointRenderEvent(),o.bindSceneEvent(),o.bindMidPointRenderEvent(),o.bindLineRenderEvent(),o}return th(i,[{key:"dragItem",get:function(){return this.dragLine}},{key:"editItem",get:function(){return this.editLine}},{key:"getMainLayer",value:function(){var e,t;return null!==(e=null===(t=this.render.line)||void 0===t?void 0:t.getLayers())&&void 0!==e?e:[]}},{key:"setData",value:function(e){var t=e.map(function(e){var t,n;return e.properties=ts(ts({},am()),null!==(t=e.properties)&&void 0!==t?t:{}),(null===(n=e.properties.nodes)||void 0===n?void 0:n.length)||(e.properties.nodes=tz(e).map(function(e){return aD(e)})),e});this.source.setData({point:[],midPoint:[],dashLine:[],line:t}),this.setTextData(this.getAllTexts()),this.editLine&&this.setActiveLine(this.editLine)}},{key:"getData",value:function(){return this.getLineData()}},{key:"getRenderTypes",value:function(){return["line","dashLine","midPoint","point","text"]}},{key:"bindPointRenderEvent",value:function(){var t;tm(tp(i.prototype),"bindPointRenderEvent",this).call(this),null===(t=this.pointRender)||void 0===t||t.on(e.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"onPointClick",value:function(e){var t,n=this,i=this.drawLine,r=null!==(t=null==i?void 0:i.properties.nodes)&&void 0!==t?t:[],o=e.feature;if(av(o,aX(r)))requestAnimationFrame(function(){n.drawLineFinish()});else{var a=tb(o.geometry.coordinates,2);e.lngLat={lng:a[0],lat:a[1]},this.onPointCreate(e)}}},{key:"removeNode",value:function(t,n){var i,r=this.getTargetFeature(n),o=this.getTargetFeature(t,null!==(i=null==r?void 0:r.properties.nodes)&&void 0!==i?i:[]);if(r&&o){var a,s=null!==(a=null==r?void 0:r.properties.nodes)&&void 0!==a?a:[];if(3>s.length)return;this.syncLineNodes(r,s.filter(function(e){return!av(o,e)})),this.emit(e.DrawEvent.RemoveNode,o,r,this.getLineData()),this.emit(e.DrawEvent.Edit,r,this.getLineData())}}},{key:"onPointContextMenu",value:function(e){var t,n=this.editLine,i=e.feature,r=null!==(t=null==n?void 0:n.properties.nodes)&&void 0!==t?t:[];if(n&&r.length>=3)return this.removeNode(i,n),this.scene.setMapStatus({dragEnable:!0}),i}},{key:"onPointCreate",value:function(t){if(this.addable){var n=tm(tp(i.prototype),"onPointCreate",this).call(this,t);return n&&(this.setHelper("drawFinish"),this.emit(e.DrawEvent.AddNode,n,this.drawLine,this.getLineData())),n}}},{key:"onPointDragEnd",value:function(t){var n=this.editLine,r=tm(tp(i.prototype),"onPointDragEnd",this).call(this,t);return n&&r&&this.emit(e.DrawEvent.Edit,n,this.getLineData()),r}},{key:"onLineDragStart",value:function(t){var n=tm(tp(i.prototype),"onLineDragStart",this).call(this,t);return n&&this.emit(e.DrawEvent.DragStart,n,this.getLineData()),n}},{key:"onLineDragging",value:function(t){var n=tm(tp(i.prototype),"onLineDragging",this).call(this,t);return n&&this.emit(e.DrawEvent.Dragging,n,this.getLineData()),n}},{key:"onLineDragEnd",value:function(t){var n=tm(tp(i.prototype),"onLineDragEnd",this).call(this,t);return n&&(this.emit(e.DrawEvent.DragEnd,n,this.getLineData()),this.emit(e.DrawEvent.Edit,n,this.getLineData())),n}},{key:"onMidPointClick",value:function(t){var n=this.editLine,r=tm(tp(i.prototype),"onMidPointClick",this).call(this,t);return n&&r&&(this.emit(e.DrawEvent.Edit,n,this.getLineData()),this.emit(e.DrawEvent.AddNode,r,n,this.getLineData())),r}},{key:"onSceneMouseMove",value:function(e){var t=this.drawLine;if(t){var n,i=aX(t.properties.nodes),r=aO(e);this.options.adsorbOptions&&(r=null!==(n=this.getAdsorbPosition(r))&&void 0!==n?n:r),this.setDashLineData([aE([r,i.geometry.coordinates])]),this.setTextData(this.getAllTexts())}}},{key:"setActiveFeature",value:function(e){var t=this.getTargetFeature(e);t?this.setActiveLine(t):this.clearActiveLine()}},{key:"resetFeatures",value:function(){var e=this.getLineData();this.drawLine&&(e=e.filter(function(e){return!e.properties.isDraw}),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setTextData(function(e){return e.filter(function(e){return!e.properties.isActive})})),this.editLine&&this.handleLineUnClick(this.editLine),this.setLineData(e.map(function(e){return e.properties=ts(ts({},e.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),e}))}},{key:"enablePointRenderAction",value:function(){var e;tm(tp(i.prototype),"enablePointRenderAction",this).call(this),this.options.editable&&(null===(e=this.pointRender)||void 0===e||e.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var e;tm(tp(i.prototype),"disablePointRenderAction",this).call(this),null===(e=this.pointRender)||void 0===e||e.disableContextMenu()}},{key:"bindEnableEvent",value:function(){tm(tp(i.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.sceneRender.enableDblClick()}},{key:"unbindEnableEvent",value:function(){tm(tp(i.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.sceneRender.disableDblClick()}},{key:"bindThis",value:function(){tm(tp(i.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this)}}]),i}(aQ),a6=function(t){tf(i,t);var n=ty(i);function i(e,t){var r;return tl(this,i),(r=n.call(this,e,t)).bindPointRenderEvent(),r}return th(i,[{key:"dragItem",get:function(){return this.dragPoint}},{key:"editItem",get:function(){return this.editPoint}},{key:"getDefaultOptions",value:function(e){var t=ts(ts({},this.getCommonOptions(e)),{},{helper:oR(aV),initialData:e.initialData});return t.style.point=iq,t}},{key:"bindEnableEvent",value:function(){tm(tp(i.prototype),"bindEnableEvent",this).call(this),this.enablePointRenderAction()}},{key:"unbindEnableEvent",value:function(){tm(tp(i.prototype),"unbindEnableEvent",this).call(this),this.disablePointRenderAction()}},{key:"getRenderTypes",value:function(){return["point"]}},{key:"getMainLayer",value:function(){var e,t;return null!==(e=null===(t=this.render.point)||void 0===t?void 0:t.getLayers())&&void 0!==e?e:[]}},{key:"setData",value:function(e){this.setPointData(e.map(function(e){var t;return e.properties=ts(ts({},ay()),null!==(t=e.properties)&&void 0!==t?t:{}),e}))}},{key:"getData",value:function(){return this.getPointData()}},{key:"onPointCreate",value:function(t){if(this.addable){var n=tm(tp(i.prototype),"onPointCreate",this).call(this,t);if(n)return this.options.editable&&this.setHelper("pointHover"),this.emit(e.DrawEvent.Add,n,this.getData()),n}else this.setPointData(function(e){return e.map(function(e){return e.properties=ts(ts({},e.properties),{},{isHover:!1,isActive:!1}),e})})}},{key:"onPointMouseMove",value:function(e){var t=tm(tp(i.prototype),"onPointMouseMove",this).call(this,e);return this.options.editable&&!this.dragPoint&&this.setHelper("pointHover"),t}},{key:"onPointMouseOut",value:function(e){var t=tm(tp(i.prototype),"onPointMouseOut",this).call(this,e);return this.setHelper(this.addable?"draw":null),t}},{key:"onPointDragStart",value:function(t){var n=tm(tp(i.prototype),"onPointDragStart",this).call(this,t);return this.setHelper("pointDrag"),this.emit(e.DrawEvent.DragStart,n,this.getData()),n}},{key:"onPointDragging",value:function(t){var n=tm(tp(i.prototype),"onPointDragging",this).call(this,t);return n&&this.options.editable&&this.emit(e.DrawEvent.Dragging,n,this.getData()),n}},{key:"onPointDragEnd",value:function(t){var n=tm(tp(i.prototype),"onPointDragEnd",this).call(this,t);return n&&this.options.editable&&(this.setHelper("pointHover"),this.emit(e.DrawEvent.DragEnd,n,this.getData()),this.emit(e.DrawEvent.Edit,n,this.getData())),n}},{key:"bindThis",value:function(){tm(tp(i.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this)}},{key:"onSceneMouseMove",value:function(e){}},{key:"setActiveFeature",value:function(e){var t=this.getTargetFeature(e);this.setPointData(function(e){return e.map(function(e){return e.properties.isActive=av(t,e),e})})}},{key:"resetFeatures",value:function(){this.setPointData(function(e){return e.map(function(e){return e.properties=ts(ts({},e.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),e})})}}]),i}(az),a4=function(t){tf(i,t);var n=ty(i);function i(t,r){var o;return tl(this,i),(o=n.call(this,t,r)).drawPolygonFinish=function(){var t,n=o.drawPolygon,i=null!==(t=null==n?void 0:n.properties.nodes)&&void 0!==t?t:[];if(n&&i.length>=3){n.properties.isDraw=!1,o.syncPolygonNodes(n,i),o.setActivePolygon(n);var r=o.options,a=r.autoActive,s=r.editable;a&&s||o.handlePolygonUnClick(n),o.setHelper(s?a?"pointHover":"polygonHover":o.addable?"draw":null),o.emit(e.DrawEvent.Add,n,o.getPolygonData())}},o.sceneRender.on(e.RenderEvent.DblClick,o.drawPolygonFinish),o.bindPointRenderEvent(),o.bindSceneEvent(),o.bindMidPointRenderEvent(),o.bindLineRenderEvent(),o.bindPolygonRenderEvent(),o}return th(i,[{key:"getDefaultOptions",value:function(e){return ts(ts({},tm(tp(i.prototype),"getDefaultOptions",this).call(this,e)),{},{liveUpdate:!1})}},{key:"setData",value:function(e){var t=e.map(function(e){var t,n;if(e.properties=ts(ts({},ab()),null!==(t=e.properties)&&void 0!==t?t:{}),!(null===(n=e.properties.nodes)||void 0===n?void 0:n.length)){var i=tz(e);i=i.slice(0,i.length-1),e.properties.nodes=i.map(function(e){return aD(e)})}if(!e.properties.line){var r=e.properties.nodes;e.properties.line=aw([].concat(tD(r),[aD(af(r).geometry.coordinates)]))}return e});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:t,line:t.map(function(e){return e.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"onPointCreate",value:function(t){if(this.addable&&!this.dragPoint){var n=tm(tp(i.prototype),"onPointCreate",this).call(this,t),r=this.drawPolygon,o=this.drawLine;return n&&(r?(this.syncPolygonNodes(r,[].concat(tD(r.properties.nodes),[n])),this.setDashLineData([aE([aO(t),r.properties.nodes[0].geometry.coordinates])]),r.properties.nodes.length>1&&this.setHelper("drawFinish")):o&&(this.handleCreatePolygon([n],o),this.setHelper("drawContinue")),this.emit(e.DrawEvent.AddNode,n,r,this.getPolygonData())),n}}},{key:"onPointClick",value:function(e){var t=this,n=this.drawPolygon,i=e.feature;if(n){var r=n.properties.nodes;if(!(r.length<3)&&(av(af(r),i)||av(aX(r),i)))requestAnimationFrame(function(){t.drawPolygonFinish()});else{var o=tb(i.geometry.coordinates,2);e.lngLat={lng:o[0],lat:o[1]},this.onPointCreate(e)}}}},{key:"onPointDragging",value:function(e){var t=this.dragPoint,n=this.editPolygon;if(t&&n){var r=n.properties.line;r.properties.nodes=r.properties.nodes.map(function(e){return av(e,t)?t:e});var o=r.properties.nodes,a=o.slice(0,o.length-1),s=af(o),u=aX(o),l=av(s,t)||av(u,t);if(l&&(s.geometry.coordinates=u.geometry.coordinates=aO(e)),this.options.adsorbOptions&&l){var c=this.resetAdsorbLngLat(e);c&&(s.geometry.coordinates=u.geometry.coordinates=c)}tm(tp(i.prototype),"onPointDragging",this).call(this,e),this.syncPolygonNodes(n,a),this.setActivePolygon(n)}return t}},{key:"onLineDragging",value:function(t){var n=this.dragPolygon,r=tm(tp(i.prototype),"onLineDragging",this).call(this,t);if(r&&n){var o=r.properties.nodes;this.syncPolygonNodes(n,o.slice(0,o.length-1)),this.emit(e.DrawEvent.Dragging,n,this.getPolygonData())}return r}},{key:"onMidPointClick",value:function(t){var n=tm(tp(i.prototype),"onMidPointClick",this).call(this,t),r=this.editPolygon;return n&&r&&(this.emit(e.DrawEvent.Edit,r,this.getPolygonData()),this.emit(e.DrawEvent.AddNode,n,r,this.getPolygonData())),n}},{key:"onSceneMouseMove",value:function(e){var t,n=this.drawPolygon,i=null!==(t=null==n?void 0:n.properties.nodes)&&void 0!==t?t:[];if(n&&i.length){this.options.adsorbOptions&&this.resetAdsorbLngLat(e);var r=aO(e),o=[];if(o.push(aE([r,af(i).geometry.coordinates])),i.length>1&&o.push(aE([r,aX(i).geometry.coordinates])),this.options.liveUpdate&&i.length>=2){var a=tz(tC(i));n.geometry.coordinates=[[].concat(tD(a),[r,a[0]])],this.setPolygonData(this.getPolygonData())}this.setDashLineData(o),this.setTextData(this.getAllTexts())}}},{key:"removeNode",value:function(t,n){var i,r=this.getTargetFeature(n),o=this.getTargetFeature(t,null!==(i=null==r?void 0:r.properties.nodes)&&void 0!==i?i:[]);if(r&&o){var a,s=null!==(a=null==r?void 0:r.properties.nodes)&&void 0!==a?a:[];if(4>s.length)return;this.syncPolygonNodes(r,s.filter(function(e){return!av(o,e)})),this.emit(e.DrawEvent.RemoveNode,o,r,this.getLineData()),this.emit(e.DrawEvent.Edit,r,this.getPolygonData())}}},{key:"onPointContextMenu",value:function(e){var t,n=this.editPolygon,i=e.feature,r=null!==(t=null==n?void 0:n.properties.nodes)&&void 0!==t?t:[];if(n&&r.length>=4)return r.find(function(e){return av(e,i)})||(i=r[0]),this.removeNode(i,n),i}},{key:"bindPointRenderEvent",value:function(){var t;tm(tp(i.prototype),"bindPointRenderEvent",this).call(this),null===(t=this.pointRender)||void 0===t||t.on(e.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"enablePointRenderAction",value:function(){var e;tm(tp(i.prototype),"enablePointRenderAction",this).call(this),this.options.editable&&(null===(e=this.pointRender)||void 0===e||e.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var e;tm(tp(i.prototype),"disablePointRenderAction",this).call(this),null===(e=this.pointRender)||void 0===e||e.disableContextMenu()}}]),i}(a0),a9=function(t){tf(i,t);var n=ty(i);function i(e,t){var r;return tl(this,i),(r=n.call(this,e,t)).bindPointRenderEvent(),r.bindSceneEvent(),r.bindMidPointRenderEvent(),r.bindLineRenderEvent(),r.bindPolygonRenderEvent(),r}return th(i,[{key:"getDefaultOptions",value:function(e){var t=tm(tp(i.prototype),"getDefaultOptions",this).call(this,e);return t.helper&&(t.helper=ts(ts({},t.helper),aJ)),t}},{key:"setData",value:function(e){var t=this,n=e.map(function(e){e.properties=ts(ts({},ab()),null!==(n=e.properties)&&void 0!==n?n:{});var n,i,r,o=e.properties.nodes;if(2!==(null===(i=o)||void 0===i?void 0:i.length)){var a=tb(tZ(e),4),s=a[2],u=a[3];o=[aD([a[0],a[1]]),aD([s,u])],e.properties.nodes=o}var l=tb(o,2),c=l[0],h=l[1],d=!!(null===(r=e.properties)||void 0===r?void 0:r.isActive),f=e.properties.line;return f||(f=t.handleCreatePolygonLine(c,h,{isActive:d}),e.properties.line=f),t.handleCreatePolygon([c,h],f,ts(ts({},e.properties),{},{isActive:d}))});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:n,line:n.map(function(e){return e.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return aw(tz(nj(tC([e,t]))).map(function(n,i){return 0===i?e:2===i?t:aD(n)}),n)}},{key:"syncPolygonNodes",value:function(e,t){var n=e.properties.line,i=tz(nj(tC(t)));e.properties.nodes=t,e.geometry.coordinates=[i],this.setPolygonData(function(t){return t.map(function(t){return av(t,e)?e:t})}),this.setPointData(e.properties.isDraw?[t[0]]:t);var r=n.properties.nodes,o=i.filter(function(e){return!o1(e,t[0].geometry.coordinates)&&!o1(e,t[1].geometry.coordinates)});return r.forEach(function(e,n){var i=[0,0];switch(n){case 0:i=t[0].geometry.coordinates;break;case 1:i=o[0];break;case 2:i=t[1].geometry.coordinates;break;case 3:i=o[1];break;case 4:i=oR(t[0].geometry.coordinates)}e.geometry.coordinates=i}),n.geometry.coordinates=i,e}},{key:"onLineDragging",value:function(t){var n=tm(tp(i.prototype),"onLineDragging",this).call(this,t),r=this.dragPolygon;if(n&&r){var o=r.properties.line.properties.nodes;this.syncPolygonNodes(r,[o[0],o[2]]),this.setActivePolygon(r,{isDrag:!0}),this.emit(e.DrawEvent.Dragging,r,this.getPolygonData())}return n}}]),i}(a1),a8=function(e,t){for(var n=e;n&&!Array.from(n.classList).includes(t);)n=n.parentElement;return n},a5=["point","line","polygon","rect","circle","clear"],a7={point:"#l7draw-point",line:"#l7draw-line",polygon:"#l7draw-polygon",rect:"#l7draw-rect",circle:"#l7draw-circle",clear:"#l7draw-qingkong"},se={point:a6,line:a3,polygon:a4,rect:a9,circle:a2},st="data-draw-type",sn="l7-draw-control",si="".concat(sn,"__btn"),sr="".concat(si,"--active");(function(e){var t,n,i,r,o,a='<svg><symbol id="l7draw-qingkong" viewBox="0 0 1024 1024"><path d="M778.96777344 334.02148437h-148.31542969V284.58300781A71.78466797 71.78466797 0 0 0 556.49462891 215.36914062H467.50537109a71.78466797 71.78466797 0 0 0-74.15771484 69.11499024V334.02148437h-148.31542969a29.66308594 29.66308594 0 1 0 0 59.32617188h29.66308594v326.29394531A88.98925781 88.98925781 0 0 0 363.68457031 808.63085938h296.63085938a88.98925781 88.98925781 0 0 0 88.98925781-88.98925782V393.34765625h29.66308594a29.66308594 29.66308594 0 0 0 0-59.32617188zM452.67382812 284.58300781c0-4.74609375 6.22924805-9.78881836 14.83154297-9.78881836h88.98925782c8.60229492 0 14.83154297 5.04272461 14.83154296 9.78881836V334.02148437H452.67382812V284.53356934z m237.30468751 435.10803223a29.66308594 29.66308594 0 0 1-29.66308594 29.66308593H363.68457031a29.66308594 29.66308594 0 0 1-29.66308593-29.66308594V393.34765625h355.95703124v326.29394531z"  ></path><path d="M437.84228516 660.31542969c6.57531739 0 12.85400391-3.46069336 17.5012207-9.64050294A39.20471192 39.20471192 0 0 0 462.56152344 627.33996582V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 437.84228516 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.50122071 9.64050293A39.20471192 39.20471192 0 0 0 413.12304687 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.50122071 9.64050294zM586.15771484 660.31542969c6.57531739 0 12.85400391-3.46069336 17.50122071-9.64050294a39.20471192 39.20471192 0 0 0 7.21801758-23.33496093V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 586.15771484 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.5012207 9.64050293A39.20471192 39.20471192 0 0 0 561.43847656 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.5012207 9.64050294z"  ></path></symbol><symbol id="l7draw-rect" viewBox="0 0 1024 1024"><path d="M736.14 648.79V330c0-23.16-18.84-42-42-42H375.49c-11.07-19.13-31.74-32.01-55.43-32.01-35.35 0-64.01 28.66-64.01 64.01 0 23.69 12.88 44.36 32.01 55.43v318.8c0 23.16 18.84 42 42 42H648.7c11.07 19.13 31.74 32.01 55.43 32.01 35.35 0 64.01-28.66 64.01-64.01 0.01-23.7-12.87-44.37-32-55.44zM352.06 375.43A64.281 64.281 0 0 0 375.49 352h296.64v296.8a64.357 64.357 0 0 0-23.43 23.43H352.06v-296.8z"  ></path></symbol><symbol id="l7draw-circle" viewBox="0 0 1024 1024"><path d="M467.013228 557.765038a64.01 64.01 0 1 0 90.52223-90.52539 64.01 64.01 0 1 0-90.52223 90.52539Z"  ></path><path d="M832.16 512.22c0-26.06-15.58-48.46-37.93-58.45-11.21-54.67-38.11-104.92-78.48-145.3-54.42-54.42-126.78-84.4-203.75-84.4s-149.33 29.97-203.75 84.4c-54.42 54.42-84.4 126.79-84.4 203.75s29.97 149.33 84.4 203.75c54.42 54.42 126.78 84.4 203.75 84.4s149.33-29.97 203.75-84.4c40.37-40.37 67.28-90.62 78.48-145.3 22.35-9.98 37.93-32.39 37.93-58.45zM670.5 670.72c-42.34 42.34-98.62 65.65-158.5 65.65-59.87 0-116.16-23.32-158.5-65.65-42.34-42.34-65.65-98.62-65.65-158.5s23.32-116.16 65.65-158.5c42.34-42.34 98.62-65.65 158.5-65.65 59.87 0 116.16 23.32 158.5 65.65 29.9 29.9 50.3 66.77 59.71 106.95-15.81 11.66-26.07 30.4-26.07 51.55s10.26 39.9 26.07 51.55c-9.41 40.18-29.81 77.05-59.71 106.95z"  ></path></symbol><symbol id="l7draw-polygon" viewBox="0 0 1024 1024"><path d="M705.97 640.31c-5.79 0-11.39 0.78-16.72 2.22L381.94 336.66a64.079 64.079 0 0 0 2.14-16.43c0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 23.69 12.88 44.36 32.01 55.43V648.8c-19.13 11.07-32.01 31.74-32.01 55.43 0 35.35 28.66 64.01 64.01 64.01 23.69 0 44.35-12.87 55.42-32l275.05 0.07c11.07 19.14 31.74 32.03 55.44 32.03 35.35 0 64.01-28.66 64.01-64.01s-28.66-64.02-64.02-64.02z m-353.91 8.48V397.22L628.44 672.3l-252.94-0.07a64.411 64.411 0 0 0-23.44-23.44z"  ></path></symbol><symbol id="l7draw-line" viewBox="0 0 1024 1024"><path d="M832.16 449.21c0-35.35-28.66-64.01-64.01-64.01-29.2 0-53.81 19.56-61.5 46.28l-390.9 96.82 72.18-144.18c33.56-1.99 60.17-29.83 60.17-63.89 0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 13.04 3.91 25.17 10.61 35.28l-78.42 156.65c-33.58 1.97-60.21 29.81-60.21 63.89 0 35.35 28.66 64.01 64.01 64.01 29.2 0 53.81-19.56 61.5-46.28l390.8-96.79-71.97 143.34c-33.62 1.93-60.28 29.8-60.28 63.9 0 35.35 28.66 64.01 64.01 64.01s64.01-28.66 64.01-64.01c0-13-3.89-25.09-10.54-35.18l78.28-155.93c33.61-1.95 60.28-29.81 60.28-63.91z"  ></path></symbol><symbol id="l7draw-point" viewBox="0 0 1024 1024"><path d="M331.46 330.08m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M384.12 735.84m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M769.11 512.7m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path></symbol></svg>',s=(s=document.getElementsByTagName("script"))[s.length-1].getAttribute("data-injectcss");if(s&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}function u(){o||(o=!0,i())}t=function(){var e,t=document.createElement("div");t.innerHTML=a,a=null,(t=t.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",(e=document.body).firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(t,e.firstChild):e.appendChild(t))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(i=t,r=e.document,o=!1,function e(){try{r.documentElement.doScroll("left")}catch(t){return void setTimeout(e,50)}u()}(),r.onreadystatechange=function(){"complete"==r.readyState&&(r.onreadystatechange=null,u())})})(window),aF(".l7-draw-control{display:flex;overflow:hidden;background:#fff;border-radius:2px;box-shadow:0 0 20px rgba(0,0,0,.14901960784313725)}.l7-draw-control__btn{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;padding:0;text-align:center;background:transparent;border-width:0;border-right:1px solid #e0e0e0;outline:0;cursor:pointer}.l7-draw-control__btn:hover{background-color:#e5e5e5}.l7-draw-control__btn:last-child{border-right:0;border-bottom:0}.l7-draw-control__btn .l7-draw-icon{width:26px;height:26px;overflow:hidden;fill:currentColor}.l7-draw-control__btn--active svg{color:#0370fe}");var so=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sa=/^\w*$/,ss=function(e,t){if(rb(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ix(e))||sa.test(e)||!so.test(e)||null!=t&&e in Object(t)};function su(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(su.Cache||ro),n}su.Cache=ro;var sl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sc=/\\(\\)?/g,sh=(r=(i=su(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(sl,function(e,n,i,r){t.push(i?r.replace(sc,"$1"):n||e)}),t},function(e){return 500===r.size&&r.clear(),e})).cache,i),sd=id?id.prototype:void 0,sf=sd?sd.toString:void 0,sp=function e(t){if("string"==typeof t)return t;if(rb(t))return al(t,e)+"";if(ix(t))return sf?sf.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},sv=function(e,t){return rb(e)?e:ss(e,t)?[e]:sh(null==e?"":sp(e))},sg=function(e){if("string"==typeof e||ix(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},sy=function(e,t){for(var n=0,i=(t=sv(t,e)).length;null!=e&&i>n;)e=e[sg(t[n++])];return n&&n==i?e:void 0},sm=function(e,t,n){var i=-1,r=e.length;0>t&&(t=-t>r?0:r+t),0>(n=n>r?r:n)&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o},sb=function(e,t){var n,i;return t=sv(t,e),null==(n=e,e=2>(i=t).length?n:sy(n,sm(i,0,-1)))||delete e[sg(aX(t))]},sD=function(e){return o8(e)?void 0:e},sw=id?id.isConcatSpreadable:void 0,sE=function(e){return rb(e)||rm(e)||!!(sw&&e&&e[sw])},sx=function e(t,n,i,r,o){var a=-1,s=t.length;for(i||(i=sE),o||(o=[]);++a<s;){var u=t[a];n>0&&i(u)?n>1?e(u,n-1,i,r,o):rJ(o,u):r||(o[o.length]=u)}return o},sk=aa(ar(o=function(e,t){var n={};if(null==e)return n;var i=!1;t=al(t,function(t){return t=sv(t,e),i||(i=t.length>1),t}),rd(e,r2(e),n),i&&(n=o_(n,7,sD));for(var r=t.length;r--;)sb(n,t[r]);return n},void 0,function(e){return(null==e?0:e.length)?sx(e,1):[]}),o+""),sP=function(n){tf(r,n);var i=ty(r);function r(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tl(this,r),(n=i.call(this,o)).controlOption=void 0,n.sceneInstance=void 0,n.drawMap={},n.btnMap={},n.activeType=null,n.emitDataChange=i_(function(){n.emit(e.ControlEvent.DataChange,n.getDrawData())},16),n.emitDrawSelect=function(t,i){n.emit(e.ControlEvent.DrawSelect,t,i)},n.sceneInstance=t,n.controlOption=ts(ts({},n.getDefault()),o||{}),n.onBtnClick=n.onBtnClick.bind(tg(n)),n}return th(r,[{key:"getActiveType",value:function(){return this.activeType}},{key:"getDefault",value:function(){return ts(ts({},tm(tp(r.prototype),"getDefault",this).call(this)),{},{className:"",buttonClassName:"",activeButtonClassName:"",style:"",position:"topleft",commonDrawOptions:{},drawConfig:{point:!0,line:!0,polygon:!0,rect:!0,circle:!0,clear:!0}})}},{key:"addTo",value:function(e){return tm(tp(r.prototype),"addTo",this).call(this,e),this.init(),this}},{key:"onAdd",value:function(){var e=this.controlOption,n=e.className,i=e.style,r=t.DOM.create("div","".concat(sn," ").concat(n));return i&&r.setAttribute("style",i),r}},{key:"onRemove",value:function(){Object.values(this.drawMap).forEach(function(e){e.clear(!0)})}},{key:"init",value:function(){var t,n=this,i=[];Object.entries(this.controlOption.drawConfig).filter(function(e){return tb(e,2)[1]}).sort(function(e,t){var n=tb(e,2)[1],i=tb(t,2)[1],r=Number.MAX_SAFE_INTEGER;return("boolean"==typeof n?r:n.order)-("boolean"==typeof i?r:i.order)}).map(function(e){var t=tb(e,2),n=t[1];return[t[0],"object"===tu(n)?sk(n,"order"):n]}).forEach(function(t){var r=tb(t,2),o=r[0],a=r[1];if("object"===tu(a)&&a.button){var s=a.button;s.classList.contains("l7-draw-control__btn")||s.classList.add("l7-draw-control__btn"),n.btnMap[o]=s,i.push(s)}else if(a&&a5.includes(o)){var u=n.initBtn(o);u.addEventListener("click",n.onBtnClick),i.push(u),n.btnMap[o]=u;var l=se[o];if(l&&n.sceneInstance){var c=new l(n.sceneInstance,ts(ts({},n.controlOption.commonDrawOptions),"boolean"==typeof a?{}:a));c.on(e.DrawEvent.Change,n.emitDataChange),c.on(e.DrawEvent.Select,function(e){n.emitDrawSelect(o,e)}),n.drawMap[o]=c}}}),(t=this.container).append.apply(t,i),this.controlOption.defaultActiveType&&this.onDrawClick(this.controlOption.defaultActiveType)}},{key:"getDrawData",value:function(){return oS(ah(this.drawMap).map(function(e){var t=tb(e,2);return[t[0],t[1].getData()]}))}},{key:"getTypeDraw",value:function(e){var t;return null!==(t=this.drawMap[e])&&void 0!==t?t:null}},{key:"onBtnClick",value:function(e){var t=a8(e.target,si);if(t){var n=t.getAttribute(st);"clear"===n?this.clearDrawData():this.onDrawClick(n)}}},{key:"setActiveType",value:function(n){var i=null,r=this.activeType;if(r){var o,a=this.btnMap[r];if(a){t.DOM.removeClass(a,sr);var s=this.controlOption.activeButtonClassName;s&&t.DOM.removeClass(a,s)}null===(o=this.drawMap[r])||void 0===o||o.disable(),i=null}if(r!==n&&n){null===(u=this.drawMap[n])||void 0===u||u.enable();var u,l=this.btnMap[n];l&&t.DOM.addClass(l,"".concat(sr," ").concat(this.controlOption.activeButtonClassName)),i=n}this.activeType=i,this.emit(e.ControlEvent.DrawChange,i)}},{key:"onDrawClick",value:function(e){this.setActiveType(e)}},{key:"clearDrawData",value:function(){Object.values(this.drawMap).forEach(function(e){null==e||e.clear()}),this.emit(e.ControlEvent.DrawClear)}},{key:"initBtn",value:function(e){var n=t.DOM.create("button","".concat(si," ").concat(this.controlOption.buttonClassName));return n.innerHTML='<svg class="l7-draw-icon" aria-hidden="true">\n      <use xlink:href="'.concat(a7[e],'"></use>\n    </svg>'),n.setAttribute(st,e),n}}]),r}(t.Control);e.ACTIVE_COLOR=iU,e.BaseMode=aY,e.CircleDrawer=a2,e.DEFAULT_ADSORB_CONFIG=to,e.DEFAULT_AREA_OPTIONS=tt,e.DEFAULT_COMMON_OPTIONS=iI,e.DEFAULT_CURSOR_MAP=a,e.DEFAULT_DISTANCE_OPTIONS=te,e.DEFAULT_HISTORY_CONFIG=tn,e.DEFAULT_KEYBOARD_CONFIG=ti,e.DEFAULT_MID_POINT_STYLE=iz,e.DEFAULT_NODE_NORMAL_STYLE=iX,e.DEFAULT_NODE_STYLE=iV,e.DEFAULT_POINT_NORMAL_STYLE=iY,e.DEFAULT_POINT_STYLE=iq,e.DEFAULT_POPUP_CONFIG=tr,e.DEFAULT_SOURCE_DATA=s,e.DEFAULT_STYLE=i$,e.DEFAULT_TEXT_NORMAL_STYLE=iW,e.DashLineRender=ii,e.DragPolygonMode=a1,e.DrawCircle=a2,e.DrawControl=sP,e.DrawLine=a3,e.DrawPoint=a6,e.DrawPolygon=a4,e.DrawRect=a9,e.LayerRender=it,e.LineDrawer=a3,e.LineMode=aQ,e.LineRender=iR,e.MidPointMode=aq,e.MidPointRender=iS,e.NORMAL_COLOR=iN,e.PointDrawer=a6,e.PointMode=az,e.PointRender=ij,e.PolygonDrawer=a4,e.PolygonMode=a0,e.PolygonRender=iT,e.RENDER_MAP=iF,e.RectDrawer=a9,e.SceneRender=iH,e.Source=aI,e.TextRender=iB,e.calcAreaText=aM,e.calcDistanceTextsByLine=aP,e.createDashLine=aE,e.createLineFeature=aw,e.createPointFeature=aD,e.createPolygonFeature=ax,e.findMinIndex=a_,e.getAdsorbFeature=aS,e.getAdsorbLine=aT,e.getAdsorbPoint=aj,e.getDefaultLineProperties=am,e.getDefaultPointProperties=ay,e.getDefaultPolygonProperties=ab,e.getLineCenterPoint=ak,e.getLngLat=aA,e.getMapDom=aL,e.getParentByClassName=a8,e.getPosition=aO,e.getSingleColorStyle=function(e){return{point:{normal:{color:e},hover:{color:e},active:{color:e}},line:{normal:{color:e},hover:{color:e},active:{color:e}},polygon:{normal:{color:e},hover:{color:e},active:{color:e},style:{opacity:.2}},text:{normal:{color:e},active:{color:e}},midPoint:{normal:{color:e}},dashLine:{normal:{color:e}}}},e.getUuid=ap,e.isDev=!1,e.isSameFeature=av,e.resetEventLngLat=aH,e.splitByPosition=aR,e.transLngLat2Position=aC,e.updateTargetFeature=ag,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(99769))}}]);